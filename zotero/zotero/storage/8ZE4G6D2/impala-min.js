if(window.ngettext&&django&&django.ngettext&&django.catalog&&django.pluralidx){django.ngettext=function(e,t,i){var n=django.catalog[e];var r;if(typeof n!=="undefined"){r=n[django.pluralidx(i)];if(r&&r.length>0){return r}}return i==1?e:t};window.ngettext=django.ngettext}!function(e,t){"use strict";function i(e,t){var i,n;t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(e,!0,!0)):(i=document.createEventObject(),i.eventType=e);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);if(document.createEvent)document.dispatchEvent(i);else try{document.fireEvent("on"+i.eventType.toLowerCase(),i)}catch(e){}}function n(e){this.name="RavenConfigError",this.message=e}function r(e){var t=H.exec(e),i={},r=7;try{for(;r--;)i[W[r]]=t[r]||""}catch(t){throw new n("Invalid DSN: "+e)}if(i.pass)throw new n("Do not specify your private key in the DSN!");return i}function a(e){return"undefined"==typeof e}function s(e){return"function"==typeof e}function o(e){return"string"==typeof e}function l(e){for(var t in e)return!1;return!0}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){var i,n;if(a(e.length))for(i in e)e.hasOwnProperty(i)&&t.call(null,i,e[i]);else if(n=e.length)for(i=0;n>i;i++)t.call(null,i,e[i])}function d(){N="?sentry_version=4&sentry_client=raven-js/"+F.VERSION+"&sentry_key="+j}function h(e,t){var n=[];e.stack&&e.stack.length&&u(e.stack,function(e,t){var i=f(t);i&&n.push(i)}),i("handle",{stackInfo:e,options:t}),m(e.name,e.message,e.url,e.lineno,n,t)}function f(e){if(e.url){var t,i={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"},n=p(e);if(n){var r=["pre_context","context_line","post_context"];for(t=3;t--;)i[r[t]]=n[t]}return i.in_app=!(!O.includePaths.test(i.filename)||/(Raven|TraceKit)\./.test(i["function"])||/raven\.(min\.)js$/.test(i.filename)),i}}function p(e){if(e.context&&O.fetchContext){for(var t=e.context,i=~~(t.length/2),n=t.length,r=!1;n--;)if(t[n].length>300){r=!0;break}if(r){if(a(e.column))return;return[[],t[i].substr(e.column,50),[]]}return[t.slice(0,i),t[i],t.slice(i+1)]}}function m(e,t,i,n,r,a){var s,o;t+="",("Error"!==e||t)&&(O.ignoreErrors.test(t)||(r&&r.length?(i=r[0].filename||i,r.reverse(),s={frames:r}):i&&(s={frames:[{filename:i,lineno:n,in_app:!0}]}),t=v(t,100),O.ignoreUrls&&O.ignoreUrls.test(i)||(!O.whitelistUrls||O.whitelistUrls.test(i))&&(o=n?t+" at "+n:t,y(g({exception:{type:e,value:t},stacktrace:s,culprit:i,message:o},a)))))}function g(e,t){return t?(u(t,function(t,i){e[t]=i}),e):e}function v(e,t){return e.length<=t?e:e.substr(0,t)+"…"}function b(){var e={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};return document.referrer&&(e.headers.Referer=document.referrer),e}function y(e){w()&&(e=g({project:A,logger:O.logger,site:O.site,platform:"javascript",request:b()},e),e.tags=g(O.tags,e.tags),e.extra=g(O.extra,e.extra),l(e.tags)&&delete e.tags,l(e.extra)&&delete e.extra,S&&(e.user=S),s(O.dataCallback)&&(e=O.dataCallback(e)),(!s(O.shouldSendCallback)||O.shouldSendCallback(e))&&(M=e.event_id||(e.event_id=k()),_(e)))}function _(e){var t=new Image,n=T+N+"&sentry_data="+encodeURIComponent(JSON.stringify(e));t.onload=function(){i("success",{data:e,src:n})},t.onerror=t.onabort=function(){i("failure",{data:e,src:n})},t.src=n}function w(){return z?T?!0:(e.console&&console.error&&console.error("Error: Raven has not been configured."),!1):!1}function x(e){for(var t,i=[],n=0,r=e.length;r>n;n++)t=e[n],o(t)?i.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&i.push(t.source);return new RegExp(i.join("|"),"i")}function k(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)})}function $(){var t=e.RavenConfig;t&&F.config(t.dsn,t.config).install()}var C={remoteFetching:!1,collectWindowErrors:!0,linesOfContext:7},D=[].slice,I="?";C.wrap=function(e){function t(){try{return e.apply(this,arguments)}catch(e){throw C.report(e),e}}return t},C.report=function(){function i(e){o(),p.push(e)}function n(e){for(var t=p.length-1;t>=0;--t)p[t]===e&&p.splice(t,1)}function r(){l(),p=[]}function a(e,t){var i=null;if(!t||C.collectWindowErrors){for(var n in p)if(c(p,n))try{p[n].apply(null,[e].concat(D.call(arguments,2)))}catch(e){i=e}if(i)throw i}}function s(e,t,i,n,r){var s=null;if(v)C.computeStackTrace.augmentStackTraceWithInitialElement(v,t,i,e),u();else if(r)s=C.computeStackTrace(r),a(s,!0);else{var o={url:t,line:i,column:n};o.func=C.computeStackTrace.guessFunctionName(o.url,o.line),o.context=C.computeStackTrace.gatherContext(o.url,o.line),s={message:e,url:document.location.href,stack:[o]},a(s,!0)}return h?h.apply(this,arguments):!1}function o(){f||(h=e.onerror,e.onerror=s,f=!0)}function l(){f&&(e.onerror=h,f=!1,h=t)}function u(){var e=v,t=m;m=null,v=null,g=null,a.apply(null,[e,!1].concat(t))}function d(t,i){var n=D.call(arguments,1);if(v){if(g===t)return;u()}var r=C.computeStackTrace(t);if(v=r,g=t,m=n,e.setTimeout(function(){g===t&&u()},r.incomplete?2e3:0),i!==!1)throw t}var h,f,p=[],m=null,g=null,v=null;return d.subscribe=i,d.unsubscribe=n,d.uninstall=r,d}(),C.computeStackTrace=function(){function t(t){if(!C.remoteFetching)return"";try{var i=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}},n=i();return n.open("GET",t,!1),n.send(""),n.responseText}catch(e){return""}}function i(e){if(!o(e))return[];if(!c(w,e)){var i="";-1!==e.indexOf(document.domain)&&(i=t(e)),w[e]=i?i.split("\n"):[]}return w[e]}function n(e,t){var n,r=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,o="",l=10,c=i(e);if(!c.length)return I;for(var u=0;l>u;++u)if(o=c[t-u]+o,!a(o)){if(n=s.exec(o))return n[1];if(n=r.exec(o))return n[1]}return I}function r(e,t){var n=i(e);if(!n.length)return null;var r=[],s=Math.floor(C.linesOfContext/2),o=s+C.linesOfContext%2,l=Math.max(0,t-s-1),c=Math.min(n.length,t+o-1);t-=1;for(var u=l;c>u;++u)a(n[u])||r.push(n[u]);return r.length>0?r:null}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function l(e){return s(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(e,t){for(var n,r,a=0,s=t.length;s>a;++a)if((n=i(t[a])).length&&(n=n.join("\n"),r=e.exec(n)))return{url:t[a],line:n.substring(0,r.index).split("\n").length,column:r.index-n.lastIndexOf("\n",r.index)-1};return null}function d(e,t,n){var r,a=i(t),o=new RegExp("\\b"+s(e)+"\\b");return n-=1,a&&a.length>n&&(r=o.exec(a[n]))?r.index:null}function h(t){for(var i,n,r,a,o=[e.location.href],c=document.getElementsByTagName("script"),d=""+t,h=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=0;p<c.length;++p){var m=c[p];m.src&&o.push(m.src)}if(r=h.exec(d)){var g=r[1]?"\\s+"+r[1]:"",v=r[2].split(",").join("\\s*,\\s*");i=s(r[3]).replace(/;$/,";?"),n=new RegExp("function"+g+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+i+"\\s*}")}else n=new RegExp(s(d).replace(/\s+/g,"\\s+"));if(a=u(n,o))return a;if(r=f.exec(d)){var b=r[1];if(i=l(r[2]),n=new RegExp("on"+b+"=[\\'\"]\\s*"+i+"\\s*[\\'\"]","i"),a=u(n,o[0]))return a;if(n=new RegExp(i),a=u(n,o))return a}return null}function f(e){if(!e.stack)return null;for(var t,i,s=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?).*?):(\d+)(?::(\d+))?\s*$/i,l=e.stack.split("\n"),c=[],u=/^(.*) is undefined$/.exec(e.message),h=0,f=l.length;f>h;++h){if(t=o.exec(l[h]))i={url:t[3],func:t[1]||I,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else{if(!(t=s.exec(l[h])))continue;i={url:t[2],func:t[1]||I,line:+t[3],column:t[4]?+t[4]:null}}!i.func&&i.line&&(i.func=n(i.url,i.line)),i.line&&(i.context=r(i.url,i.line)),c.push(i)}return c.length?(c[0].line&&!c[0].column&&u?c[0].column=d(u[1],c[0].url,c[0].line):c[0].column||a(e.columnNumber)||(c[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:document.location.href,stack:c}):null}function p(e){for(var t,i=e.stacktrace,a=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,s=i.split("\n"),o=[],l=0,c=s.length;c>l;l+=2)if(t=a.exec(s[l])){var u={line:+t[1],column:+t[2],func:t[3]||t[4],args:t[5]?t[5].split(","):[],url:t[6]};if(!u.func&&u.line&&(u.func=n(u.url,u.line)),u.line)try{u.context=r(u.url,u.line)}catch(e){}u.context||(u.context=[s[l+1]]),o.push(u)}return o.length?{name:e.name,message:e.message,url:document.location.href,stack:o}:null}function m(t){var a=t.message.split("\n");if(a.length<4)return null;var s,o,d,h,f=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,g=[],v=document.getElementsByTagName("script"),b=[];for(o in v)c(v,o)&&!v[o].src&&b.push(v[o]);for(o=2,d=a.length;d>o;o+=2){var y=null;if(s=f.exec(a[o]))y={url:s[2],func:s[3],line:+s[1]};else if(s=p.exec(a[o])){y={url:s[3],func:s[4]};var _=+s[1],w=b[s[2]-1];if(w&&(h=i(y.url))){h=h.join("\n");var x=h.indexOf(w.innerText);x>=0&&(y.line=_+h.substring(0,x).split("\n").length)}}else if(s=m.exec(a[o])){var k=e.location.href.replace(/#.*$/,""),$=s[1],C=new RegExp(l(a[o+1]));h=u(C,[k]),y={url:k,line:h?h.line:$,func:""}}if(y){y.func||(y.func=n(y.url,y.line));var D=r(y.url,y.line),I=D?D[Math.floor(D.length/2)]:null;y.context=D&&I.replace(/^\s*/,"")===a[o+1].replace(/^\s*/,"")?D:[a[o+1]],g.push(y)}}return g.length?{name:t.name,message:a[0],url:document.location.href,stack:g}:null}function g(e,t,i,a){var s={url:t,line:i};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=n(s.url,s.line)),s.context||(s.context=r(s.url,s.line));var o=/ '([^']+)' /.exec(a);if(o&&(s.column=d(o[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function v(e,t){for(var i,r,a,s=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],l={},c=!1,u=v.caller;u&&!c;u=u.caller)if(u!==b&&u!==C.report){if(r={url:null,func:I,line:null,column:null},u.name?r.func=u.name:(i=s.exec(u.toString()))&&(r.func=i[1]),a=h(u)){r.url=a.url,r.line=a.line,r.func===I&&(r.func=n(r.url,r.line));var f=/ '([^']+)' /.exec(e.message||e.description);f&&(r.column=d(f[1],a.url,a.line))}l[""+u]?c=!0:l[""+u]=!0,o.push(r)}t&&o.splice(0,t);var p={name:e.name,message:e.message,url:document.location.href,stack:o};return g(p,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),p}function b(e,t){var i=null;t=null==t?0:+t;try{if(i=p(e))return i}catch(e){if(_)throw e}try{if(i=f(e))return i}catch(e){if(_)throw e}try{if(i=m(e))return i}catch(e){if(_)throw e}try{if(i=v(e,t+1))return i}catch(e){if(_)throw e}return{}}function y(e){e=(null==e?0:+e)+1;try{throw new Error}catch(t){return b(t,e+1)}}var _=!1,w={};return b.augmentStackTraceWithInitialElement=g,b.guessFunctionName=n,b.gatherContext=r,b.ofCaller=y,b}();var P,M,T,S,j,A,N,E=e.Raven,z=!(!e.JSON||!e.JSON.stringify),O={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:!0,tags:{},extra:{}},F={VERSION:"1.1.15",noConflict:function(){return e.Raven=E,F},config:function(e,t){if(!e)return F;var i=r(e),n=i.path.lastIndexOf("/"),a=i.path.substr(1,n);return t&&u(t,function(e,t){O[e]=t}),O.ignoreErrors.push("Script error."),O.ignoreErrors.push("Script error"),O.ignoreErrors=x(O.ignoreErrors),O.ignoreUrls=O.ignoreUrls.length?x(O.ignoreUrls):!1,O.whitelistUrls=O.whitelistUrls.length?x(O.whitelistUrls):!1,O.includePaths=x(O.includePaths),j=i.user,A=i.path.substr(n+1),T="//"+i.host+(i.port?":"+i.port:"")+"/"+a+"api/"+A+"/store/",i.protocol&&(T=i.protocol+":"+T),O.fetchContext&&(C.remoteFetching=!0),O.linesOfContext&&(C.linesOfContext=O.linesOfContext),C.collectWindowErrors=!!O.collectWindowErrors,d(),F},install:function(){return w()&&C.report.subscribe(h),F},context:function(e,i,n){return s(e)&&(n=i||[],i=e,e=t),F.wrap(e,i).apply(this,n)},wrap:function(e,i){function n(){for(var t=[],n=arguments.length,r=!e||e&&e.deep!==!1;n--;)t[n]=r?F.wrap(e,arguments[n]):arguments[n];try{return i.apply(this,t)}catch(t){throw F.captureException(t,e),t}}if(a(i)&&!s(e))return e;if(s(e)&&(i=e,e=t),!s(i))return i;if(i.__raven__)return i;for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r]);return n.__raven__=!0,n.__inner__=i,n},uninstall:function(){return C.report.uninstall(),F},captureException:function(e,t){if(!(e instanceof Error))return F.captureMessage(e,t);P=e;try{C.report(e,t)}catch(t){if(e!==t)throw t}return F},captureMessage:function(e,t){return y(g({message:e+""},t)),F},setUser:function(e){return S=e,F},lastException:function(){return P},lastEventId:function(){return M}},W="source protocol user pass host port path".split(" "),H=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;n.prototype=new Error,n.prototype.constructor=n,$(),e.Raven=F,"function"==typeof define&&define.amd&&define("raven",[],function(){return F})}(this),function(e,t,i){"use strict";if(i){var n=i.event.add;i.event.add=function(e,r,a,s,o){var l;return a&&a.handler?(l=a.handler,a.handler=t.wrap(a.handler)):(l=a,a=t.wrap(a)),a.guid=l.guid?l.guid:l.guid=i.guid++,n.call(this,e,r,a,s,o)};var r=i.fn.ready;i.fn.ready=function(e){return r.call(this,t.wrap(e))};var a=i.ajax;i.ajax=function(e,n){var r,s=["complete","error","success"];for("object"==typeof e&&(n=e,e=void 0),n=n||{};r=s.pop();)i.isFunction(n[r])&&(n[r]=t.wrap(n[r]));try{return a.call(this,e,n)}catch(e){throw t.captureException(e),e}}}}(this,Raven,window.jQuery),function(e,t){"use strict";var i=function(i){var n=e[i];e[i]=function(){var e=[].slice.call(arguments),i=e[0];return"function"==typeof i&&(e[0]=t.wrap(i)),n.apply?n.apply(this,e):n(e[0],e[1])}};i("setTimeout"),i("setInterval")}(this,Raven);(function(){var e=$("body");var t=e.data("raven-dsn");var i=e.data("raven-urls");if(t&&i){Raven.config(t,{whitelistUrls:i}).install()}else{console.log("Skipping ravenJS installation")}})();(function(){var e=this;var t=e._;var i={};var n=Array.prototype,r=Object.prototype,a=Function.prototype;var s=n.push,o=n.slice,l=n.concat,c=n.unshift,u=r.toString,d=r.hasOwnProperty;var h=n.forEach,f=n.map,p=n.reduce,m=n.reduceRight,g=n.filter,v=n.every,b=n.some,y=n.indexOf,_=n.lastIndexOf,w=Array.isArray,x=Object.keys,k=a.bind;var $=function(e){if(e instanceof $)return e;if(!(this instanceof $))return new $(e);this._wrapped=e};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=$}exports._=$}else{e["_"]=$}$.VERSION="1.4.0";var C=$.each=$.forEach=function(e,t,n){if(h&&e.forEach===h){e.forEach(t,n)}else if(e.length===+e.length){for(var r=0,a=e.length;r<a;r++){if(t.call(n,e[r],r,e)===i)return}}else{for(var s in e){if($.has(e,s)){if(t.call(n,e[s],s,e)===i)return}}}};$.map=$.collect=function(e,t,i){var n=[];if(f&&e.map===f)return e.map(t,i);C(e,function(e,r,a){n[n.length]=t.call(i,e,r,a)});return n};$.reduce=$.foldl=$.inject=function(e,t,i,n){var r=arguments.length>2;if(p&&e.reduce===p){if(n)t=$.bind(t,n);return r?e.reduce(t,i):e.reduce(t)}C(e,function(e,a,s){if(!r){i=e;r=true}else{i=t.call(n,i,e,a,s)}});if(!r)throw new TypeError("Reduce of empty array with no initial value");return i};$.reduceRight=$.foldr=function(e,t,i,n){var r=arguments.length>2;if(m&&e.reduceRight===m){if(n)t=$.bind(t,n);return arguments.length>2?e.reduceRight(t,i):e.reduceRight(t)}var a=e.length;if(a!==+a){var s=$.keys(e);a=s.length}C(e,function(o,l,c){l=s?s[--a]:--a;if(!r){i=e[l];r=true}else{i=t.call(n,i,e[l],l,c)}});if(!r)throw new TypeError("Reduce of empty array with no initial value");return i};$.find=$.detect=function(e,t,i){var n;D(e,function(e,r,a){if(t.call(i,e,r,a)){n=e;return true}});return n};$.filter=$.select=function(e,t,i){var n=[];if(g&&e.filter===g)return e.filter(t,i);C(e,function(e,r,a){if(t.call(i,e,r,a))n[n.length]=e});return n};$.reject=function(e,t,i){var n=[];C(e,function(e,r,a){if(!t.call(i,e,r,a))n[n.length]=e});return n};$.every=$.all=function(e,t,n){t||(t=$.identity);var r=true;if(v&&e.every===v)return e.every(t,n);C(e,function(e,a,s){if(!(r=r&&t.call(n,e,a,s)))return i});return!!r};var D=$.some=$.any=function(e,t,n){t||(t=$.identity);var r=false;if(b&&e.some===b)return e.some(t,n);C(e,function(e,a,s){if(r||(r=t.call(n,e,a,s)))return i});return!!r};$.contains=$.include=function(e,t){var i=false;if(y&&e.indexOf===y)return e.indexOf(t)!=-1;i=D(e,function(e){return e===t});return i};$.invoke=function(e,t){var i=o.call(arguments,2);return $.map(e,function(e){return($.isFunction(t)?t:e[t]).apply(e,i)})};$.pluck=function(e,t){return $.map(e,function(e){return e[t]})};$.where=function(e,t){if($.isEmpty(t))return[];return $.filter(e,function(e){for(var i in t){if(t[i]!==e[i])return false}return true})};$.max=function(e,t,i){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.max.apply(Math,e)}if(!t&&$.isEmpty(e))return-Infinity;var n={computed:-Infinity};C(e,function(e,r,a){var s=t?t.call(i,e,r,a):e;s>=n.computed&&(n={value:e,computed:s})});return n.value};$.min=function(e,t,i){if(!t&&$.isArray(e)&&e[0]===+e[0]&&e.length<65535){return Math.min.apply(Math,e)}if(!t&&$.isEmpty(e))return Infinity;var n={computed:Infinity};C(e,function(e,r,a){var s=t?t.call(i,e,r,a):e;s<n.computed&&(n={value:e,computed:s})});return n.value};$.shuffle=function(e){var t;var i=0;var n=[];C(e,function(e){t=$.random(i++);n[i-1]=n[t];n[t]=e});return n};var I=function(e){return $.isFunction(e)?e:function(t){return t[e]}};$.sortBy=function(e,t,i){var n=I(t);return $.pluck($.map(e,function(e,t,r){return{value:e,index:t,criteria:n.call(i,e,t,r)}}).sort(function(e,t){var i=e.criteria;var n=t.criteria;if(i!==n){if(i>n||i===void 0)return 1;if(i<n||n===void 0)return-1}return e.index<t.index?-1:1}),"value")};var P=function(e,t,i,n){var r={};var a=I(t);C(e,function(t,s){var o=a.call(i,t,s,e);n(r,o,t)});return r};$.groupBy=function(e,t,i){return P(e,t,i,function(e,t,i){($.has(e,t)?e[t]:e[t]=[]).push(i)})};$.countBy=function(e,t,i){return P(e,t,i,function(e,t,i){if(!$.has(e,t))e[t]=0;e[t]++})};$.sortedIndex=function(e,t,i,n){i=i==null?$.identity:I(i);var r=i.call(n,t);var a=0,s=e.length;while(a<s){var o=a+s>>>1;i.call(n,e[o])<r?a=o+1:s=o}return a};$.toArray=function(e){if(!e)return[];if(e.length===+e.length)return o.call(e);return $.values(e)};$.size=function(e){return e.length===+e.length?e.length:$.keys(e).length};$.first=$.head=$.take=function(e,t,i){return t!=null&&!i?o.call(e,0,t):e[0]};$.initial=function(e,t,i){return o.call(e,0,e.length-(t==null||i?1:t))};$.last=function(e,t,i){if(t!=null&&!i){return o.call(e,Math.max(e.length-t,0))}else{return e[e.length-1]}};$.rest=$.tail=$.drop=function(e,t,i){return o.call(e,t==null||i?1:t)};$.compact=function(e){return $.filter(e,function(e){return!!e})};var M=function(e,t,i){C(e,function(e){if($.isArray(e)){t?s.apply(i,e):M(e,t,i)}else{i.push(e)}});return i};$.flatten=function(e,t){return M(e,t,[])};$.without=function(e){return $.difference(e,o.call(arguments,1))};$.uniq=$.unique=function(e,t,i,n){var r=i?$.map(e,i,n):e;var a=[];var s=[];C(r,function(i,n){if(t?!n||s[s.length-1]!==i:!$.contains(s,i)){s.push(i);a.push(e[n])}});return a};$.union=function(){return $.uniq(l.apply(n,arguments))};$.intersection=function(e){var t=o.call(arguments,1);return $.filter($.uniq(e),function(e){return $.every(t,function(t){return $.indexOf(t,e)>=0})})};$.difference=function(e){var t=l.apply(n,o.call(arguments,1));return $.filter(e,function(e){return!$.contains(t,e)})};$.zip=function(){var e=o.call(arguments);var t=$.max($.pluck(e,"length"));var i=new Array(t);for(var n=0;n<t;n++){i[n]=$.pluck(e,""+n)}return i};$.object=function(e,t){var i={};for(var n=0,r=e.length;n<r;n++){if(t){i[e[n]]=t[n]}else{i[e[n][0]]=e[n][1]}}return i};$.indexOf=function(e,t,i){var n=0,r=e.length;if(i){if(typeof i=="number"){n=i<0?Math.max(0,r+i):i}else{n=$.sortedIndex(e,t);return e[n]===t?n:-1}}if(y&&e.indexOf===y)return e.indexOf(t,i);for(;n<r;n++)if(e[n]===t)return n;return-1};$.lastIndexOf=function(e,t,i){if(_&&e.lastIndexOf===_)return e.lastIndexOf(t,i);var n=i!=null?i:e.length;while(n--)if(e[n]===t)return n;return-1};$.range=function(e,t,i){if(arguments.length<=1){t=e||0;e=0}i=arguments[2]||1;var n=Math.max(Math.ceil((t-e)/i),0);var r=0;var a=new Array(n);while(r<n){a[r++]=e;e+=i}return a};var T=function(){};$.bind=function e(t,i){var n,r;if(t.bind===k&&k)return k.apply(t,o.call(arguments,1));if(!$.isFunction(t))throw new TypeError;r=o.call(arguments,2);return n=function(){if(!(this instanceof n))return t.apply(i,r.concat(o.call(arguments)));T.prototype=t.prototype;var e=new T;var a=t.apply(e,r.concat(o.call(arguments)));if(Object(a)===a)return a;return e}};$.bindAll=function(e){var t=o.call(arguments,1);if(t.length==0)t=$.functions(e);C(t,function(t){e[t]=$.bind(e[t],e)});return e};$.memoize=function(e,t){var i={};t||(t=$.identity);return function(){var n=t.apply(this,arguments);return $.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}};$.delay=function(e,t){var i=o.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)};$.defer=function(e){return $.delay.apply($,[e,1].concat(o.call(arguments,1)))};$.throttle=function(e,t){var i,n,r,a,s,o;var l=$.debounce(function(){s=a=false},t);return function(){i=this;n=arguments;var c=function(){r=null;if(s){o=e.apply(i,n)}l()};if(!r)r=setTimeout(c,t);if(a){s=true}else{a=true;o=e.apply(i,n)}l();return o}};$.debounce=function(e,t,i){var n,r;return function(){var a=this,s=arguments;var o=function(){n=null;if(!i)r=e.apply(a,s)};var l=i&&!n;clearTimeout(n);n=setTimeout(o,t);if(l)r=e.apply(a,s);return r}};$.once=function(e){var t=false,i;return function(){if(t)return i;t=true;i=e.apply(this,arguments);e=null;return i}};$.wrap=function(e,t){return function(){var i=[e];s.apply(i,arguments);return t.apply(this,i)}};$.compose=function(){var e=arguments;return function(){var t=arguments;for(var i=e.length-1;i>=0;i--){t=[e[i].apply(this,t)]}return t[0]}};$.after=function(e,t){if(e<=0)return t();return function(){if(--e<1){return t.apply(this,arguments)}}};$.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)if($.has(e,i))t[t.length]=i;return t};$.values=function(e){var t=[];for(var i in e)if($.has(e,i))t.push(e[i]);return t};$.pairs=function(e){var t=[];for(var i in e)if($.has(e,i))t.push([i,e[i]]);return t};$.invert=function(e){var t={};for(var i in e)if($.has(e,i))t[e[i]]=i;return t};$.functions=$.methods=function(e){var t=[];for(var i in e){if($.isFunction(e[i]))t.push(i)}return t.sort()};$.extend=function(e){C(o.call(arguments,1),function(t){for(var i in t){e[i]=t[i]}});return e};$.pick=function(e){var t={};var i=l.apply(n,o.call(arguments,1));C(i,function(i){if(i in e)t[i]=e[i]});return t};$.omit=function(e){var t={};var i=l.apply(n,o.call(arguments,1));for(var r in e){if(!$.contains(i,r))t[r]=e[r]}return t};$.defaults=function(e){C(o.call(arguments,1),function(t){for(var i in t){if(e[i]==null)e[i]=t[i]}});return e};$.clone=function(e){if(!$.isObject(e))return e;return $.isArray(e)?e.slice():$.extend({},e)};$.tap=function(e,t){t(e);return e};var S=function(e,t,i,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;if(e instanceof $)e=e._wrapped;if(t instanceof $)t=t._wrapped;var r=u.call(e);if(r!=u.call(t))return false;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return false;var a=i.length;while(a--){if(i[a]==e)return n[a]==t}i.push(e);n.push(t);var s=0,o=true;if(r=="[object Array]"){s=e.length;o=s==t.length;if(o){while(s--){if(!(o=S(e[s],t[s],i,n)))break}}}else{var l=e.constructor,c=t.constructor;if(l!==c&&!($.isFunction(l)&&l instanceof l&&$.isFunction(c)&&c instanceof c)){return false}for(var d in e){if($.has(e,d)){s++;if(!(o=$.has(t,d)&&S(e[d],t[d],i,n)))break}}if(o){for(d in t){if($.has(t,d)&&!s--)break}o=!s}}i.pop();n.pop();return o};$.isEqual=function(e,t){return S(e,t,[],[])};$.isEmpty=function(e){if(e==null)return true;if($.isArray(e)||$.isString(e))return e.length===0;for(var t in e)if($.has(e,t))return false;return true};$.isElement=function(e){return!!(e&&e.nodeType===1)};$.isArray=w||function(e){return u.call(e)=="[object Array]"};$.isObject=function(e){return e===Object(e)};C(["Arguments","Function","String","Number","Date","RegExp"],function(e){$["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}});if(!$.isArguments(arguments)){$.isArguments=function(e){return!!(e&&$.has(e,"callee"))}}if(typeof/./!=="function"){$.isFunction=function(e){return typeof e==="function"}}$.isFinite=function(e){return $.isNumber(e)&&isFinite(e)};$.isNaN=function(e){return $.isNumber(e)&&e!=+e};$.isBoolean=function(e){return e===true||e===false||u.call(e)=="[object Boolean]"};$.isNull=function(e){return e===null};$.isUndefined=function(e){return e===void 0};$.has=function(e,t){return d.call(e,t)};$.noConflict=function(){e._=t;return this};$.identity=function(e){return e};$.times=function(e,t,i){for(var n=0;n<e;n++)t.call(i,n)};$.random=function(e,t){if(t==null){t=e;e=0}return e+(0|Math.random()*(t-e+1))};var j={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};j.unescape=$.invert(j.escape);var A={escape:new RegExp("["+$.keys(j.escape).join("")+"]","g"),unescape:new RegExp("("+$.keys(j.unescape).join("|")+")","g")};$.each(["escape","unescape"],function(e){$[e]=function(t){if(t==null)return"";return(""+t).replace(A[e],function(t){return j[e][t]})}});$.result=function(e,t){if(e==null)return null;var i=e[t];return $.isFunction(i)?i.call(e):i};$.mixin=function(e){C($.functions(e),function(t){var i=$[t]=e[t];$.prototype[t]=function(){var e=[this._wrapped];s.apply(e,arguments);return F.call(this,i.apply($,e))}})};var N=0;$.uniqueId=function(e){var t=N++;return e?e+t:t};$.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/(.)^/;var z={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var O=/\\|'|\r|\n|\t|\u2028|\u2029/g;$.template=function(e,t,i){i=$.defaults({},i,$.templateSettings);var n=new RegExp([(i.escape||E).source,(i.interpolate||E).source,(i.evaluate||E).source].join("|")+"|$","g");var r=0;var a="__p+='";e.replace(n,function(t,i,n,s,o){a+=e.slice(r,o).replace(O,function(e){return"\\"+z[e]});a+=i?"'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?"'+\n((__t=("+n+"))==null?'':__t)+\n'":s?"';\n"+s+"\n__p+='":"";r=o+t.length});a+="';\n";if(!i.variable)a="with(obj||{}){\n"+a+"}\n";a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(i.variable||"obj","_",a)}catch(e){e.source=a;throw e}if(t)return s(t,$);var o=function(e){return s.call(this,e,$)};o.source="function("+(i.variable||"obj")+"){\n"+a+"}";return o};$.chain=function(e){return $(e).chain()};var F=function(e){return this._chain?$(e).chain():e};$.mixin($);C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];$.prototype[e]=function(){var i=this._wrapped;t.apply(i,arguments);if((e=="shift"||e=="splice")&&i.length===0)delete i[0];return F.call(this,i)}});C(["concat","join","slice"],function(e){var t=n[e];$.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}});$.extend($.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(e){e.fn.zCarousel=function(t){t=e.extend({itemsPerPage:1,circular:false},t);var i=e(this).eq(0),n=e(".slider",i),r=n.find(".panel"),a=e(t.btnPrev),s=e(t.btnNext),o=t.prop||(e("body").hasClass("html-rtl")?"right":"left"),l=0,c=Math.ceil(r.length/t.itemsPerPage);if(!n.length)return i;function u(e){if(t.circular){l=e>c+1?e-c:e<0?e+c:e;if(n.hasClass("noslide")){l=e>c?1:e<1?c:e}}else{l=Math.min(Math.max(0,e),c-1)}n.css(o,l*-100+"%");a.toggleClass("disabled",l==0&&!t.circular);s.toggleClass("disabled",l==c-1&&!t.circular);setTimeout(function(){n.removeClass("noslide")},0)}function d(){u(l+1)}function h(){u(l-1)}s.click(_pd(d));a.click(_pd(h));i.gofwd=d;i.goback=h;var f=n[0].childNodes;for(var p=0;p<f.length;p++){if(f[p].nodeType==3){n[0].removeChild(f[p])}}if(t.circular){n.prepend(r.slice(-t.itemsPerPage).clone().addClass("cloned")).append(r.slice(0,t.itemsPerPage).clone().addClass("cloned"));n.addClass("noslide");n.bind("transitionend webkitTransitionEnd",function(){if(l>c||l<1){n.addClass("noslide");setTimeout(function(){u(l)},0)}});u(t.itemsPerPage)}else{u(0)}return i}})(jQuery);function BrowserUtils(){"use strict";var e={firefox:/Mozilla.*(Firefox|Minefield|Namoroka|Shiretoko|GranParadiso|BonEcho|Iceweasel|Fennec|MozillaDeveloperPreview)\/([^\s]*).*$/,seamonkey:/Mozilla.*(SeaMonkey|Iceape)\/([^\s]*).*$/,mobile:/Mozilla.*(Fennec|Mobile)\/([^\s]*)$/,thunderbird:/Mozilla.*(Thunderbird|Shredder|Lanikai)\/([^\s*]*).*$/},t={windows:"Windows",mac:"Mac",linux:"Linux",android:"Android"};var i={},n="",r,a,s,o=true;for(s in e){if(e.hasOwnProperty(s)){r=e[s];a=r.exec(navigator.userAgent);i[s]=!!(a&&a.length===3);if(i[s]){n=escape_(a[2]);o=false}}}if(i.firefox&&i.seamonkey){i.firefox=false}var l={},c="";for(s in t){if(t.hasOwnProperty(s)){r=t[s];l[s]=navigator.userAgent.indexOf(r)!=-1;if(l[s]){c=s}}}if(!c){l["other"]=!c;c="other"}return{browser:i,browserVersion:n,badBrowser:o,os:l,platform:c,platformName:gettext(t[c])}}var VersionCompare={compareVersions:function(e,t){var i=e.split("."),n=t.split("."),r,a,s,o;for(o=0;o<i.length||o<n.length;o++){r=o<i.length?i[o]:null;a=o<n.length?n[o]:null;s=this.compareVersionParts(r,a);if(s!==0)return s}return 0},compareVersionParts:function(e,t){var i=this.parseVersionPart(e),n=this.parseVersionPart(t),r=this.cmp(i["numA"],n["numA"]);if(r)return r;r=this.strcmp(i["strB"],n["strB"]);if(r)return r;r=this.cmp(i["numC"],n["numC"]);if(r)return r;return this.strcmp(i["extraD"],n["extraD"])},parseVersionPart:function(e){if(e=="*"){return{numA:Number.MAX_VALUE,strB:"",numC:0,extraD:""}}var t=/^([-\d]*)([^-\d]*)([-\d]*)(.*)$/,i=t.exec(e),n={numA:parseInt(i[1],10),strB:i[2],numC:parseInt(i[3],10),extraD:i[4]};if(n["strB"]=="+"){n["numA"]++;n["strB"]="pre"}return n},cmp:function(e,t){if(isNaN(e))e=0;if(isNaN(t))t=0;if(e<t)return-1;if(e>t)return 1;return 0},strcmp:function(e,t){if(e==t)return 0;if(e==="")return 1;if(t==="")return-1;if(e<t)return-1;else if(e>t)return 1;else return 0}};function bandwagonRefreshEvent(){if(document.createEvent){var e=document.createEvent("Events");e.initEvent("bandwagonRefresh",true,false);document.dispatchEvent(e)}}$(document).ready(function(){$("form.go").change(function(){this.submit()}).find("button").hide()});var AMO={};$(document).ready(function(){$('a[href="#install-beta"]').click(function(e){e.preventDefault();$(".install-beta").slideDown("slow").show()})});var z={};$(document).ready(function(){$(".install").installButton();$(window).trigger("buttons_loaded");if($.fn.tabify){$(".tab-wrapper").tabify()}$("span.emaillink").each(function(){$(this).find(".i").remove();var e=$(this).text().split("").reverse().join("");$(this).prev("a").attr("href","mailto:"+e).addClass("email")});if(!("placeholder"in document.createElement("input"))){$("input[placeholder]").placeholder()}if(z.readonly){
$("form[method=post]").before(gettext("This feature is temporarily disabled while we perform website maintenance. Please check back a little later.")).find("input, button, select").prop("disabled",true).addClass("disabled")}if($("body").hasClass("restyle")){var e=getScrollbarWidth()/2;$(".header-bg,.restyle .previews").css({width:"calc(100vw - "+e+"px)"})}});z.inlineSVG=function(){var e=document.createElement("div");e.innerHTML="<svg></svg>";return!!(window.SVGSVGElement&&e.firstChild instanceof window.SVGSVGElement)}();if(!z.inlineSVG){$("body").addClass("noInlineSVG")}function _pd(e){return function(t){t.preventDefault();e.apply(this,arguments)}}jQuery.fn.placeholder=function(e){if(e){this.attr("placeholder",e)}if("placeholder"in document.createElement("input")){return this}if(e&&this.hasClass("placeholder")){this.val("").blur()}return this.focus(function(){var e=$(this),t=e.attr("placeholder");if(e.val()==t){e.val("").removeClass("placeholder")}}).blur(function(){var e=$(this),t=e.attr("placeholder");if(e.val()===""){e.val(t).addClass("placeholder")}}).each(function(){var e=$(this);e.closest("form").submit(function(){if(e.hasClass("placeholder")){e.val("")}})}).blur()};jQuery.fn.hasattr=function(e){return this.attr(e)!==undefined};var escape_=function(e){if(e===undefined){return}return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")};if(!("_"in window))_={};_.haskey=function(e,t){return typeof e[t]!=="undefined"};$.extend(z,BrowserUtils());$(document.body).addClass(z.platform).toggleClass("badbrowser",z.badBrowser);z.app=document.body.getAttribute("data-app");z.appName=document.body.getAttribute("data-appname");z.appMatchesUserAgent=z.browser[z.app];z.anonymous=JSON.parse(document.body.getAttribute("data-anonymous"));z.static_url=document.body.getAttribute("data-static-url");z.readonly=JSON.parse(document.body.getAttribute("data-readonly"));if(z.badBrowser){$(".get-fx-message").show()}z.capabilities={JSON:window.JSON&&typeof JSON.parse=="function",debug:(""+document.location).indexOf("dbg")>=0,debug_in_page:(""+document.location).indexOf("dbginpage")>=0,console:window.console&&typeof window.console.log=="function",replaceState:typeof history.replaceState==="function",chromeless:window.locationbar&&!window.locationbar.visible,localStorage:false,sessionStorage:false,fileAPI:!!window.FileReader,performance:!!(window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance),webactivities:!!(window.setMessageHandler||window.mozSetMessageHandler)};try{if("localStorage"in window&&window["localStorage"]!==null){z.capabilities.localStorage=true}}catch(e){}try{if("sessionStorage"in window&&window["sessionStorage"]!==null){z.capabilities.sessionStorage=true}}catch(e){}var format=function(){var e=/\{([^}]+)\}/g;return function(t,i){if(!t){throw"Format string is empty!"}if(!i)return;if(!(i instanceof Array||i instanceof Object))i=Array.prototype.slice.call(arguments,1);return t.replace(e,function(e,t){return i[t]})}}();function template(e){if(!e){throw"Template string is empty!"}return function(t){return format(e,t)}}jQuery.cookie=function(e,t,i){if(typeof t!="undefined"){i=i||{};if(t===null){t="";i.expires=-1}var n="";if(i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)){var r;if(typeof i.expires=="number"){r=new Date;r.setTime(r.getTime()+i.expires*24*60*60*1e3)}else{r=i.expires}n="; expires="+r.toUTCString()}var a=i.path?"; path="+i.path:"";var s=i.domain?"; domain="+i.domain:"";var o=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),n,a,s,o].join("")}else{var l=null;if(document.cookie&&document.cookie!=""){var c=document.cookie.split(";");for(var u=0;u<c.length;u++){var d=jQuery.trim(c[u]);if(d.substring(0,e.length+1)==e+"="){l=decodeURIComponent(d.substring(e.length+1));break}}}return l}};z.Storage=function(){var e={expires:30,getItem:function(e){return $.cookie(e)},setItem:function(e,t){return $.cookie(e,t,{path:"/",expires:this.expires})},removeItem:function(e){return $.cookie(e,null)}};var t=z.capabilities.localStorage?localStorage:e;return function(e){e=e?e+"-":"";return{get:function(i){return t.getItem(e+i)},set:function(i,n){return t.setItem(e+i,n)},remove:function(i){return t.removeItem(e+i)}}}}();z.SessionStorage=function(){var e={getItem:function(e){return $.cookie(e)},setItem:function(e,t){return $.cookie(e,t,{path:"/"})},removeItem:function(e){return $.cookie(e,null)}};var t=z.capabilities.localStorage?sessionStorage:e;return function(e){e=e?e+"-":"";return{get:function(i){return t.getItem(e+i)},set:function(i,n){return t.setItem(e+i,n)},remove:function(i){return t.removeItem(e+i)}}}}();(function(){z.button={};z.button.after={contrib:function(e,t){if(t===0){document.location=$(this).attr("data-developers")}}};var e='<div class="extra"><span class="notavail">{0}</span></div>',t='<div class="extra"><span class="notavail acr-incompat">{0}</span></div>',i='<div class="extra"><span class="notsupported">{0}</span></div>',n=new RegExp("(/downloads/(?:latest|file)/\\d+)");if($("body").hasClass("restyle")){e='<div class="extra"><span class="button disabled not-available" disabled>{0}</span></div>';t='<div class="extra"><span class="button disabled not-available" disabled>{0}</span></div>';i='<div class="extra"><span class="button disabled not-available" disabled>{0}</span></div>'}var r={firefox:"4.0",mobile:"11.0",seamonkey:"2.1",thunderbird:"5.0"};var a=function(){var t=this,a=$(this),s=a.find(".button");s.each(function(){var e=$(this);if(e.hasattr("data-realurl")){e.attr("href",e.attr("data-realurl"))}if(z.app==="mobile"&&!z.appMatchesUserAgent){var t=e.attr("href");e.attr("href",t.replace(n,"$1/type:attachment"))}});var o=a.attr("data-addon"),l=a.attr("data-min"),c=a.attr("data-max"),u=a.attr("data-name"),d=a.attr("data-icon"),h=a.attr("data-after"),f=a.hasattr("data-search"),p=a.hasClass("accept"),m=a.attr("data-is-compatible")=="true",g=a.attr("data-is-compatible-app")=="true",v=a.hasattr("data-compat-overrides"),b=a.attr("data-versions"),y=p?gettext("Accept and Install"):gettext("Add to {0}"),w=format(y,[z.appName]),x={addon:o,msg:z.appMatchesUserAgent?w:gettext("Download Now")},k=z.appMatchesUserAgent&&l&&c,C=$(document.body),D=a.closest(".install-shell").find(".d2c-reasons-popup ul"),I,P;var M=s.find(".os").length&&!s.hasClass(z.platform);var T=false;if(c){if(z.browser.firefox&&VersionCompare.compareVersions(c,r.firefox)>=0){T=true}else if(!z.browser.firefox&&VersionCompare.compareVersions(c,r.mobile)>=0){T=true}else if(z.browser.mobile&&VersionCompare.compareVersions(c,r.mobile)>=0){T=true}else if(z.browser.seamonkey&&VersionCompare.compareVersions(c,r.seamonkey)>=0){T=true}else if(z.browser.thunderbird&&VersionCompare.compareVersions(c,r.thunderbird)>=0){T=true}}if(k){I=VersionCompare.compareVersions(z.browserVersion,l)<0;P=VersionCompare.compareVersions(z.browserVersion,c)>0;if(I){m=false}}if(T&&m){if(!g){D.append($("<li>",{text:gettext("Add-on has not been updated to support default-to-compatible.")}));m=false}if(z.browserVersion!==0&&VersionCompare.compareVersions(z.browserVersion,"10.0")<0){D.append($("<li>",{text:gettext("You need to be using Firefox 10.0 or higher.")}));m=false}if(m&&v){var S=JSON.parse(a.attr("data-compat-overrides"));_.each(S,function(e){var t=e[0],i=e[1];if(VersionCompare.compareVersions(z.browserVersion,t)>=0&&VersionCompare.compareVersions(z.browserVersion,i)<=0){m=false;D.append($("<li>",{text:gettext("Mozilla has marked this version as incompatible with your Firefox version.")}));return}})}}else{m=false}var j=function(e){return function(){x.url=escape_(s.filter(":visible").attr("href"));return format(z.button.messages[e],x)}};var A=function(t,i){a.parent().append(format(i||e,[t]))};var N=function(){if(k||f&&z.appMatchesUserAgent){s.addClass("add").removeClass("download").find("span").text(w)}};var E=function(){try{if(!k&&!f||!("InstallTrigger"in window))return}catch(e){return}a.addClass("clickHijack");a.bind("mousedown focus",function(e){a.addClass("active")}).bind("mouseup blur",function(e){a.removeClass("active")}).click(function(e){var i=$(e.target),n="";if(i.hasClass("installer")){installer=i}else{installer=i.parents(".installer").first();if(_.indexOf(a.find(".installer"),installer[0])==-1){return}}e.preventDefault();var r={};a.find(".button[data-hash]").each(function(){r[$(this).attr("href")]=$(this).attr("data-hash")});var s=r[installer.attr("href")];var o=_.haskey(z.button.after,h)?z.button.after[h]:_.identity,l=_.bind(o,t),c=f?z.installSearch:z.installAddon;c(u,installer[0].href,d,s,l)})};var O=s.map(function(){var e=$(this).find(".os").attr("data-os"),t=z.appMatchesUserAgent?gettext("Install for {0} anyway"):gettext("Download for {0} anyway");return{href:$(this).attr("href"),msg:format(t,[e])}});var F=function(e){var t=$.extend({addPopup:true,addWarning:true,extra:""},e);warn=t.addWarning?A:_.identity;var n=function(e){return function(){var i=$.isFunction(t.extra)?t.extra():t.extra;return $(e.apply(this,arguments)).append(i)}};var r=n(function(){var e=$.map(O,function(e){return format(z.button.messages.platform_link,e)});return format(z.button.messages.bad_platform,{platforms:e.join("")})});var a=n(function(){x.new_version=c;x.old_version=z.browserVersion;return j(P?"not_updated":"newer_version")()});var o=n(function(){return j("not_compatible")()});var u=n(function(){return j("not_compatible_no_reasons")()});var d=n(function(){var e=$(r()),t=$(a());t.prepend(e.find(".msg").clone());if(this.switchInstaller){t.find(".installer").parent().html(e.find("ul").clone())}return t});if(M){warn(gettext("Not available for your platform"));s.addClass("concealed");s.first().css("display","inherit");s.closest(".item.addon").addClass("incompatible")}if(k&&!m&&(I||P)){if(T){if(!M){var h=gettext("Not available for {0} {1}");if(D.children().length){h+='<span><a class="d2c-reasons-help" href="#">?</a></span>'}warn(format(h,[z.appName,z.browserVersion]))}s.closest("div").attr("data-version-supported",false);s.addClass("concealed");s.closest(".item.addon").addClass("incompatible");var p=s.closest(".install-shell");if(!m&&D.children().length){p.find(".d2c-reasons-popup").popup(p.find(".d2c-reasons-help"),{callback:function(e){return{pointTo:$(e.click_target)}}})}if(!t.addPopup)return;if(M){s.addPopup(r)}else if(!m){x.versions_url=b;x.reasons=D.html();s.addPopup(x.reasons?o:u)}else{s.addPopup(a)}return true}else{warn(format(gettext("Not available for {0} {1}"),[z.appName,z.browserVersion]));s.closest("div").attr("data-version-supported",false);s.addClass("concealed");s.closest(".item.addon").addClass("incompatible");if(!t.addPopup)return;if(M&&I){s.addPopup(d)}else if(M&&P){s.addPopup(_.bind(d,{switchInstaller:true}))}else{s.addPopup(a)}return true}}else if(M&&t.addPopup){s.addPopup(r);s.closest("div").attr("data-version-supported",true);return true}else if(!H&&(k||f)){s.addClass("installer");s.closest("div").attr("data-version-supported",true)}else if(!k){var g=l&&c?gettext("Works with {app} {min} - {max}"):gettext("Works with {app}");var v=template(g+'<span class="more-versions"><a href="{versions_url}">'+gettext("View other versions")+"</a></span>");var y={app:z.appName,min:l,max:c,versions_url:b};A(v(y),i)}return false};var W=a.hasClass("beta"),H=a.hasClass("unreviewed")&&!W,R=a.hasClass("persona"),L=a.hasClass("contrib"),q=a.hasClass("eula");if(H&&!(q||L||W)){s.addPopup(j("unreviewed"))}if(q||L){F({addPopup:false})}else if(R){s.removeClass("download").addClass("add").find("span").text(w);if($.hasPersonas()){s.personasButton()}else{s.addClass("concealed");if(z.appMatchesUserAgent){x.old_version=z.browserVersion;s.addPopup(j("personas_need_upgrade"))}else{s.addPopup(j("learn_more_personas"))}}}else if(z.appMatchesUserAgent){E();N();var Y=f?{addPopup:false,addWarning:false}:{};F(Y)}else if(z.app=="firefox"){$("#downloadAnyway").attr("href",escape_(s.filter(":visible").attr("href")));$("#downloadAnyway").show();s.addClass("concealed");F({addPopup:false});s.addClass("CTA");s.text(gettext("Only with Firefox — Get Firefox Now!"));s.attr("href","https://www.mozilla.org/firefox/new/?scene=2&utm_source=addons.mozilla.org&utm_medium=referral&utm_campaign=non-fx-button#download-fx");$("#site-nonfx").hide()}else if(z.app=="android"&&!T){$("#downloadAnyway").attr("href",escape_(s.filter(":visible").attr("href")));$("#downloadAnyway").show();s.addClass("button-red");s.text(gettext("Download now"));$(".extra").hide();A(gettext("Only available on Firefox Desktop"))}else if(z.app=="thunderbird"){var U=function(){return $(j("learn_more")()).html()};if(!F({extra:U})){s.addPopup(j("learn_more"),true)}}else{E();N();F()}};var s=$("body").attr("data-purchases")||"",o=$.map(s.split(","),function(e){return parseInt(e,10)});jQuery.fn.installButton=function(){return this.each(a)};jQuery.fn.addPopup=function(e,t){return this.each(function(){var i=$(this),n=this,r=$(document.body);if(this.hasPopup){i.bind("newPopup",function(e,t){i.unbind("newPopup");$(t).find(".installer").click(function(e){i.unbind("click");n.hasPopup=false;var t=n.popupQueue.pop();if(!t[1]){e.preventDefault();e.stopPropagation()}jQuery.fn.addPopup.apply(i,t);i.click()})});n.popupQueue=n.popupQueue||[];n.popupQueue.push([e,t])}else{this.hasPopup=true;i.click(function(n){var a=$($.isFunction(e)?e():e),s=a.get(0);if(!i.filter(":visible").length){return}if(!t){n.preventDefault()}if(i.offset().left>$(window).width()/2){a.addClass("left")}i.trigger("newPopup",[a]);i.after(a);r.trigger("newStatic");var o=function(e){if(e.type=="click"&&s==e.target||_.indexOf($(e.target).parents(),s)!=-1){return}a.remove();r.unbind("click newPopup",o);r.trigger("closeStatic")};setTimeout(function(){r.bind("click newPopup",o)},0)})}})};z.installAddon=function(e,t,i,n,r){var a={};a[e]={URL:t,IconURL:i,toString:function(){return t}};if(n){a[e].Hash=n}InstallTrigger.install(a,r);_gaq.push(["_trackEvent","AMO Addon / Theme Installs","addon",e])};z.installSearch=function(e,t,i,n,r){if(window.external&&window.external.AddSearchProvider){window.external.AddSearchProvider(t);r();_gaq.push(["_trackEvent","AMO Addon / Theme Installs","addon",e])}else{alert(gettext("Sorry, you need a Mozilla-based browser (such as Firefox) to install a search plugin."))}}})();(function(e){e.fn.pjax=function(e,i){i=n(e,i);return this.live("click",function(e){return t(e,i)})};function t(t,i,r){r=n(i,r);var a=t.currentTarget;if(t.which>1||t.metaKey)return;if(location.protocol!==a.protocol||location.host!==a.host)return;if(a.hash&&a.href.replace(a.hash,"")===location.href.replace(location.hash,""))return;var s={url:a.href,container:e(a).attr("data-pjax"),clickedElement:e(a),fragment:null};e.pjax(e.extend({},s,r));t.preventDefault();return false}var i=e.pjax=function(t){var n=r(t.container),a=t.success||e.noop;delete t.success;t=e.extend(true,{},i.defaults,t);if(e.isFunction(t.url)){t.url=t.url()}t.context=n;t.success=function(r){if(t.fragment){var s=e(r).find(t.fragment);if(s.length)r=s.children();else return window.location=t.url}else{if(!e.trim(r)||/<html/i.test(r))return window.location=t.url}this.html(r);var o=document.title,l=e.trim(this.find("title").remove().text());if(!l&&t.fragment){l=s.attr("title")||s.data("title")}if(l)document.title=l;var c={pjax:n.selector,fragment:t.fragment,timeout:t.timeout};var u=e.param(t.data);if(u!="_pjax=true")c.url=t.url+(/\?/.test(t.url)?"&":"?")+u;if(t.replace){i.active=true;window.history.replaceState(c,document.title,t.url)}else if(t.push){if(!i.active){window.history.replaceState(e.extend({},c,{url:null}),o);i.active=true}window.history.pushState(c,document.title,t.url)}if((t.replace||t.push)&&window._gaq)_gaq.push(["_trackPageview"]);var d=window.location.hash.toString();if(d!==""){window.location.href=d}a.apply(this,arguments)};var s=i.xhr;if(s&&s.readyState<4){s.onreadystatechange=e.noop;s.abort()}i.options=t;i.xhr=e.ajax(t);e(document).trigger("pjax",[i.xhr,t]);return i.xhr};function n(t,i){if(t&&i)i.container=t;else if(e.isPlainObject(t))i=t;else i={container:t};if(i.container)i.container=r(i.container);return i}function r(t){t=e(t);if(!t.length){throw"no pjax container for "+t.selector}else if(t.selector!==""&&t.context===document){return t}else if(t.attr("id")){return e("#"+t.attr("id"))}else{throw"cant get selector for pjax container!"}}var a=null;i.defaults={timeout:650,push:true,replace:false,data:{_pjax:true},type:"GET",dataType:"html",beforeSend:function(t,n){var r=this;if(n.async&&n.timeout>0){a=setTimeout(function(){var n=e.Event("pjax:timeout");r.trigger(n,[t,i.options]);if(n.result!==false)t.abort("timeout")},n.timeout);n.timeout=0}this.trigger("pjax:start",[t,i.options]);this.trigger("start.pjax",[t,i.options]);t.setRequestHeader("X-PJAX","true")},error:function(e,t,n){if(t!=="abort")window.location=i.options.url},complete:function(e){if(a)clearTimeout(a);this.trigger("pjax:end",[e,i.options]);this.trigger("end.pjax",[e,i.options])}};i.click=t;var s="state"in window.history,o=location.href;e(window).bind("popstate",function(t){var i=!s&&location.href==o;s=true;if(i)return;var n=t.state;if(n&&n.pjax){var r=n.pjax;if(e(r+"").length)e.pjax({url:n.url||location.href,fragment:n.fragment,container:r,push:false,timeout:n.timeout});else window.location=location.href}});if(e.inArray("state",e.event.props)<0)e.event.props.push("state");e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);if(!e.support.pjax){e.pjax=function(t){window.location=e.isFunction(t.url)?t.url():t.url};e.pjax.click=e.noop;e.fn.pjax=function(){return this}}})(jQuery);(function(){var e=$("#footer"),t=$("#page"),i=$(window);function n(){e.toggleClass("sticky",i.height()-e.outerHeight()>t.outerHeight())}n();i.resize(_.debounce(n,200))})();$(document).ready(function(){$(window).trigger("resize")});z.keys={SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,ENTER:13,PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,HOME:36,END:35,COMMAND:91,WINDOWS_RIGHT:92,COMMAND_RIGHT:93,WINDOWS_LEFT_OPERA:219,WINDOWS_RIGHT_OPERA:220,APPLE:24};(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){e.ui=e.ui||{};e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});e.fn.extend({scrollParent:function(t){var i=this.css("position"),n=i==="absolute",r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);if(n&&t.css("position")==="static"){return false}return r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!a.length?e(this[0].ownerDocument||document):a},uniqueId:function(){var e=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++e}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}})}});function t(t,n){var r,a,s,o=t.nodeName.toLowerCase();if("area"===o){r=t.parentNode;a=r.name;if(!t.href||!a||r.nodeName.toLowerCase()!=="map"){return false}s=e("img[usemap='#"+a+"']")[0];return!!s&&i(s)}return(/^(input|select|textarea|button|object)$/.test(o)?!t.disabled:"a"===o?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),r=isNaN(n);return(r||n>=0)&&t(i,!r)}});if(!e("<a>").outerWidth(1).jquery){e.each(["Width","Height"],function(t,i){var n=i==="Width"?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function s(t,i,r,a){e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0;if(r){i-=parseFloat(e.css(t,"border"+this+"Width"))||0}if(a){i-=parseFloat(e.css(t,"margin"+this))||0}});return i}e.fn["inner"+i]=function(t){if(t===undefined){return a["inner"+i].call(this)}return this.each(function(){e(this).css(r,s(this,t)+"px")})};e.fn["outer"+i]=function(t,n){if(typeof t!=="number"){return a["outer"+i].call(this,t)}return this.each(function(){e(this).css(r,s(this,t,true,n)+"px")})}})}if(!e.fn.addBack){e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}if(e("<a>").data("a-b","a").removeData("a-b").data("a-b")){e.fn.removeData=function(t){return function(i){if(arguments.length){return t.call(this,e.camelCase(i))}else{return t.call(this)}}}(e.fn.removeData)}e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());e.fn.extend({focus:function(t){return function(i,n){return typeof i==="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus();if(n){n.call(t)}},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined){return this.css("zIndex",t)}if(this.length){var i=e(this[0]),n,r;while(i.length&&i[0]!==document){n=i.css("position");if(n==="absolute"||n==="relative"||n==="fixed"){r=parseInt(i.css("zIndex"),10);if(!isNaN(r)&&r!==0){return r}}i=i.parent()}}return 0}});e.ui.plugin={add:function(t,i,n){var r,a=e.ui[t].prototype;for(r in n){a.plugins[r]=a.plugins[r]||[];a.plugins[r].push([i,n[r]])}},call:function(e,t,i,n){var r,a=e.plugins[t];if(!a){return}if(!n&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)){return}for(r=0;r<a.length;r++){if(e.options[a[r][0]]){a[r][1].apply(e.element,i)}}}}});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){(function(){e.ui=e.ui||{};var t,i,n=Math.max,r=Math.abs,a=Math.round,s=/left|center|right/,o=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=e.fn.position;function h(e,t,i){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?i/100:1)]}function f(t,i){return parseInt(e.css(t,i),10)||0}function p(t){var i=t[0];if(i.nodeType===9){return{width:t.width(),height:t.height(),offset:{top:0,left:0}}}if(e.isWindow(i)){return{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}}if(i.preventDefault){return{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}}return{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(t!==undefined){return t}var i,n,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];e("body").append(r);i=a.offsetWidth;r.css("overflow","scroll");n=a.offsetWidth;if(i===n){n=r[0].clientWidth}r.remove();return t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,a=n==="scroll"||n==="auto"&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),r=!!i[0]&&i[0].nodeType===9;return{element:i,isWindow:n,isDocument:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||r?i.width():i.outerWidth(),height:n||r?i.height():i.outerHeight()}}};e.fn.position=function(t){if(!t||!t.of){return d.apply(this,arguments)}t=e.extend({},t);var u,m,g,v,b,y,_=e(t.of),w=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(w),k=(t.collision||"flip").split(" "),$={};y=p(_);if(_[0].preventDefault){t.at="left top"}m=y.width;g=y.height;v=y.offset;b=e.extend({},v);e.each(["my","at"],function(){var e=(t[this]||"").split(" "),i,n;if(e.length===1){e=s.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]}e[0]=s.test(e[0])?e[0]:"center";e[1]=o.test(e[1])?e[1]:"center";i=l.exec(e[0]);n=l.exec(e[1]);$[this]=[i?i[0]:0,n?n[0]:0];t[this]=[c.exec(e[0])[0],c.exec(e[1])[0]]});if(k.length===1){k[1]=k[0]}if(t.at[0]==="right"){b.left+=m}else if(t.at[0]==="center"){b.left+=m/2}if(t.at[1]==="bottom"){b.top+=g}else if(t.at[1]==="center"){b.top+=g/2}u=h($.at,m,g);b.left+=u[0];b.top+=u[1];return this.each(function(){var s,o,l=e(this),c=l.outerWidth(),d=l.outerHeight(),p=f(this,"marginLeft"),y=f(this,"marginTop"),C=c+p+f(this,"marginRight")+x.width,D=d+y+f(this,"marginBottom")+x.height,I=e.extend({},b),P=h($.my,l.outerWidth(),l.outerHeight());if(t.my[0]==="right"){I.left-=c}else if(t.my[0]==="center"){I.left-=c/2}if(t.my[1]==="bottom"){I.top-=d}else if(t.my[1]==="center"){I.top-=d/2}I.left+=P[0];I.top+=P[1];if(!i){I.left=a(I.left);I.top=a(I.top)}s={marginLeft:p,marginTop:y};e.each(["left","top"],function(i,n){if(e.ui.position[k[i]]){e.ui.position[k[i]][n](I,{targetWidth:m,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:s,collisionWidth:C,collisionHeight:D,offset:[u[0]+P[0],u[1]+P[1]],my:t.my,at:t.at,within:w,elem:l})}});if(t.using){o=function(e){var i=v.left-I.left,a=i+m-c,s=v.top-I.top,o=s+g-d,u={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:l,left:I.left,top:I.top,width:c,height:d},horizontal:a<0?"left":i>0?"right":"center",vertical:o<0?"top":s>0?"bottom":"middle"};if(m<c&&r(i+a)<m){u.horizontal="center"}if(g<d&&r(s+o)<g){u.vertical="middle"}if(n(r(i),r(a))>n(r(s),r(o))){u.important="horizontal"}else{u.important="vertical"}t.using.call(this,e,u)}}l.offset(e.extend(I,{using:o}))})};e.ui.position={fit:{left:function(e,t){var i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=e.left-t.collisionPosition.marginLeft,o=r-s,l=s+t.collisionWidth-a-r,c;if(t.collisionWidth>a){if(o>0&&l<=0){c=e.left+o+t.collisionWidth-a-r;e.left+=o-c}else if(l>0&&o<=0){e.left=r}else{if(o>l){e.left=r+a-t.collisionWidth}else{e.left=r}}}else if(o>0){e.left+=o}else if(l>0){e.left-=l}else{e.left=n(e.left-s,e.left)}},top:function(e,t){var i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,o=r-s,l=s+t.collisionHeight-a-r,c;if(t.collisionHeight>a){if(o>0&&l<=0){c=e.top+o+t.collisionHeight-a-r;e.top+=o-c}else if(l>0&&o<=0){e.top=r}else{if(o>l){e.top=r+a-t.collisionHeight}else{e.top=r}}}else if(o>0){e.top+=o}else if(l>0){e.top-=l}else{e.top=n(e.top-s,e.top)}}},flip:{left:function(e,t){var i=t.within,n=i.offset.left+i.scrollLeft,a=i.width,s=i.isWindow?i.scrollLeft:i.offset.left,o=e.left-t.collisionPosition.marginLeft,l=o-s,c=o+t.collisionWidth-a-s,u=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,d=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],f,p;if(l<0){f=e.left+u+d+h+t.collisionWidth-a-n;if(f<0||f<r(l)){e.left+=u+d+h}}else if(c>0){p=e.left-t.collisionPosition.marginLeft+u+d+h-s;if(p>0||r(p)<c){e.left+=u+d+h}}},top:function(e,t){var i=t.within,n=i.offset.top+i.scrollTop,a=i.height,s=i.isWindow?i.scrollTop:i.offset.top,o=e.top-t.collisionPosition.marginTop,l=o-s,c=o+t.collisionHeight-a-s,u=t.my[1]==="top",d=u?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,f=-2*t.offset[1],p,m;if(l<0){m=e.top+d+h+f+t.collisionHeight-a-n;if(m<0||m<r(l)){e.top+=d+h+f}}else if(c>0){p=e.top-t.collisionPosition.marginTop+d+h+f-s;if(p>0||r(p)<c){e.top+=d+h+f}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var t,n,r,a,s,o=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(o){e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"})}for(s in r){t.style[s]=r[s]}t.appendChild(l);n=o||document.documentElement;n.insertBefore(t,n.firstChild);l.style.cssText="position: absolute; left: 10.7432222px;";a=e(l).offset().left;i=a>10&&a<11;t.innerHTML="";n.removeChild(t)})()})();return e.ui.position});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,r,a;for(a=0;(r=i[a])!=null;a++){try{n=e._data(r,"events");if(n&&n.remove){e(r).triggerHandler("remove")}}catch(e){}}t(i)}}(e.cleanData);e.widget=function(t,i,n){var r,a,s,o,l={},c=t.split(".")[0];t=t.split(".")[1];r=c+"-"+t;if(!n){n=i;i=e.Widget}e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)};e[c]=e[c]||{};a=e[c][t];s=e[c][t]=function(e,t){if(!this._createWidget){return new s(e,t)}if(arguments.length){this._createWidget(e,t)}};e.extend(s,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]});o=new i;o.options=e.widget.extend({},o.options);e.each(n,function(t,n){if(!e.isFunction(n)){l[t]=n;return}l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t=this._super,i=this._superApply,a;this._super=e;this._superApply=r;a=n.apply(this,arguments);this._super=t;this._superApply=i;return a}}()});s.prototype=e.widget.extend(o,{widgetEventPrefix:a?o.widgetEventPrefix||t:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r});if(a){e.each(a._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)});delete a._childConstructors}else{i._childConstructors.push(s)}e.widget.bridge(t,s);return s};e.widget.extend=function(t){var n=i.call(arguments,1),r=0,a=n.length,s,o;for(;r<a;r++){for(s in n[r]){o=n[r][s];if(n[r].hasOwnProperty(s)&&o!==undefined){if(e.isPlainObject(o)){t[s]=e.isPlainObject(t[s])?e.widget.extend({},t[s],o):e.widget.extend({},o)}else{t[s]=o}}}}return t};e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(a){var s=typeof a==="string",o=i.call(arguments,1),l=this;if(s){this.each(function(){var i,n=e.data(this,r);if(a==="instance"){l=n;return false}if(!n){return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+a+"'")}if(!e.isFunction(n[a])||a.charAt(0)==="_"){return e.error("no such method '"+a+"' for "+t+" widget instance")}i=n[a].apply(n,o);if(i!==n&&i!==undefined){l=i&&i.jquery?l.pushStack(i.get()):i;return false}})}else{if(o.length){a=e.widget.extend.apply(null,[a].concat(o))}this.each(function(){var t=e.data(this,r);if(t){t.option(a||{});if(t._init){t._init()}}else{e.data(this,r,new n(a,this))}})}return l}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0];this.element=e(n);this.uuid=t++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();if(n!==this){e.data(n,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){if(e.target===n){this.destroy()}}});this.document=e(n.style?n.ownerDocument:n.document||n);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),i);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n=t,r,a,s;if(arguments.length===0){return e.widget.extend({},this.options)}if(typeof t==="string"){n={};r=t.split(".");t=r.shift();if(r.length){a=n[t]=e.widget.extend({},this.options[t]);for(s=0;s<r.length-1;s++){a[r[s]]=a[r[s]]||{};a=a[r[s]]}t=r.pop();if(arguments.length===1){return a[t]===undefined?null:a[t]}a[t]=i}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}n[t]=i}}this._setOptions(n);return this},_setOptions:function(e){var t;for(t in e){this._setOption(t,e[t])}return this},_setOption:function(e,t){this.options[e]=t;if(e==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!t);if(t){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(t,i,n){var r,a=this;if(typeof t!=="boolean"){n=i;i=t;t=false}if(!n){n=i;i=this.element;r=this.widget()}else{i=r=e(i);this.bindings=this.bindings.add(i)}e.each(n,function(n,s){function o(){if(!t&&(a.options.disabled===true||e(this).hasClass("ui-state-disabled"))){return}return(typeof s==="string"?a[s]:s).apply(a,arguments)}if(typeof s!=="string"){o.guid=s.guid=s.guid||o.guid||e.guid++}var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];if(u){r.delegate(u,c,o)}else{i.bind(c,o)}})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return(typeof e==="string"?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,s=this.options[t];n=n||{};i=e.Event(i);i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();i.target=this.element[0];a=i.originalEvent;if(a){for(r in a){if(!(r in i)){i[r]=a[r]}}}this.element.trigger(i,n);return!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===false||i.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){if(typeof r==="string"){r={effect:r}}var s,o=!r?t:r===true||typeof r==="number"?i:r.effect||i;r=r||{};if(typeof r==="number"){r={duration:r}}s=!e.isEmptyObject(r);r.complete=a;if(r.delay){n.delay(r.delay)}if(s&&e.effects&&e.effects.effect[o]){n[t](r)}else if(o!==t&&n[o]){n[o](r.duration,r.easing,a)}else{n.queue(function(i){e(this)[t]();if(a){a.call(n[0])}i()})}}});return e.widget});(function(e){if(typeof define==="function"&&define.amd){define(["jquery","./widget"],e)}else{e(jQuery)}})(function(e){var t=false;e(document).mouseup(function(){t=false});return e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(true===e.data(i.target,t.widgetName+".preventClickEvent")){e.removeData(i.target,t.widgetName+".preventClickEvent");i.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(i){if(t){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var n=this,r=i.which===1,a=typeof this.options.cancel==="string"&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:false;if(!r||a||!this._mouseCapture(i)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(i)&&this._mouseDelayMet(i)){this._mouseStarted=this._mouseStart(i)!==false;if(!this._mouseStarted){i.preventDefault();return true}}if(true===e.data(i.target,this.widgetName+".preventClickEvent")){e.removeData(i.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(e){return n._mouseMove(e)};this._mouseUpDelegate=function(e){return n._mouseUp(e)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);i.preventDefault();t=true;return true},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button){return this._mouseUp(t)}else if(!t.which){return this._mouseUp(t)}}if(t.which||t.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==false;this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function(i){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(i.target===this._mouseDownEvent.target){e.data(i.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(i)}t=false;return false},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})});(function(e,t){var i=false;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){if(this.options.disabled){e.preventDefault()}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");if(!i&&n.not(".ui-state-disabled").length){i=true;this.select(t);if(n.has(".ui-menu").length){this.expand(t)}else if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);if(!t){this.focus(e,i)}},blur:function(t){this._delay(function(){if(!e.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(t)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(t){if(!e(t.target).closest(".ui-menu").length){this.collapseAll(t)}i=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);if(t.data("ui-menu-submenu-carat")){t.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,n,r,a,s,o=true;function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(t)}break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=false;n=this.previousFilter||"";r=String.fromCharCode(t.keyCode);a=false;clearTimeout(this.filterTimer);if(r===n){a=true}else{r=n+r}s=new RegExp("^"+l(r),"i");i=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())});i=a&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;if(!i.length){r=String.fromCharCode(t.keyCode);s=new RegExp("^"+l(r),"i");i=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())})}if(i.length){this.focus(t,i);if(i.length>1){this.previousFilter=r;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else{delete this.previousFilter}}else{delete this.previousFilter}}if(o){t.preventDefault()}},_activate:function(e){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(e)}else{this.select(e)}}},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",true);n.attr("aria-haspopup","true").prepend(r);t.attr("aria-labelledby",n.attr("id"))});t=n.add(this.element);t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});t.children(":not(.ui-menu-item)").each(function(){var t=e(this);if(!/[^\-—–\s]/.test(t.text())){t.addClass("ui-widget-content ui-menu-divider")}});t.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!e.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var i,n;this.blur(e,e&&e.type==="focus");this._scrollIntoView(t);this.active=t.first();n=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",n.attr("id"))}this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(e&&e.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}i=t.children(".ui-menu");if(i.length&&/^mouse/.test(e.type)){this._startOpening(i)}this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,a,s,o;if(this._hasScroll()){i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;r=t.offset().top-this.activeMenu.offset().top-i-n;a=this.activeMenu.scrollTop();s=this.activeMenu.height();o=t.height();if(r<0){this.activeMenu.scrollTop(a+r)}else if(r+o>s){this.activeMenu.scrollTop(a+r-s+o)}}},blur:function(e,t){if(!t){clearTimeout(this.timer)}if(!this.active){return}this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(e)},this.delay)},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));if(!n.length){n=this.element}this._close(n);this.blur(t);this.activeMenu=n},this.delay)},_close:function(e){if(!e){e=this.active?this.active.parent():this.element}e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(t&&t.length){this._open(t.parent());this._delay(function(){this.focus(e,t)})}},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;if(this.active){if(e==="first"||e==="last"){n=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{n=this.active[e+"All"](".ui-menu-item").eq(0)}}if(!n||!n.length||!this.active){n=this.activeMenu.children(".ui-menu-item")[t]()}this.focus(i,n)},nextPage:function(t){var i,n,r;if(!this.active){this.next(t);return}if(this.isLastItem()){return}if(this._hasScroll()){n=this.active.offset().top;r=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){i=e(this);return i.offset().top-n-r<0});this.focus(t,i)}else{this.focus(t,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())}},previousPage:function(t){var i,n,r;if(!this.active){this.next(t);return}if(this.isFirstItem()){return}if(this._hasScroll()){n=this.active.offset().top;r=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){i=e(this);return i.offset().top-n+r>0});this.focus(t,i)}else{this.focus(t,this.activeMenu.children(".ui-menu-item").first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(t,true)}this._trigger("select",t,i)}})})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery","./core","./widget","./position","./menu"],e)}else{e(jQuery)}})(function(e){e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,r=this.element[0].nodeName.toLowerCase(),a=r==="textarea",s=r==="input";this.isMultiLine=a?true:s?false:this.element.prop("isContentEditable");this.valueMethod=this.element[a||s?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly")){t=true;n=true;i=true;return}t=false;n=false;i=false;var a=e.ui.keyCode;switch(r.keyCode){case a.PAGE_UP:t=true;this._move("previousPage",r);break;case a.PAGE_DOWN:t=true;this._move("nextPage",r);break;case a.UP:t=true;this._keyEvent("previous",r);break;case a.DOWN:t=true;this._keyEvent("next",r);break;case a.ENTER:if(this.menu.active){t=true;r.preventDefault();this.menu.select(r)}break;case a.TAB:if(this.menu.active){this.menu.select(r)}break;case a.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term)}this.close(r);r.preventDefault()}break;default:i=true;this._searchTimeout(r);break}},keypress:function(n){if(t){t=false;if(!this.isMultiLine||this.menu.element.is(":visible")){n.preventDefault()}return}if(i){return}var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n);break}},input:function(e){if(n){n=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];if(!e(t.target).closest(".ui-menu-item").length){this._delay(function(){var t=this;this.document.one("mousedown",function(n){if(n.target!==t.element[0]&&n.target!==i&&!e.contains(i,n.target)){t.close()}})})}},menufocus:function(t,i){var n,r;if(this.isNewMenu){this.isNewMenu=false;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}r=i.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",t,{item:r})){if(t.originalEvent&&/^key/.test(t.originalEvent.type)){this._value(r.value)}}n=i.item.attr("aria-label")||r.value;if(n&&e.trim(n).length){this.liveRegion.children().hide();e("<div>").text(n).appendTo(this.liveRegion)}},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=n;this._delay(function(){this.previous=n;this.selectedItem=i})}if(false!==this._trigger("select",e,{item:i})){this._value(i.value)}this.term=this._value();this.close(e);this.selectedItem=i}});this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);if(e==="source"){this._initSource()}if(e==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(e==="disabled"&&t&&this.xhr){this.xhr.abort()}},_appendTo:function(){var t=this.options.appendTo;if(t){t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)}if(!t||!t[0]){t=this.element.closest(".ui-front")}if(!t.length){t=this.document[0].body}return t},_initSource:function(){var t,i,n=this;if(e.isArray(this.options.source)){t=this.options.source;this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}}else if(typeof this.options.source==="string"){i=this.options.source;this.source=function(t,r){if(n.xhr){n.xhr.abort()}n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}}else{this.source=this.options.source}},_searchTimeout:function(e){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!i&&!n){this.selectedItem=null;this.search(null,e)}},this.options.delay)},search:function(e,t){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(t)}if(this._trigger("search",t)===false){return}return this._search(e)},_search:function(e){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){if(t===this.requestIndex){this.__response(e)}this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading")}},this)},__response:function(e){if(e){e=this._normalize(e)}this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else{this._close()}},close:function(e){this.cancelSearch=true;this._close(e)},_close:function(e){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){if(this.previous!==this._value()){this._trigger("change",e,{item:this.selectedItem})}},_normalize:function(t){if(t.length&&t[0].label&&t[0].value){return t}return e.map(t,function(t){if(typeof t==="string"){return{label:t,value:t}}return e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=true;this.menu.refresh();i.show();this._resizeMenu();i.position(e.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){if(!this.isMultiLine){this._value(this.term)}this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}}});e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(t&&t.length){i=this.options.messages.results(t.length)}else{i=this.options.messages.noResults}this.liveRegion.children().hide();e("<div>").text(i).appendTo(this.liveRegion)}});return e.ui.autocomplete});(function(e){if(typeof define==="function"&&define.amd){define(["jquery","./core"],e)}else{e(jQuery)}})(function(e){e.extend(e.ui,{datepicker:{version:"1.11.4"}});var t;function i(e){var t,i;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){i=parseInt(e.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}e=e.parent()}return 0}function n(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(true,{},this.regional[""]);this.regional["en-US"]=e.extend(true,{},this.regional.en);this.dpDiv=r(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){s(this._defaults,e||{});return this},_attachDatepicker:function(t,i){var n,r,a;n=t.nodeName.toLowerCase();r=n==="div"||n==="span";if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}a=this._newInst(e(t),r);a.settings=e.extend({},i||{});if(n==="input"){this._connectDatepicker(t,a)}else if(r){this._inlineDatepicker(t,a)}},_newInst:function(t,i){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:!i?this.dpDiv:r(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]);i.trigger=e([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,i);n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(i);e.data(t,"datepicker",i);if(i.settings.disabled){this._disableDatepicker(t)}},_attachments:function(t,i){var n,r,a,s=this._get(i,"appendText"),o=this._get(i,"isRTL");if(i.append){i.append.remove()}if(s){i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>");t[o?"before":"after"](i.append)}t.unbind("focus",this._showDatepicker);if(i.trigger){i.trigger.remove()}n=this._get(i,"showOn");if(n==="focus"||n==="both"){t.focus(this._showDatepicker)}if(n==="button"||n==="both"){r=this._get(i,"buttonText");a=this._get(i,"buttonImage");i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(!a?r:e("<img/>").attr({src:a,alt:r,title:r})));t[o?"before":"after"](i.trigger);i.trigger.click(function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]){e.datepicker._hideDatepicker()}else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else{e.datepicker._showDatepicker(t[0])}return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,a=new Date(2009,12-1,20),s=this._get(e,"dateFormat");if(s.match(/[DM]/)){t=function(e){i=0;n=0;for(r=0;r<e.length;r++){if(e[r].length>i){i=e[r].length;n=r}}return n};a.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort")));a.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())}e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var n=e(t);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(i.dpDiv);e.data(t,"datepicker",i);this._setDate(i,this._getDefaultDate(i),true);this._updateDatepicker(i);this._updateAlternate(i);if(i.settings.disabled){this._disableDatepicker(t)}i.dpDiv.css("display","block")},_dialogDatepicker:function(t,i,n,r,a){var o,l,c,u,d,h=this._dialogInst;if(!h){this.uuid+=1;o="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);e("body").append(this._dialogInput);h=this._dialogInst=this._newInst(this._dialogInput,false);h.settings={};e.data(this._dialogInput[0],"datepicker",h)}s(h.settings,r||{});i=i&&i.constructor===Date?this._formatDate(h,i):i;this._dialogInput.val(i);this._pos=a?a.length?a:[a.pageX,a.pageY]:null;if(!this._pos){l=document.documentElement.clientWidth;c=document.documentElement.clientHeight;u=document.documentElement.scrollLeft||document.body.scrollLeft;d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[l/2-100+u,c/2-150+d]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");h.settings.onSelect=n;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if(e.blockUI){e.blockUI(this.dpDiv)}e.data(this._dialogInput[0],"datepicker",h);return this},_destroyDatepicker:function(i){var n,r=e(i),a=e.data(i,"datepicker");if(!r.hasClass(this.markerClassName)){return}n=i.nodeName.toLowerCase();e.removeData(i,"datepicker");if(n==="input"){a.append.remove();a.trigger.remove();r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(n==="div"||n==="span"){r.removeClass(this.markerClassName).empty()}if(t===a){t=null}},_enableDatepicker:function(t){var i,n,r=e(t),a=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=false;a.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(i==="div"||i==="span"){n=r.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var i,n,r=e(t),a=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName)){return}i=t.nodeName.toLowerCase();if(i==="input"){t.disabled=true;a.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({
opacity:"0.5",cursor:"default"})}else if(i==="div"||i==="span"){n=r.children("."+this._inlineClass);n.children().addClass("ui-state-disabled");n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e){return false}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]===e){return true}}return false},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var r,a,o,l,c=this._getInst(t);if(arguments.length===2&&typeof i==="string"){return i==="defaults"?e.extend({},e.datepicker._defaults):c?i==="all"?e.extend({},c.settings):this._get(c,i):null}r=i||{};if(typeof i==="string"){r={};r[i]=n}if(c){if(this._curInst===c){this._hideDatepicker()}a=this._getDateDatepicker(t,true);o=this._getMinMaxDate(c,"min");l=this._getMinMaxDate(c,"max");s(c.settings,r);if(o!==null&&r.dateFormat!==undefined&&r.minDate===undefined){c.settings.minDate=this._formatDate(c,o)}if(l!==null&&r.dateFormat!==undefined&&r.maxDate===undefined){c.settings.maxDate=this._formatDate(c,l)}if("disabled"in r){if(r.disabled){this._disableDatepicker(t)}else{this._enableDatepicker(t)}}this._attachments(e(t),c);this._autoSize(c);this._setDate(c,a);this._updateAlternate(c);this._updateDatepicker(c)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);if(t){this._updateDatepicker(t)}},_setDateDatepicker:function(e,t){var i=this._getInst(e);if(i){this._setDate(i,t);this._updateDatepicker(i);this._updateAlternate(i)}},_getDateDatepicker:function(e,t){var i=this._getInst(e);if(i&&!i.inline){this._setDateFromField(i,t)}return i?this._getDate(i):null},_doKeyDown:function(t){var i,n,r,a=e.datepicker._getInst(t.target),s=true,o=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=true;if(e.datepicker._datepickerShowing){switch(t.keyCode){case 9:e.datepicker._hideDatepicker();s=false;break;case 13:r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv);if(r[0]){e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,r[0])}i=e.datepicker._get(a,"onSelect");if(i){n=e.datepicker._formatDate(a);i.apply(a.input?a.input[0]:null,[n,a])}else{e.datepicker._hideDatepicker()}return false;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:if(t.ctrlKey||t.metaKey){e.datepicker._clearDate(t.target)}s=t.ctrlKey||t.metaKey;break;case 36:if(t.ctrlKey||t.metaKey){e.datepicker._gotoToday(t.target)}s=t.ctrlKey||t.metaKey;break;case 37:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,o?+1:-1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M")}break;case 38:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,-7,"D")}s=t.ctrlKey||t.metaKey;break;case 39:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,o?-1:+1,"D")}s=t.ctrlKey||t.metaKey;if(t.originalEvent.altKey){e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M")}break;case 40:if(t.ctrlKey||t.metaKey){e.datepicker._adjustDate(t.target,+7,"D")}s=t.ctrlKey||t.metaKey;break;default:s=false}}else if(t.keyCode===36&&t.ctrlKey){e.datepicker._showDatepicker(this)}else{s=false}if(s){t.preventDefault();t.stopPropagation()}},_doKeyPress:function(t){var i,n,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput")){i=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat"));n=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||(n<" "||!i||i.indexOf(n)>-1)}},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal){try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n));if(i){e.datepicker._setDateFromField(n);e.datepicker._updateAlternate(n);e.datepicker._updateDatepicker(n)}}catch(e){}}return true},_showDatepicker:function(t){t=t.target||t;if(t.nodeName.toLowerCase()!=="input"){t=e("input",t.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t){return}var n,r,a,o,l,c,u;n=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==n){e.datepicker._curInst.dpDiv.stop(true,true);if(n&&e.datepicker._datepickerShowing){e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}}r=e.datepicker._get(n,"beforeShow");a=r?r.apply(t,[t,n]):{};if(a===false){return}s(n.settings,a);n.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(n);if(e.datepicker._inDialog){t.value=""}if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}o=false;e(t).parents().each(function(){o|=e(this).css("position")==="fixed";return!o});l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;n.dpDiv.empty();n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(n);l=e.datepicker._checkOffset(n,l,o);n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"});if(!n.inline){c=e.datepicker._get(n,"showAnim");u=e.datepicker._get(n,"duration");n.dpDiv.css("z-index",i(e(t))+1);e.datepicker._datepickerShowing=true;if(e.effects&&e.effects.effect[c]){n.dpDiv.show(c,e.datepicker._get(n,"showOptions"),u)}else{n.dpDiv[c||"show"](c?u:null)}if(e.datepicker._shouldFocusInput(n)){n.input.focus()}e.datepicker._curInst=n}},_updateDatepicker:function(i){this.maxRows=4;t=i;i.dpDiv.empty().append(this._generateHTML(i));this._attachHandlers(i);var n,r=this._getNumberOfMonths(i),s=r[1],o=17,l=i.dpDiv.find("."+this._dayOverClass+" a");if(l.length>0){a.apply(l.get(0))}i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(s>1){i.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em")}i.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(i===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(i)){i.input.focus()}if(i.yearshtml){n=i.yearshtml;setTimeout(function(){if(n===i.yearshtml&&i.yearshtml){i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml)}n=i.yearshtml=null},0)}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var r=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());i.left-=this._get(t,"isRTL")?r-s:0;i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0;i.top-=n&&i.top===t.input.offset().top+o?e(document).scrollTop():0;i.left-=Math.min(i.left,i.left+r>l&&l>r?Math.abs(i.left+r-l):0);i.top-=Math.min(i.top,i.top+a>c&&c>a?Math.abs(a+o):0);return i},_findPos:function(t){var i,n=this._getInst(t),r=this._get(n,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t))){t=t[r?"previousSibling":"nextSibling"]}i=e(t).offset();return[i.left,i.top]},_hideDatepicker:function(t){var i,n,r,a,s=this._curInst;if(!s||t&&s!==e.data(t,"datepicker")){return}if(this._datepickerShowing){i=this._get(s,"showAnim");n=this._get(s,"duration");r=function(){e.datepicker._tidyDialog(s)};if(e.effects&&(e.effects.effect[i]||e.effects[i])){s.dpDiv.hide(i,e.datepicker._get(s,"showOptions"),n,r)}else{s.dpDiv[i==="slideDown"?"slideUp":i==="fadeIn"?"fadeOut":"hide"](i?n:null,r)}if(!i){r()}this._datepickerShowing=false;a=this._get(s,"onClose");if(a){a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst){return}var i=e(t.target),n=e.datepicker._getInst(i[0]);if(i[0].id!==e.datepicker._mainDivId&&i.parents("#"+e.datepicker._mainDivId).length===0&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n){e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var r=e(t),a=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(a,i+(n==="M"?this._get(a,"showCurrentAtPos"):0),n);this._updateDatepicker(a)},_gotoToday:function(t){var i,n=e(t),r=this._getInst(n[0]);if(this._get(r,"gotoCurrent")&&r.currentDay){r.selectedDay=r.currentDay;r.drawMonth=r.selectedMonth=r.currentMonth;r.drawYear=r.selectedYear=r.currentYear}else{i=new Date;r.selectedDay=i.getDate();r.drawMonth=r.selectedMonth=i.getMonth();r.drawYear=r.selectedYear=i.getFullYear()}this._notifyChange(r);this._adjustDate(n)},_selectMonthYear:function(t,i,n){var r=e(t),a=this._getInst(r[0]);a["selected"+(n==="M"?"Month":"Year")]=a["draw"+(n==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(a);this._adjustDate(r)},_selectDay:function(t,i,n,r){var a,s=e(t);if(e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])){return}a=this._getInst(s[0]);a.selectedDay=a.currentDay=e("a",r).html();a.selectedMonth=a.currentMonth=i;a.selectedYear=a.currentYear=n;this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,r=e(t),a=this._getInst(r[0]);i=i!=null?i:this._formatDate(a);if(a.input){a.input.val(i)}this._updateAlternate(a);n=this._get(a,"onSelect");if(n){n.apply(a.input?a.input[0]:null,[i,a])}else if(a.input){a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];if(typeof a.input[0]!=="object"){a.input.focus()}this._lastInput=null}},_updateAlternate:function(t){var i,n,r,a=this._get(t,"altField");if(a){i=this._get(t,"altFormat")||this._get(t,"dateFormat");n=this._getDate(t);r=this.formatDate(i,n,this._getFormatConfig(t));e(a).each(function(){e(this).val(r)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());i.setDate(i.getDate()+4-(i.getDay()||7));t=i.getTime();i.setMonth(0);i.setDate(1);return Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(t==null||i==null){throw"Invalid arguments"}i=typeof i==="object"?i.toString():i+"";if(i===""){return null}var r,a,s,o=0,l=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c=typeof l!=="string"?l:(new Date).getFullYear()%100+parseInt(l,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,h=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,p=-1,m=-1,g=-1,v=-1,b=false,y,_=function(e){var i=r+1<t.length&&t.charAt(r+1)===e;if(i){r++}return i},w=function(e){var t=_(e),n=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,r=e==="y"?n:1,a=new RegExp("^\\d{"+r+","+n+"}"),s=i.substring(o).match(a);if(!s){throw"Missing number at position "+o}o+=s[0].length;return parseInt(s[0],10)},x=function(t,n,r){var a=-1,s=e.map(_(t)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(s,function(e,t){var n=t[1];if(i.substr(o,n.length).toLowerCase()===n.toLowerCase()){a=t[0];o+=n.length;return false}});if(a!==-1){return a+1}else{throw"Unknown name at position "+o}},k=function(){if(i.charAt(o)!==t.charAt(r)){throw"Unexpected literal at position "+o}o++};for(r=0;r<t.length;r++){if(b){if(t.charAt(r)==="'"&&!_("'")){b=false}else{k()}}else{switch(t.charAt(r)){case"d":g=w("d");break;case"D":x("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=x("M",h,f);break;case"y":p=w("y");break;case"@":y=new Date(w("@"));p=y.getFullYear();m=y.getMonth()+1;g=y.getDate();break;case"!":y=new Date((w("!")-this._ticksTo1970)/1e4);p=y.getFullYear();m=y.getMonth()+1;g=y.getDate();break;case"'":if(_("'")){k()}else{b=true}break;default:k()}}}if(o<i.length){s=i.substr(o);if(!/^\s+/.test(s)){throw"Extra/unparsed characters found in date: "+s}}if(p===-1){p=(new Date).getFullYear()}else if(p<100){p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=c?0:-100)}if(v>-1){m=1;g=v;do{a=this._getDaysInMonth(p,m-1);if(g<=a){break}m++;g-=a}while(true)}y=this._daylightSavingAdjust(new Date(p,m-1,g));if(y.getFullYear()!==p||y.getMonth()+1!==m||y.getDate()!==g){throw"Invalid date"}return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(e,t,i){if(!t){return""}var n,r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;if(i){n++}return i},c=function(e,t,i){var n=""+t;if(l(e)){while(n.length<i){n="0"+n}}return n},u=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",h=false;if(t){for(n=0;n<e.length;n++){if(h){if(e.charAt(n)==="'"&&!l("'")){h=false}else{d+=e.charAt(n)}}else{switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),r,a);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),s,o);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=t.getTime()*1e4+this._ticksTo1970;break;case"'":if(l("'")){d+="'"}else{h=true}break;default:d+=e.charAt(n)}}}}return d},_possibleChars:function(e){var t,i="",n=false,r=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;if(n){t++}return n};for(t=0;t<e.length;t++){if(n){if(e.charAt(t)==="'"&&!r("'")){n=false}else{i+=e.charAt(t)}}else{switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":if(r("'")){i+="'"}else{n=true}break;default:i+=e.charAt(t)}}}return i},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal){return}var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),a=r,s=this._getFormatConfig(e);try{a=this.parseDate(i,n,s)||r}catch(e){n=t?"":n}e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();e.currentDay=n?a.getDate():0;e.currentMonth=n?a.getMonth():0;e.currentYear=n?a.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var r=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=n.getFullYear(),a=n.getMonth(),s=n.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=o.exec(i);while(l){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=parseInt(l[1],10)*7;break;case"m":case"M":a+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10);s=Math.min(s,e.datepicker._getDaysInMonth(r,a));break}l=o.exec(i)}return new Date(r,a,s)},s=i==null||i===""?n:typeof i==="string"?a(i):typeof i==="number"?isNaN(i)?n:r(i):new Date(i.getTime());s=s&&s.toString()==="Invalid Date"?n:s;if(s){s.setHours(0);s.setMinutes(0);s.setSeconds(0);s.setMilliseconds(0)}return this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){if(!e){return null}e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,a=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth();e.drawYear=e.selectedYear=e.currentYear=s.getFullYear();if((r!==e.selectedMonth||a!==e.selectedYear)&&!i){this._notifyChange(e)}this._adjustInstDate(e);if(e.input){e.input.val(n?"":this._formatDate(e))}},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){e.datepicker._selectMonthYear(n,this,"M");return false},selectYear:function(){e.datepicker._selectMonthYear(n,this,"Y");return false}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,a,s,o,l,c,u,d,h,f,p,m,g,v,b,y,_,w,x,k,$,C,D,I,P,M,T,S,j,A,N,E,z,O,F,W,H=new Date,R=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),L=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),Y=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),B=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),G=B[0]!==1||B[1]!==1,Q=this._daylightSavingAdjust(!e.currentDay?new Date(9999,9,9):new Date(e.currentYear,e.currentMonth,e.currentDay)),J=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,ee=e.drawYear;if(Z<0){Z+=12;ee--}if(X){t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-B[0]*B[1]+1,X.getDate()));t=J&&t<J?J:t;while(this._daylightSavingAdjust(new Date(ee,Z,1))>t){Z--;if(Z<0){Z=11;ee--}}}e.drawMonth=Z;e.drawYear=ee;i=this._get(e,"prevText");i=!U?i:this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e));n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>":Y?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>";r=this._get(e,"nextText");r=!U?r:this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e));a=this._canAdjustMonth(e,+1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+r+"</span></a>":Y?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+r+"</span></a>";s=this._get(e,"currentText");o=this._get(e,"gotoCurrent")&&e.currentDay?Q:R;s=!U?s:this.formatDate(s,o,this._getFormatConfig(e));l=!e.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>":"";c=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(L?l:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+s+"</button>":"")+(L?"":l)+"</div>":"";u=parseInt(this._get(e,"firstDay"),10);u=isNaN(u)?0:u;d=this._get(e,"showWeek");h=this._get(e,"dayNames");f=this._get(e,"dayNamesMin");p=this._get(e,"monthNames");m=this._get(e,"monthNamesShort");g=this._get(e,"beforeShowDay");v=this._get(e,"showOtherMonths");b=this._get(e,"selectOtherMonths");y=this._getDefaultDate(e);_="";w;for(x=0;x<B[0];x++){k="";this.maxRows=4;for($=0;$<B[1];$++){C=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay));D=" ui-corner-all";I="";if(G){I+="<div class='ui-datepicker-group";if(B[1]>1){switch($){case 0:I+=" ui-datepicker-group-first";D=" ui-corner-"+(L?"right":"left");break;case B[1]-1:I+=" ui-datepicker-group-last";D=" ui-corner-"+(L?"left":"right");break;default:I+=" ui-datepicker-group-middle";D="";break}}I+="'>"}I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&x===0?L?a:n:"")+(/all|right/.test(D)&&x===0?L?n:a:"")+this._generateMonthYearHeader(e,Z,ee,J,X,x>0||$>0,p,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";P=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(w=0;w<7;w++){M=(w+u)%7;P+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[M]+"'>"+f[M]+"</span></th>"}I+=P+"</tr></thead><tbody>";T=this._getDaysInMonth(ee,Z);if(ee===e.selectedYear&&Z===e.selectedMonth){e.selectedDay=Math.min(e.selectedDay,T)}S=(this._getFirstDayOfMonth(ee,Z)-u+7)%7;j=Math.ceil((S+T)/7);A=G?this.maxRows>j?this.maxRows:j:j;this.maxRows=A;N=this._daylightSavingAdjust(new Date(ee,Z,1-S));for(E=0;E<A;E++){I+="<tr>";z=!d?"":"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>";for(w=0;w<7;w++){O=g?g.apply(e.input?e.input[0]:null,[N]):[true,""];F=N.getMonth()!==Z;W=F&&!b||!O[0]||J&&N<J||X&&N>X;z+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(N.getTime()===C.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===N.getTime()&&y.getTime()===C.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+O[1]+(N.getTime()===Q.getTime()?" "+this._currentClass:"")+(N.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||v)&&O[2]?" title='"+O[2].replace(/'/g,"&#39;")+"'":"")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===R.getTime()?" ui-state-highlight":"")+(N.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>";N.setDate(N.getDate()+1);N=this._daylightSavingAdjust(N)}I+=z+"</tr>"}Z++;if(Z>11){Z=0;ee++}I+="</tbody></table>"+(G?"</div>"+(B[0]>0&&$===B[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");k+=I}_+=k}_+=c;e._keyEvent=false;return _},_generateMonthYearHeader:function(e,t,i,n,r,a,s,o){var l,c,u,d,h,f,p,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",_="";if(a||!g){_+="<span class='ui-datepicker-month'>"+s[t]+"</span>"}else{l=n&&n.getFullYear()===i;c=r&&r.getFullYear()===i;_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(u=0;u<12;u++){if((!l||u>=n.getMonth())&&(!c||u<=r.getMonth())){_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+o[u]+"</option>"}}_+="</select>"}if(!b){y+=_+(a||!(g&&v)?"&#xa0;":"")}if(!e.yearshtml){e.yearshtml="";if(a||!v){y+="<span class='ui-datepicker-year'>"+i+"</span>"}else{d=this._get(e,"yearRange").split(":");h=(new Date).getFullYear();f=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t};p=f(d[0]);m=Math.max(p,f(d[1]||""));p=n?Math.max(p,n.getFullYear()):p;m=r?Math.min(m,r.getFullYear()):m;e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;p<=m;p++){e.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>"}e.yearshtml+="</select>";y+=e.yearshtml;e.yearshtml=null}}y+=this._get(e,"yearSuffix");if(b){y+=(a||!(g&&v)?"&#xa0;":"")+_}y+="</div>";return y},_adjustInstDate:function(e,t,i){var n=e.drawYear+(i==="Y"?t:0),r=e.drawMonth+(i==="M"?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+(i==="D"?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,a)));e.selectedDay=s.getDate();e.drawMonth=e.selectedMonth=s.getMonth();e.drawYear=e.selectedYear=s.getFullYear();if(i==="M"||i==="Y"){this._notifyChange(e)}},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");if(t){t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])}},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t==="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));if(t<0){a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth()))}return this._isInRange(e,a)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=null,o=null,l=this._get(e,"yearRange");if(l){i=l.split(":");n=(new Date).getFullYear();s=parseInt(i[0],10);o=parseInt(i[1],10);if(i[0].match(/[+\-].*/)){s+=n}if(i[1].match(/[+\-].*/)){o+=n}}return(!r||t.getTime()>=r.getTime())&&(!a||t.getTime()<=a.getTime())&&(!s||t.getFullYear()>=s)&&(!o||t.getFullYear()<=o)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t=typeof t!=="string"?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var r=t?typeof t==="object"?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}});function r(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).removeClass("ui-datepicker-next-hover")}}).delegate(i,"mouseover",a)}function a(){if(!e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){e(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){e(this).addClass("ui-datepicker-next-hover")}}}function s(t,i){e.extend(t,i);for(var n in i){if(i[n]==null){t[n]=i[n]}}return t}e.fn.datepicker=function(t){if(!this.length){return this}if(!e.datepicker.initialized){e(document).mousedown(e.datepicker._checkExternalClick);e.datepicker.initialized=true}if(e("#"+e.datepicker._mainDivId).length===0){e("body").append(e.datepicker.dpDiv)}var i=Array.prototype.slice.call(arguments,1);if(typeof t==="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}if(t==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))}return this.each(function(){typeof t==="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)})};e.datepicker=new n;e.datepicker.initialized=false;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.11.4";return e.datepicker});(function(e){if(typeof define==="function"&&define.amd){define(["jquery","./core","./mouse","./widget"],e)}else{e(jQuery)}})(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);if(e==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(t,i){var n=null,r=false,a=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a){n=e(this);return false}});if(e.data(t.target,a.widgetName+"-item")===a){n=e(t.target)}if(!n){return false}if(this.options.handle&&!i){e(this.options.handle,n).find("*").addBack().each(function(){if(this===t.target){r=true}});if(!r){return false}}this.currentItem=n;this._removeCurrentsFromItems();return true},_mouseStart:function(t,i,n){var r,a,s=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,
top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(s.containment){this._setContainment()}if(s.cursor&&s.cursor!=="auto"){a=this.document.find("body");this.storedCursor=a.css("cursor");a.css("cursor",s.cursor);this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(a)}if(s.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",s.opacity)}if(s.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",s.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!n){for(r=this.containers.length-1;r>=0;r--){this.containers[r]._trigger("activate",t,this._uiHash(this))}}if(e.ui.ddmanager){e.ui.ddmanager.current=this}if(e.ui.ddmanager&&!s.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(t);return true},_mouseDrag:function(t){var i,n,r,a,s=this.options,o=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity){this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+s.scrollSpeed}else if(t.pageY-this.overflowOffset.top<s.scrollSensitivity){this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-s.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity){this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+s.scrollSpeed}else if(t.pageX-this.overflowOffset.left<s.scrollSensitivity){this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-s.scrollSpeed}}else{if(t.pageY-this.document.scrollTop()<s.scrollSensitivity){o=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed)}else if(this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity){o=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)}if(t.pageX-this.document.scrollLeft()<s.scrollSensitivity){o=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed)}else if(this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity){o=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed)}}if(o!==false&&e.ui.ddmanager&&!s.dropBehaviour){e.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(i=this.items.length-1;i>=0;i--){n=this.items[i];r=n.item[0];a=this._intersectsWithPointer(n);if(!a){continue}if(n.instance!==this.currentContainer){continue}if(r!==this.currentItem[0]&&this.placeholder[a===1?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],r):true)){this.direction=a===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(t,n)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(e.ui.ddmanager){e.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,i){if(!t){return}if(e.ui.ddmanager&&!this.options.dropBehaviour){e.ui.ddmanager.drop(this,t)}if(this.options.revert){var n=this,r=this.placeholder.offset(),a=this.options.axis,s={};if(!a||a==="x"){s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!a||a==="y"){s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else{this._clear(t,i)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}e.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){e(this.domPosition.prev).after(this.currentItem)}else{e(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);if(i){n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}});if(!n.length&&t.key){n.push(t.key+"=")}return n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];t=t||{};i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")});return n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,a=e.left,s=a+e.width,o=e.top,l=o+e.height,c=this.offset.click.top,u=this.offset.click.left,d=this.options.axis==="x"||n+c>o&&n+c<l,h=this.options.axis==="y"||t+u>a&&t+u<s,f=d&&h;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]){return f}else{return a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&o<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l}},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();if(!n){return false}return this.floating?a&&a==="right"||r==="down"?2:1:r&&(r==="down"?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();if(this.floating&&r){return r==="right"&&i||r==="left"&&!i}else{return n&&(n==="down"&&t||n==="up"&&!t)}},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,r,a,s=[],o=[],l=this._connectWith();if(l&&t){for(i=l.length-1;i>=0;i--){r=e(l[i],this.document[0]);for(n=r.length-1;n>=0;n--){a=e.data(r[n],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){o.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}}}o.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function c(){s.push(this)}for(i=o.length-1;i>=0;i--){o[i][0].each(c)}return e(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++){if(t[i]===e.item[0]){return false}}return true})},_refreshItems:function(t){this.items=[];this.containers=[this];var i,n,r,a,s,o,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready){for(i=h.length-1;i>=0;i--){r=e(h[i],this.document[0]);for(n=r.length-1;n>=0;n--){a=e.data(r[n],this.widgetFullName);if(a&&a!==this&&!a.options.disabled){d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]);this.containers.push(a)}}}}for(i=d.length-1;i>=0;i--){s=d[i][1];o=d[i][0];for(n=0,c=o.length;n<c;n++){l=e(o[n]);l.data(this.widgetName+"-item",s);u.push({item:l,instance:s,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var i,n,r,a;for(i=this.items.length-1;i>=0;i--){n=this.items[i];if(n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]){continue}r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;if(!t){n.width=r.outerWidth();n.height=r.outerHeight()}a=r.offset();n.left=a.left;n.top=a.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(i=this.containers.length-1;i>=0;i--){a=this.containers[i].element.offset();this.containers[i].containerCache.left=a.left;this.containers[i].containerCache.top=a.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}}return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;if(!n.placeholder||n.placeholder.constructor===String){i=n.placeholder;n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(n==="tbody"){t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r))}else if(n==="tr"){t._createTrPlaceholder(t.currentItem,r)}else if(n==="img"){r.attr("src",t.currentItem.attr("src"))}if(!i){r.css("visibility","hidden")}return r},update:function(e,r){if(i&&!n.forcePlaceholderSize){return}if(!r.height()){r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10))}if(!r.width()){r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,r,a,s,o,l,c,u,d,h=null,f=null;for(i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0])){continue}if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0])){continue}h=this.containers[i];f=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",t,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!h){return}if(this.containers.length===1){if(!this.containers[f].containerCache.over){this.containers[f]._trigger("over",t,this._uiHash(this));this.containers[f].containerCache.over=1}}else{r=1e4;a=null;u=h.floating||this._isFloating(this.currentItem);s=u?"left":"top";o=u?"width":"height";d=u?"clientX":"clientY";for(n=this.items.length-1;n>=0;n--){if(!e.contains(this.containers[f].element[0],this.items[n].item[0])){continue}if(this.items[n].item[0]===this.currentItem[0]){continue}l=this.items[n].item.offset()[s];c=false;if(t[d]-l>this.items[n][o]/2){c=true}if(Math.abs(t[d]-l)<r){r=Math.abs(t[d]-l);a=this.items[n];this.direction=c?"up":"down"}}if(!a&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[f]){if(!this.currentContainer.containerCache.over){this.containers[f]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}a?this._rearrange(t,a,null,true):this._rearrange(t,null,this.containers[f].element,true);this._trigger("change",t,this._uiHash());this.containers[f]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[f];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",t,this._uiHash(this));this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):i.helper==="clone"?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){e(i.appendTo!=="parent"?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||i.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||i.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(e.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,r=this.options;if(r.containment==="parent"){r.containment=this.helper[0].parentNode}if(r.containment==="document"||r.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,r.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(r.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(r.containment)){t=e(r.containment)[0];i=e(r.containment).offset();n=e(t).css("overflow")!=="hidden";this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){if(!i){i=this.position}var n=t==="absolute"?1:-1,r=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(t){var i,n,r=this.options,a=t.pageX,s=t.pageY,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(o[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){a=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){s=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){a=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){s=this.containment[3]+this.offset.click.top}}if(r.grid){i=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1];s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-r.grid[1]:i+r.grid[1]:i;n=this.originalPageX+Math.round((a-this.originalPageX)/r.grid[0])*r.grid[0];a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:o.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:o.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){if(r===this.counter){this.refreshPositions(!n)}})},_clear:function(e,t){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!t){n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t){n.push(function(e){this._trigger("update",e,this._uiHash())})}if(this!==this.currentContainer){if(!t){n.push(function(e){this._trigger("remove",e,this._uiHash())});n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function r(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(i=this.containers.length-1;i>=0;i--){if(!t){n.push(r("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(r("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!t){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!t){for(i=0;i<n.length;i++){n[i].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(e.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})});var truncate=function(){function e(t,i){var n=t.childNodes;var r="";if(n.length){for(var a=0;a<n.length;a++){r+=e(n[a])}}else{r=_.escape(t.textContent)}if(i){return r.replace(/^\s+|\s+$/g,"")}return r}function t(t,i){i=i||{};if(!i.dir||i.dir!="v")return this;var n=i.showTitle||false;var r=i.dir&&i.dir[0]||"h";var a=r=="h"?"scrollWidth":"scrollHeight";var s=r=="h"?"offsetWidth":"offsetHeight";var o=i.truncText||"&hellip;";var l=i.trim||false;var c=i.textEl||t;var u=[" ",""],d,h;var f,p,m;var g=c.getAttribute("data-oldtext")||e(c,l);c.setAttribute("data-oldtext",g);for(var v=0;v<u.length;v++){m=u[v];f=g.split(m);p=f.length;h=false;if(c.getAttribute("data-oldtext")){c.innerHTML=g}if(t[a]-t[s]<1){t.removeAttribute("data-truncated",null);break}var b=Math.ceil(f.length/2),y=0,_;for(d=0;d<15;d++){c.innerHTML=f.slice(0,p).join(m)+o;_=t[a]-t[s];if(p<1){break}else if(_<2&&b==y){if(r==="h"||m===""&&t.scrollWidth<t.offsetWidth){h=true;t.setAttribute("data-truncated",true);break}}else if(_>1){p-=b}else{p+=b}y=b;b=Math.ceil(b/2)}if(h)break}if(n&&g!=e(c,l)){c.setAttribute("title",g)}}return t}();$.fn.truncate=function(e){this.each(function(){truncate(this,e)});return this};$.fn.untruncate=function(){this.each(function(){var e=$(this),t=e.attr("oldtext");if(t){e.text(t)}});return this};$.fn.lineclamp=function(e){if(!e){return this}return this.each(function(){var t=$(this),i=t.css("line-height");if(typeof i=="string"&&i.substr(-2)=="px"){i=parseFloat(i.replace("px",""));var n=Math.ceil(i)*e,r;if(this.scrollHeight-n>2){t.css({height:n+2,overflow:"hidden","text-overflow":"ellipsis"});t.truncate({dir:"v"})}else{t.css({"max-height":n,overflow:"hidden","text-overflow":"ellipsis"})}}})};$.fn.linefit=function(e){var t=7;e=e||1;return this.each(function(){var i=$(this),n=parseFloat(i.css("font-size").replace("px","")),r=Math.ceil(parseFloat(i.css("line-height").replace("px","")))*e,a=i.height();while(a>r&&n>t){n-=.5;i.css("font-size",n);a=i.height()}})};function objEqual(e,t){return JSON.stringify(e)==JSON.stringify(t)}z._AjaxCache={};z.AjaxCache=function(){return function(e){if(z._AjaxCache[e]===undefined){z._AjaxCache[e]={previous:{args:"",data:""},items:{}}}return z._AjaxCache[e]}}();(function(e){e.ajaxCache=function(t){t=e.extend({url:"",type:"get",data:{},newItems:e.noop,cacheSuccess:e.noop,ajaxSuccess:e.noop,ajaxFailure:e.noop},t);if(!z.capabilities.JSON||parseFloat(jQuery.fn.jquery)<1.5){return e.ajax({url:t.url,type:t.method,data:t.data,success:function(e){t.newItems(e,e);t.ajaxSuccess(e,a)},errors:function(e){t.ajaxFailure(e)}})}var i=z.AjaxCache(t.url+":"+t.type),n=JSON.stringify(t.data),r=JSON.stringify(i.previous.args),a,s;if(n!=r){if(!!i.items[n]){a=i.items[n];if(t.newItems){t.newItems(null,a)}if(t.cacheSuccess){t.cacheSuccess(null,a)}}else{s=e.ajax({url:t.url,type:t.method,data:t.data});s.done(function(e){var r;if(!objEqual(e,i.previous.data)){r=e}t.newItems(e,r);t.ajaxSuccess(e,r);i.items[n]=e;i.previous.data=e;i.previous.args=n});if(t.failure){s.fail(function(e){t.ajaxFailure(e)})}}}return s}})(jQuery);$(document).ajaxSend(function(e,t,i){var n,r;if(!/^((https?:)|:?[\/]{2})/.test(i.url)){r=$("meta[name=csrf]");if(!z.anonymous&&r.length){n=r.attr("content")}else{n=$("input[name='csrfmiddlewaretoken']").val()}if(n){t.setRequestHeader("X-CSRFToken",n)}}}).ajaxSuccess(function(e,t,i){$(window).trigger("resize")});z.uid=0;jQuery.fn.tooltip=function(e){var t=$(e),i=$("span",t),n=this,r=false,a,s,o;function l(){if(!a)return;var e=a.offset(),n=s.attr("title"),l=s.attr("data-tooltip-html");o=s.is("[data-delay]")?s.attr("data-delay"):300;if(!l&&n.indexOf("::")>0){var c=n.split("::");i.text("");i.append($("<strong>",{text:c[0].trim()}));i.append($("<span>",{text:c[1].trim()}))}else{i[l?"html":"text"](n)}s.attr("data-oldtitle",n).attr("title","");var u=t.outerWidth(false)/2,d=t.outerHeight(false),h=e.left+a.innerWidth()/2-u-1,f=e.top-a.innerHeight()-d-2;r=setTimeout(function(){t.css({left:h+"px",top:f+"px"}).show()},o)}$(document.body).bind("tooltip_change",l);function c(e){a=$(this);if(a.hasClass("formerror"))t.addClass("error");s=a.attr("title")?a:$("[title]",a).first();if(s.length){l()}}function u(e){clearTimeout(r);t.hide().removeClass("error");if(s&&s.length){a=$(this);s.attr("title",s.attr("data-oldtitle")).attr("data-oldtitle","")}}n.on("mouseover",c).on("mouseout",u)};$(document).ready(function(){$(".tooltip").tooltip("#tooltip")});function makeBlurHideCallback(e){var t=function(t){_root=e.get(0);if(t){if(t.type=="click"&&_root==t.target||_.indexOf($(t.target).parents(),_root)!=-1){return}}e.hideMe();if(e.o.emptyme){e.empty()}if(e.o.deleteme){e.remove()}};return t}$.fn.popup=function(e,t){t=t||{};var i=$(e),n=this,r=z.uid++,a=0;n.o=$.extend({delegate:false,callback:false,container:false,hideme:true,emptyme:false,pointTo:false,offset:{},width:300},t);n.setWidth=function(e){n.css({width:e});return n};n.setPos=function(e,t){t=t||n.o.offset;e=e||n.o.pointTo;if(!e)return false;n.detach().appendTo("body");var i=$(e),r=i.offset(),a=i.outerWidth(false)/2,s=i.outerHeight(false),o=r.left+a>$("body").outerWidth(false)/2,l=o?n.outerWidth(false)-84:63,c=r.left+(t.x||a)-l,u=r.top+(t.y||s)+4;n.removeClass("left");if(o)n.addClass("left");n.css({left:c,top:u,right:"inherit",bottom:"inherit"});n.o.pointTo=e;return n};n.hideMe=function(){n.hide();n.unbind();n.undelegate();$(document.body).unbind("click."+r,n.hider);return n};function s(e){e.preventDefault();a=e.timeStamp;var i=t.callback?t.callback.call(n,{click_target:this,evt:e}):true;n.o=$.extend({click_target:this},n.o,i);if(i){n.render()}}n.render=function(){var e=n.o,t=makeBlurHideCallback(n);n.hider=function(e){if(e.timeStamp!=a){t.call(this,e)}};if(e.hideme){setTimeout(function(){$(document.body).bind("click."+r,n.hider)},0)}n.delegate(".close","click",function(e){e.preventDefault();n.hideMe()});i.trigger("popup_show",[n]);if(e.container&&e.container.length)n.detach().appendTo(e.container);if(e.pointTo){n.setPos(e.pointTo)}setTimeout(function(){n.show()},0);return n};if(n.o.delegate){$(n.o.delegate).delegate(e,"click",s)}else{i.click(s)}n.setWidth(n.o.width);return n};$.fn.modal=function(e,t){t=t||{};var i=$(e),n=this;n.o=$.extend({delegate:false,callback:false,onresize:function(){n.setPos()},hideme:true,emptyme:false,deleteme:false,offset:{},width:450},t);n.setWidth=function(e){n.css({width:e});return n};n.setPos=function(e){e=e||n.o.offset;n.detach().appendTo("body");var t=($(window).width()-n.outerWidth(false))/2,i=$(window).scrollTop()+26;n.css({left:t,top:i+"px",right:"inherit",bottom:"inherit",position:"absolute"});return n};n.hideMe=function(){var e=n.o;n.hide();n.unbind();n.undelegate();$(document.body).unbind("click newmodal",n.hider);$(window).unbind("keydown.lightboxDismiss");$(window).bind("resize",e.onresize);$(".modal-overlay").remove();return n};function r(e){e.preventDefault();var i=t.callback?t.callback.call(n,{click_target:this,evt:e})!==false:true;n.o=$.extend({click_target:this},n.o,i);if(i){$(".modal").trigger("close");n.render()}}n.render=function(){var e=n.o;n.hider=makeBlurHideCallback(n);if(e.hideme){try{setTimeout(function(){$(".modal-overlay, .close").bind("click modal",n.hider)},0)}catch(e){if(typeof console!=="undefined"){console.error("Could not close modal:",e)}}}if(e.close){var t=$("<a>",{class:"close",text:"X"});n.append(t)}$(".popup").hide();n.delegate(".close","click",function(e){e.preventDefault();n.trigger("close")});n.bind("close",function(t){if(e.emptyme){n.empty()}if(e.deleteme){n.remove()}t.preventDefault();n.hideMe()});i.trigger("modal_show",[n]);if(e.container&&e.container.length)n.detach().appendTo(e.container);$('<div class="modal-overlay"></div>').appendTo("body");n.setPos();setTimeout(function(){n.show()},0);$(window).bind("resize",e.onresize).bind("keydown.lightboxDismiss",function(e){if(e.which==27){n.hideMe()}});return n};if(n.o.delegate){$(n.o.delegate).delegate(e,"click",r)}else{i.click(r)}n.setWidth(n.o.width);return n};function modalFromURL(e,t){var i=$("<a>"),n={deleteme:true,close:true},t=t||{},r=t["data"]||{},a=t["callback"];delete t["callback"];t=$.extend(n,t);var s=$("<div>",{class:"modal-inside",text:gettext("Loading...")}),o=$("<div>",{class:"modal"}).modal(i,t);o.append(s);i.trigger("click");$.get(e,r,function(e){o.appendTo("body");s.html("").append(e);if(a){a.call(o)}});return o}function makeslug(e,t){if(!e)return"";var i=new RegExp("[^\\w"+z.unicode_letters+"\\s-]+","g");e=$.trim(e.replace(i," "));e=e.replace(/[-\s]+/g,t||"-").toLowerCase();return e}function show_slug_edit(e){$("#slug_readonly").hide();$("#slug_edit").show();$("#id_slug").focus();e.preventDefault()}function slugify(){var e=$("#id_slug");url_customized=e.attr("data-customized")==0||!e.attr("data-customized");if(url_customized||!e.val()){var t=makeslug($("#id_name").val());e.val(t);name_val=t;$("#slug_value").text(t)}else{$("#slug_value").text($("#id_slug").val())}}function initCharCount(){var e=function(e,t){var i=$(e),n=i.val(),r=parseInt(t.attr("data-maxlength"),10),a=n.split("\n").length-1,s=r-n.length-a;t.html(format(ngettext("<b>{0}</b> character left.","<b>{0}</b> characters left.",s),[s])).toggleClass("error",s<0)};$(".char-count").each(function(){var t=$(this),i=$(this).closest("form"),n;if(t.attr("data-for-startswith")!==undefined){n=$('textarea[id^="'+t.attr("data-for-startswith")+'"]:visible',i)}else{
n=$("textarea#"+t.attr("data-for"),i)}n.bind("keyup blur",function(){e(this,t)}).trigger("blur")})}(function(){var e=typeof FormData!="undefined";z.FormData=function(){this.fields={};this.xhr=new XMLHttpRequest;this.boundary="z"+(new Date).getTime()+""+Math.floor(Math.random()*1e7);if(e){this.formData=new FormData}else{this.output=""}this.append=function(t,i){if(e){this.formData.append(t,i)}else{if(typeof i=="object"&&"fileName"in i){this.output+="--"+this.boundary+"\r\n";this.output+='Content-Disposition: form-data; name="'+t.replace(/[^\w]/g,"")+'";';this.output+=' filename="'+unescape(encodeURIComponent(i.fileName))+'";\r\n';this.output+="Content-Type: "+i.type;this.output+="\r\n\r\n";this.output+=i.getAsBinary();this.output+="\r\n"}else{this.output+="--"+this.boundary+"\r\n";this.output+='Content-Disposition: form-data; name="'+t+'";';this.output+="\r\n\r\n";this.output+=""+i;this.output+="\r\n"}}};this.open=function(e,t,i,n,r){this.xhr.open(e,t,i,n,r)};this.send=function(){if(e){this.xhr.send(this.formData)}else{content_type="multipart/form-data;boundary="+this.boundary;this.xhr.setRequestHeader("Content-Type",content_type);this.output+="--"+this.boundary+"--";this.xhr.sendAsBinary(this.output)}}}})();$.fn.exists=function(e,t){var i=$(this),n=i.length;if(n&&e){e.apply(null,t)}return n>0};$(document).delegate(".mobile-link","click",function(){$.cookie("mamo","on",{expires:30,path:"/"});window.location.reload()});function getScrollbarWidth(){var e=document.createElement("div");e.style.visibility="hidden";e.style.width="100px";e.style.msOverflowStyle="scrollbar";document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%";e.appendChild(i);var n=i.offsetWidth;e.parentNode.removeChild(e);return t-n}$(".island .listing-grid").bind("grid.init",function(e,t){var i=t.self,n=t.maxPage;if(n>0){var r=$('<nav class="pager">');r.append('<a href="#" class="prev">&laquo;</a>');for(var a=0;a<=n;a++){r.append('<a href="#" class="'+(a==0?"selected ":"")+'dot"><b></b></a>')}r.append('<a href="#" class="next">&raquo;</a>');i.parent().prepend(r);r.delegate("a","click",function(e){e.preventDefault();var t=$(this);if(t.hasClass("dot")){i.go(t.index()-1)}else if(t.hasClass("prev")){i.prevPage()}else if(t.hasClass("next")){i.nextPage()}});i.bind("grid.update",function(e,t){r.find(".dot").removeClass("selected").eq(t.current).addClass("selected")})}});z.visitor=z.Storage("visitor");z.currentVisit=z.SessionStorage("current-visit");(function(){if(!z.visitor.get("seen_badbrowser_warning")&&$("body").hasClass("badbrowser")){$("#site-nonfx").show()}})();function hoverTruncate(e){var t=$(e);if(t.hasClass("hovercard")){t=t.parent()}t.find(".hovercard h3").truncate();t.delegate(".hovercard","mouseover",function(){var e=$(this);setTimeout(function(){e.find("h3").untruncate()},100)}).delegate(".hovercard","mouseout",function(){var e=$(this);setTimeout(function(){e.find("h3").truncate()},100)})}function listing_grid(){var e=$(this),t=e.find("section"),i=0,n=t.length-1;e.trigger("grid.init",{self:e,current:i,maxPage:n});e.go=function(r){if(r!=i){r=r<0?0:r>n?n:r;i=r;t.hide().eq(r).show().find(".hovercard h3").truncate();e.trigger("grid.update",{self:e,current:i,maxPage:n})}};e.prevPage=function(){e.go(i-1)};e.nextPage=function(){e.go(i+1)};hoverTruncate(this);e.css({width:e.width()+"px",height:e.height()+"px"});return e}$(function(){"use strict";initBanners();$(".listing-grid").each(listing_grid);$(".hovercard").each(function(){hoverTruncate(this)});$("img[data-defer-src]").each(function(){var e=$(this);e.attr("src",e.attr("data-defer-src"))});$("span.emaillink").each(function(){var e=$(this);e.find(".i").remove();var t=e.text().split("").reverse().join("");e.prev("a").attr("href","mailto:"+t);e.text(t).css("direction","ltr")});$("#page").delegate(".expando .toggle","click",_pd(function(){$(this).closest(".expando").toggleClass("expanded")}));var e=window.location.hash;if(e&&/^#[\w.-]+$/.test(e)){var t=$(e);if(t.hasClass("expando"))t.addClass("expanded")}$("#page").delegate(".scrollto","click",function(e){e.preventDefault();var t=$(this).attr("href"),i=$(t.match(/#.*$/)[0]);if(i.hasClass("expando")){i.addClass("expanded")}var n=i.offset().top-15;$(document.documentElement).animate({scrollTop:n},500)});contributions.init();$("select[name='rating']").ratingwidget()});function initBanners(e){var t=$(e||document.body);if(!z.visitor.get("seen_impala_first_visit")){$("body").addClass("firstvisit");z.visitor.set("seen_impala_first_visit",1)}if(!z.visitor.get("seen_acr_pitch")&&$("body").hasClass("acr-pitch")){t.find("#acr-pitch").show()}t.delegate(".site-balloon .close, .site-tip .close","click",_pd(function(){var e=$(this).closest(".site-balloon, .site-tip");e.fadeOut();if(e.is("#site-nonfx")){z.visitor.set("seen_badbrowser_warning",1)}else if(e.is("#acr-pitch")){z.visitor.set("seen_acr_pitch",1)}else if(e.is("#appruntime-pitch")){z.visitor.set("seen_appruntime_pitch",1)}}))}$(function(){$(document).on("submit","form.ajax-submit, .ajax-submit form",function(){var e=$(this),t=e.is(".ajax-submit")?e:e.closest(".ajax-submit"),i=e.serializeArray();e.find(".submit, button[type=submit], submit").prop("disabled",true).addClass("loading-submit");$.post(e.attr("action"),i,function(e){var i=$(e);t.replaceWith(i);i.trigger("ajax-submit-loaded");i.find(".ajax-submit").trigger("ajax-submit-loaded")});return false})});$.fn.ratingwidget=function(e){this.each(function(t,i){if(!e){e=""}var n=$(i),r="ratingwidget stars stars-0 "+e,a=$('<span class="'+r+'"></span>'),s="",o=function(e){a.removeClass("stars-0 stars-1 stars-2 stars-3 stars-4 stars-5").addClass("stars-"+e)},l=function(e){if(c==e)return;var t=a.find(format('[value="{0}"]',e));t.click();o(e);c=e},c=null;if($("option[selected]",n).length){var u=n.val();l(u);c=parseInt(u,10)}for(var d=1;d<=5;d++){var h=c===d?" checked":"";s+=format('<label data-stars="{0}">{1}<input type="radio" name="rating"{2} value="{3}"></label>',[d,format(ngettext("{0} star","{0} stars",d),[d]),h,d])}a.click(function(e){var t=$(e.target);if(t.is("input[type=radio]")){o(c=t.val());if(!t.val()){t.prop("checked",true)}}}).mouseover(function(e){var t=$(e.target);if(t.attr("data-stars")){o(t.attr("data-stars"))}}).mouseout(function(){o(c||0)}).bind("touchmove touchend",function(e){var t=a.width();var i=a.offset().left;var n=(e.originalEvent.changedTouches[0].clientX-i)/t*5+1;n=~~Math.min(Math.max(n,1),5);l(n)});a.html(s);n.before(a).detach()});return this};!function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.fn.jqm=function(t){return this.each(function(){var i=e(this).data("jqm")||e.extend({ID:d++},e.jqm.params),n=e.extend(i,t);e(this).data("jqm",n).addClass("jqm-init")[0]._jqmID=n.ID,e(this).jqmAddTrigger(n.trigger)})},e.fn.jqmAddTrigger=function(i){return i?this.each(function(){s(e(this),"jqmShow",i)||t("jqmAddTrigger must be called on initialized modals")}):void 0},e.fn.jqmAddClose=function(i){return i?this.each(function(){s(e(this),"jqmHide",i)||t("jqmAddClose must be called on initialized modals")}):void 0},e.fn.jqmShow=function(t){return this.each(function(){this._jqmShown||i(e(this),t)})},e.fn.jqmHide=function(t){return this.each(function(){this._jqmShown&&n(e(this),t)})};var t=function(e){window.console&&window.console.error&&window.console.error(e)},i=function(t,i){i=i||window.event;var n=t.data("jqm"),r=parseInt(t.css("z-index"))||3e3,a=e("<div></div>").addClass(n.overlayClass).css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":r-1,opacity:n.overlay/100}),s={w:t,c:n,o:a,t:i};if(t.css("z-index",r),n.ajax){var l=n.target||t,c=n.ajax;l="string"==typeof l?e(l,t):e(l),"@"===c.substr(0,1)&&(c=e(i).attr(c.substring(1))),l.load(c,function(){n.onLoad&&n.onLoad.call(this,s)}),n.ajaxText&&l.html(n.ajaxText),o(s)}else o(s)},n=function(e,t){t=t||window.event;var i=e.data("jqm"),n={w:e,c:i,o:e.data("jqmv"),t:t};l(n)},r=function(t){return t.c.overlay>0&&t.o.prependTo("body"),t.w.show(),e.jqm.focusFunc(t.w,!0),!0},a=function(e){return e.w.hide()&&e.o&&e.o.remove(),!0},s=function(t,i,n){var r=t.data("jqm");return r?e(n).each(function(){this[i]=this[i]||[],e.inArray(r.ID,this[i])<0&&(this[i].push(r.ID),e(this).click(function(e){return e.isDefaultPrevented()||t[i](this),!1}))}):void 0},o=function(t){var i=t.w,n=t.o,r=t.c;r.onShow(t)!==!1&&(i[0]._jqmShown=!0,r.modal?(h[0]||c("bind"),h.push(i[0])):i.jqmAddClose(n),r.closeClass&&i.jqmAddClose(e("."+r.closeClass,i)),r.toTop&&n&&i.before('<span id="jqmP'+r.ID+'"></span>').insertAfter(n),i.data("jqmv",n),i.unbind("keydown",e.jqm.closeOnEscFunc),r.closeOnEsc&&i.attr("tabindex",0).bind("keydown",e.jqm.closeOnEscFunc).focus())},l=function(t){var i=t.w,n=t.o,r=t.c;r.onHide(t)!==!1&&(i[0]._jqmShown=!1,r.modal&&(h.pop(),h[0]||c("unbind")),r.toTop&&n&&e("#jqmP"+r.ID).after(i).remove())},c=function(t){e(document)[t]("keypress keydown mousedown",u)},u=function(t){var i=e(t.target).data("jqm")||e(t.target).parents(".jqm-init:first").data("jqm"),n=h[h.length-1];return i&&i.ID===n._jqmID?!0:e.jqm.focusFunc(n,t)},d=0,h=[];return e.jqm={params:{overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",closeOnEsc:!1,trigger:".jqModal",ajax:!1,target:!1,ajaxText:"",modal:!1,toTop:!1,onShow:r,onHide:a,onLoad:!1},focusFunc:function(t,i){return i&&e(":input:visible:first",t).focus(),!1},closeOnEscFunc:function(t){return 27===t.keyCode?(e(this).jqmHide(),!1):void 0}},e.jqm});(function(){var e=$("body").attr("data-default-locale");if(e){$(format(".trans>:not([lang='{0}'])",e)).hide();$(format(".trans [lang='{0}']",e)).show()}})();$(document).ready(function(){if(!$("#l10n-menu").length)return;var e=[],t=$("body").attr("data-default-locale"),i=t,n=$("#modal-l10n-unsaved .msg").html(),r=$("#modal-l10n-unsaved").modal(),a=$("#modal-l10n-rm .msg").html(),s=$("#modal-l10n-rm").modal(),o=$(".modal-actions",r),l={};$(".primary").delegate(".trans input, .trans textarea","change keyup paste blur",d);$("form").submit(function(){$(this).find(".trans .cloned").remove()});function c(e){e.find(".trans input[lang], .trans textarea[lang]").each(function(){var e=$(this),t=e.closest(".trans"),i=t.attr("data-name")+"_"+e.attr("lang");l[i]=e.val()})}function u(){g();$el=$("#existing_locales").empty();$("#all_locales li").show();$.each(_.without(e,t),function(){var e=$(format("#all_locales a[href$='{0}']",[this])).parent();if(e.length){$el.append(format("<li><a title='{msg}'class='remove' href='#'>x</a>{row}</li>",{msg:gettext("Remove this localization"),row:e.html()}));e.hide()}})}function d(e,i){var n=e.originalEvent?$(this):$(format("[lang='{0}']",[e]),i),r=n.closest(".trans"),a=e.originalEvent?n.attr("lang"):e,s=$(format("[lang='{0}']",[t]),r),o=r.attr("data-name")+"_"+a;if(n.length==0||n.is("span")){return}if(!(o in l)){l[o]=n.val()}if(a!=t){if(n.val()==s.val()&&n.val().trim().length){n.addClass("cloned")}else if(!n.val().trim().length){if(e.originalEvent&&e.type=="focusout"){n.val(s.val()).addClass("cloned")}else{n.removeClass("cloned")}}else{n.removeClass("cloned")}}if(l[o]!=n.val()){n.addClass("unsaved")}else{n.removeClass("unsaved")}}$(".primary").delegate(".errorlist .l10n","click",f);$("#all_locales").delegate("a","switch",f);var h=t;if($("#l10n-menu:visible").length){h=$.cookie("current_locale")}$(format("#all_locales a[href$='{0}']",[h])).trigger("switch");function f(e){e.preventDefault();$tgt=$(this);var t=$tgt.attr("data-lang")||$tgt.attr("href").substring(1);var a=$("form .trans .unsaved");if(a.length&&t!=i){r.children(".msg").html(format(n,[$("#change-locale").text()]));r.render();$("#l10n-save-changes").unbind().click(function(){var e=$("form:has(.trans .unsaved)");var n=e.length;var a=0;o.addClass("ajax-loading");o.find("button").addClass("disabled");e.each(function(){var e=$(this);$.ajax({url:e.attr("action"),type:"post",data:e.serialize(),error:function(){o.removeClass("ajax-loading")},success:function(s){var l=$(s);if(e.attr("id")&&l.find("#"+e.attr("id")).length){l=l.find("#"+e.attr("id"))}annotateLocalizedErrors(l);n--;if(l.find(".errorlist").length){e.html(l.html());m();if(l.find(format(".errorlist li[data-lang='{0}']",i)).length){a++}}else{c(e);e.find(".unsaved").removeClass("unsaved");e.find(".errorlist").remove()}if(n<1){if(a){window.scrollTo(0,$(".errorlist .l10n").closest("form").offset().top);$(".errorlist").first().siblings(".trans").find("input:visible, textarea:visible").focus()}else{m(t)}}o.removeClass("ajax-loading");o.find("button").removeClass("disabled");r.hideMe()}})})});$("#l10n-discard-changes").click(function(){$(".trans .unsaved").remove();m(t);r.hideMe()});$("#l10n-cancel-changes").click(function(){r.hideMe()})}else{m(t)}if(p){p.hideMe()}}var p=$("#locale-popup").popup("#change-locale",{pointTo:"#change-locale",width:200,callback:function(){u();$("#locale-popup").delegate("a:not(.remove)","click",f);$("#locale-popup").delegate("a.remove","click",function(e){e.preventDefault();e.stopPropagation();var n=$(this).closest("li").find("a:not(.remove)").attr("href").substring(1);s.children(".msg").html(format(a,n));s.render();$("#l10n-cancel-rm").unbind().click(s.hideMe);function r(){$(".modal-actions",s).removeClass("ajax-loading");s.hideMe()}$("#l10n-confirm-rm").unbind().click(function(e){$(".modal-actions",s).addClass("ajax-loading");$.ajax({url:$("#l10n-menu").attr("data-rm-locale"),type:"post",data:{locale:n},error:function(){r()},success:function(){if(i==n){m(t)}$(".trans [lang="+n+"]").remove();r()}})})});return true}});function m(n){n=n||i;if(i!=n){i=n}if(!_.include(e,n)){e.push(n)}var r=$(format("#locale-popup [href$='{0}']",[n])).first().clone();r.find("em").remove();$("#change-locale").text(r.text());$(".trans").each(function(){var e=$(this),i=e.attr("data-name"),r=$(format("label[data-for='{0}']",[i]));if(!e.find(format("[lang='{0}']",[n])).length){if(e.children(".trans-init").length){var a=e.children(".trans-init").clone();a.attr({class:"",lang:n,id:format("id_{0}_{1}",i,n),name:[i,n].join("_"),value:e.find(format("[lang='{0}']",[t])).val()});if(n!=t)a.addClass("cloned")}else{var a=e.find(format("[lang='{0}']",t)).clone();a.attr({class:"cloned",lang:n})}e.append(a)}d(n,e);if(r.length){r.children(".locale").remove();r.append(format("<span class='locale'>{0}</span>",[$("#change-locale").text()]));label_for=e.children(format("[lang='{0}']",[n])).attr("id");r.attr("for",label_for)}});$(format(".trans>:not([lang='{0}'])",i)).hide();$(format(".trans [lang='{0}']",i)).show();initCharCount();if($.cookie("current_locale")!=i&&i!=t){$.cookie("current_locale",null);$.cookie("current_locale",i,{expires:0})}}function g(t){var i={};$(".trans [lang]").each(function(){i[$(this).attr("lang")]=true});e=_.keys(i)}z.refreshL10n=function(e){m(e)};m()});function annotateLocalizedErrors(e){e.find(".errorlist li[data-lang]:not(.l10n)").each(function(){var e=$(this),t=e.text(),i=$(format("#locale-popup [href$='{0}']",[e.attr("data-lang")])).first().text();e.text(format("{0}: ",[i])+t).addClass("l10n")})}function loc(e){return e}function clearErrors(e){$(".errorlist",e).remove();$(".error",e).removeClass("error")}function populateErrors(e,t){clearErrors(e);var i=$('<ul class="errorlist"></ul>');$.each(t,function(t,n){var r=$("[name="+t+"]",e).closest(".row");r.addClass("error");r.append(i.append($(format("<li>{0}</li>",_.escape(n)))))})}function fieldFocused(e){var t=/input|keygen|meter|option|output|progress|select|textarea/i;return t.test(e.target.nodeName)}function postUnsaved(e){$('input[name="unsaved_data"]').val(JSON.stringify(e))}function loadUnsaved(){return JSON.parse($('input[name="unsaved_data"]').val()||"{}")}function initPromos(e,t,i,n){if(!e){e=$(document.body)}var r=$("#promos[data-promo-url]",e);if(!r.length){return}var a=r.attr("data-promo-url");if(!i){i=z.browserVersion}if(!n){n=z.platform}if(z.badBrowser&&!i&&!n){i="5.0";n="mac"}var s={};if(t!="discovery"){s={version:i,platform:n}}$.get(a,s,function(e){$(".slider",r).append($(e));if($(".panel",r).length){r.trigger("promos_shown",[r]);$(".persona-preview",r).previewPersona(true)}if(e!==""&&$("body.restyle").length===1){$("#page > .secondary").addClass("shift-secondary");$("#background-wrapper").addClass("carousel-header");$("#promos").addClass("show");$("#side-nav").addClass("expanded");var t=$("body.restyle").length?24.4:40;$("#background-wrapper").height($(".amo-header").height()+$("#promos").height()+t)}})}$.fn.promoPager=function(){$.each(this,function(t,i){var n=$(".dot",i);n.click(_pd(function(t){$(".selected",i).removeClass("selected");e(i,n,n.index(t.target))}))});function e(e,t,i){var n=-271*i+"px";t.eq(i).addClass("selected");$(e).siblings(".pages").css("top",n)}};(function(){$(document).delegate("#holiday .addons a","click",function(){dcsMultiTrack("DCS.dcssip","addons.mozilla.org","DCS.dcsuri",location.pathname,"WT.ti","Link: "+$("h3",this).text(),"WT.dl",99,"WT.z_convert","HolidayShopping")})})();(function(){$(".toplist .name").truncate({showTitle:true});initPromos();$(document).bind("promos_shown",function(e,t){hideHomePromo();t.slideDown("slow").append('<a href="#" class="control prev">&laquo;</a>                        <a href="#" class="control next">&raquo;</a>');$("div",t).zCarousel({circular:true,btnPrev:$(".prev",t),btnNext:$(".next",t)});$(".pager",t).promoPager();$(".addons h3",t).truncate({dir:"h"});$(".addons .desc",t).truncate({dir:"v"});$(".install",t).installButton();var i=$(".disabled, .concealed",t);if(i.length){i.closest(".wrap").addClass("hide-install")}$("#monthly .blurb > p").lineclamp(4);$("#featuredaddon .blurb > p").lineclamp(4);$(".ryff .desc").lineclamp(6);$("h2:not(.multiline)",t).linefit()})})();function hideHomePromo(e){if(typeof e==="undefined"){e=$(document.body)}if(!$("#promos",e).length){return}var t="amo_home_promo_seen",i=5,n=z.Storage("visitor"),r=parseInt(n.get(t)||0,10);if(r>=i){$("#starter",e).closest(".panel").remove()}else{n.set(t,r+1)}}(function(e){e.fn.lightBox=function(t){t=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var i=this;function n(){r(this,i);return false}function r(i,n){e("embed, object, select").css({visibility:"hidden"});a();t.imageArray.length=0;t.activeImage=0;if(n.length==1){t.imageArray.push(new Array(i.getAttribute("href"),i.getAttribute("title")))}else{for(var r=0;r<n.length;r++){t.imageArray.push(new Array(n[r].getAttribute("href"),n[r].getAttribute("title")))}}while(t.imageArray[t.activeImage][0]!=i.getAttribute("href")){t.activeImage++}s()}function a(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><span class="sr-only">'+gettext("close")+"</span></a></div></div></div></div>");var i=g();e("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:i[0],height:i[1]}).fadeIn();var n=v();e("#jquery-lightbox").css({top:n[1]+i[3]/10,left:n[0]}).show();e("#jquery-overlay,#jquery-lightbox").click(function(){m()});e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){m();return false});e(window).resize(function(){var t=g();e("#jquery-overlay").css({width:t[0],height:t[1]});var i=v();e("#jquery-lightbox").css({top:i[1]+t[3]/10,left:i[0]})})}function s(){e("#lightbox-loading").show();e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var i=new Image;i.onload=function(){e("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]);o(i.width,i.height);i.onload=function(){}};i.src=t.imageArray[t.activeImage][0]}function o(i,n){var r=e("#lightbox-container-image-box").width();var a=e("#lightbox-container-image-box").height();var s=i+t.containerBorderSize*2;var o=n+t.containerBorderSize*2;var c=r-s;var u=a-o;e("#lightbox-container-image-box").animate({width:s,height:o},t.containerResizeSpeed,function(){l()});if(c==0&&u==0){if(e.browser.msie){b(250)}else{b(100)}}e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:n+t.containerBorderSize*2});e("#lightbox-container-image-data-box").css({width:i})}function l(){e("#lightbox-loading").hide();e("#lightbox-image").fadeIn(function(){c();u()});p()}function c(){e("#lightbox-container-image-data-box").slideDown("fast");e("#lightbox-image-details-caption").hide();if(t.imageArray[t.activeImage][1]){e("#lightbox-image-details-caption").text(t.imageArray[t.activeImage][1]).show()}if(t.imageArray.length>1){e("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}}function u(){e("#lightbox-nav").show();e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"});if(t.activeImage!=0){e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnPrev+") left 45% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage-1;s();return false})}if(t.activeImage!=t.imageArray.length-1){e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnNext+") right 45% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){t.activeImage=t.activeImage+1;s();return false})}d()}function d(){e(document).keydown(function(e){f(e)})}function h(){e(document).unbind()}function f(e){if(e==null){keycode=event.keyCode;escapeKey=27}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if(key==t.keyToClose||key=="x"||keycode==escapeKey){m()}if(key==t.keyToPrev||keycode==37){if(t.activeImage!=0){t.activeImage=t.activeImage-1;s();h()}}if(key==t.keyToNext||keycode==39){if(t.activeImage!=t.imageArray.length-1){t.activeImage=t.activeImage+1;s();h()}}}function p(){if(t.imageArray.length-1>t.activeImage){objNext=new Image;objNext.src=t.imageArray[t.activeImage+1][0]}if(t.activeImage>0){objPrev=new Image;objPrev.src=t.imageArray[t.activeImage-1][0]}}function m(){e("#jquery-lightbox").remove();e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()});e("embed, object, select").css({visibility:"visible"})}function g(){var e,t;if(window.innerHeight&&window.scrollMaxY){e=window.innerWidth+window.scrollMaxX;t=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;t=document.body.scrollHeight}else{e=document.body.offsetWidth;t=document.body.offsetHeight}var i,n;if(self.innerHeight){if(document.documentElement.clientWidth){i=document.documentElement.clientWidth}else{i=self.innerWidth}n=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){i=document.documentElement.clientWidth;n=document.documentElement.clientHeight}else if(document.body){i=document.body.clientWidth;n=document.body.clientHeight}if(t<n){pageHeight=n}else{pageHeight=t}if(e<i){pageWidth=e}else{pageWidth=i}arrayPageSize=new Array(pageWidth,pageHeight,i,n);return arrayPageSize}function v(){var e,t;if(self.pageYOffset){t=self.pageYOffset;e=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else if(document.body){t=document.body.scrollTop;e=document.body.scrollLeft}arrayPageScroll=new Array(e,t);return arrayPageScroll}function b(e){var t=new Date;i=null;do{var i=new Date}while(i-t<e)}return this.unbind("click").click(n)}})(jQuery);var purchases={init:function(){$("#contribute-why").popup("#contribute-more-info",{pointTo:"#contribute-more-info"});$(document).on("click",".price-wrapper a",_pd(function(e){var t=$(".price-wrapper");$(this).hide().next().show();$(document).on("change",".price-wrapper select",_pd(function(e){t.find(".price").text(t.find("option:selected").attr("data-display"))}))}));$(document).on("click","button.paypal",function(e){var t=this,i="ajax-loading loading-submit disabled",n=$(t).closest("form").attr("action"),r={result_type:"json"};if($(".price-wrapper option:selected").length){r.currency=$(".price-wrapper option:selected").val()}if($(t).attr("data-realurl")){r.realurl=encodeURIComponent($(t).attr("data-realurl"))}$(t).addClass(i);$.ajax({type:"POST",url:n,data:r,dataType:"json",async:false,success:function(e){$(t).removeClass(i);$(".modal").trigger("close");if(e.status=="COMPLETED"){modalFromURL($(t).attr("data-thanksurl"))}else if(e.paykey){dgFlow=new PAYPAL.apps.DGFlow({clicked:t.id});dgFlow.startFlow(e.url)}else{if(!$("#paypal-error").length){$(t).closest("div").append('<div id="paypal-error" class="popup"></div>')}$("#paypal-error").text(e.error).popup(t,{pointTo:t}).render()}}});setTimeout(purchases.waiting_thanks,1e3);return false});purchases.result()},waiting_thanks:function(){if($(".paypal-thank-you").length){purchases.thanks(window)}else{setTimeout(purchases.waiting_thanks,1e3)}},record:function(e,t){if(e.attr("data-record-url")){$.ajax({url:e.attr("data-record-url"),dataType:"json",type:"POST",success:function(e){if(t){t.apply(this,[e.receipt])}}})}},result:function(){if($("#paypal-result").length){var e=window.top,t=e.dgFlow;if(!t&&top.opener&&top.opener.top.dgFlow){e=top.opener.top;t=e.dgFlow}if(t!==null){var i=$("#paypal-thanks").attr("href"),n=$("#paypal-error").attr("href"),r=window.frameElement;if(i){e.modalFromURL(i)}else if(n){e.modalFromURL(n)}t.closeFlow();if(r){r.close()}else{top.close()}}}},reset:function(e,t){var i=e.closest(".install");if(i.hasClass("premium")){i.removeClass("premium");e.removeClass("premium");i.installButton()}},find_button:function(e){return $(".install[data-addon="+$("#addon_info",e).attr("data-addon")+"]:visible",e).find("a.button")},thanks:function(e){var t=$(e.document).find("body"),i=purchases.find_button(t);purchases.reset(i,t);purchases.trigger(t)},trigger:function(e){if($(".trigger_download",e).exists()){z.installAddon($(".addon-title",e).text(),$(".trigger_download",e).attr("href"))}}};$(document).ready(function(){purchases.init()});var contributions={commentlimit:255,init:function(){var e=$("#contribute-box");var t=parseFloat($("#contrib-too-much").attr("data-max-amount"));e.find("li label").click(function(e){e.preventDefault();$(this).siblings(":radio").prop("checked",true);$(this).children("input:text").focus()}).end().find("input:text").keypress(function(){$(this).parent().siblings(":radio").prop("checked",true)}).end().find("textarea").keyup(function(){var e=$(this).val(),t=contributions.commentlimit,i=$(this).siblings(".commentlen");if(e.length>t){$(this).val(e.substr(0,t))}i.text(t-Math.min(e.length,t))}).keyup().end().find("#contrib-too-much").hide().end().find("#contrib-too-little").hide().end().find("#contrib-not-entered").hide().end().find("form").submit(function(){var e=$(this).find("input:checked").val();if(e=="onetime"){var i=$(this).find('input[name="'+e+'-amount"]').val();$(this).find(".error").hide();if(isNaN(parseFloat(i))||+i!=i){$(this).find("#contrib-not-entered").show();return false}if(i>t){$(this).find("#contrib-too-much").show();return false}if(parseFloat(i)<.01){$(this).find("#contrib-too-little").show();return false}}var n=$(this);n.find("#contribute-actions").children().toggleClass("js-hidden");$.ajax({type:"POST",url:$(this).attr("action")+"?result_type=json",data:$(this).serialize(),async:false,success:function(e){if(e.status=="COMPLETED"){n.find("#paypal-complete").show();n.find("#contribute-actions").hide()}else if(e.paykey){dgFlow=new PAYPAL.apps.DGFlow({clicked:"contribute-box"});dgFlow.startFlow(e.url);n.find("span.cancel a").click()}else{n.find("#paypal-error").text(e.error).show()}}});n.find("#contribute-actions").children().toggleClass("js-hidden");return false});if(!e.jqm){return}e.jqm({overlay:100,overlayClass:"contrib-overlay",onShow:function(e){if($.browser.opera){this.inputs=$(":input:visible").css("visibility","hidden")}e.w.find(".error").hide();if(e.c.overlay>0){e.o.prependTo("body")}e.w.find("input:text").val("").end().find("textarea").val("").keyup().end().find("input:radio:first").prop("checked",true).end().fadeIn()},onHide:function(e){if($.browser.opera){this.inputs.css("visibility","visible")}e.w.fadeOut();e.w.find("#paypal-complete").hide().end().find("#contribute-actions").show().end().find(".error").hide();e.o.remove()},trigger:"#contribute-button",toTop:true}).jqmAddClose(e.find(".cancel a"));if(window.location.hash==="#contribute-confirm"){$("#contribute-button").click()}}};$(function(){if(!$("body").hasClass("addon-details"))return;if($("body.restyle").length===1){$("#background-wrapper").height($(".amo-header").height()+($(".notification-box").length?80:0)+$(".addon-description-header").height()+20)}$(".previews").zCarousel({btnNext:".previews .next",btnPrev:".previews .prev",itemsPerPage:3});(function(){var e=$(document),t=$("#lightbox"),i=$("#lightbox .content"),n=$("#lightbox .caption span"),r=$(".previews"),a,s,o=template('<img id="preview{0}" src="{1}" alt="">');if(!t.length)return;function l(){t.show();u(this);$(window).bind("keydown.lightboxDismiss",function(e){switch(e.which){case z.keys.ESCAPE:e.preventDefault();c();break;case z.keys.LEFT:e.preventDefault();h();break;case z.keys.RIGHT:e.preventDefault();d();break}});setTimeout(function(){t.addClass("show")},0)}function c(){t.removeClass("show");setTimeout(function(){t.hide()},500);$(window).unbind("keydown.lightboxDismiss")}function u(e){var l=$(e),c=t.find("img");a=l.parent().index();s=l.closest("ul").find("li");r.find(".panel").removeClass("active").eq(a).addClass("active");var u=$("#preview"+a);if(u.length){c.css({opacity:"0","z-index":"0"});u.css({opacity:"1","z-index":"1"})}else{u=$(o([a,l.attr("href")]));i.append(u);u.load(function(e){c.css({opacity:"0","z-index":"0"});u.css({opacity:"1","z-index":"1"});for(var t=0;t<s.length;t++){if(t!=a){var n=s.eq(t).find("a");i.append(o([t,n.attr("href")]))}}})}n.text(l.attr("title"));t.find(".control").removeClass("disabled");if(a<1){t.find(".control.prev").addClass("disabled")}if(a==s.length-1){t.find(".control.next").addClass("disabled")}}function d(){if(a<s.length-1){u(s.eq(a+1).find("a"));if(!this.window){$(this).blur()}}}function h(){if(a>0){u(s.eq(a-1).find("a"));if(!this.window){$(this).blur()}}}$("#lightbox .next").click(_pd(d));$("#lightbox .prev").click(_pd(h));$(".previews ul a").click(_pd(l));$("#lightbox").click(_pd(function(e){if($(e.target).is(".close, #lightbox")){c()}}))})();if($("#more-webpage").exists()){var e=$("#more-webpage");url=e.attr("data-more-url");$.get(url,function(t){var i=$(document);var n=i.scrollTop();var r=i.height();var a=n>e.offset().top;if(n&&n>=r-$(window).height()){a=true}var s=$(t.trim());e.replaceWith(s);s.find(".listing-grid h3").truncate({dir:"h"});s.find(".install").installButton();s.find(".listing-grid").each(listing_grid);$("#reviews-link").addClass("scrollto").attr("href","#reviews");if(a){var o=i.height()-r;i.scrollTop(n+o)}})}
if($("#review-add-box").exists())$("#review-add-box").modal("#add-review",{delegate:"#page",width:"650px"});if($("#privacy-policy").exists())$("#privacy-policy").modal(".privacy-policy",{width:"500px"});if($("#webext-permissions").exists())$("#webext-permissions").modal(".webext-permissions",{width:"500px"});if($("#addon[data-id], #persona[data-id]").exists()){$("#addon .icon").click(function(){window.location.hash="id="+$("#addon, #persona").attr("data-id")})}$("#abuse-modal").modal("#report-abuse",{delegate:"#page"})});$(function(){var e=$("fieldset.abuse");if(e.find("legend a").length){var t=e.find("ol");t.hide();e.find("legend a, .cancel").click(_pd(function(){t.slideToggle("fast")}))}});$(document).ready(function(){var e=$(".review-reason").html(),t=$(window);$(".review-reason").popup(".flag-review",{delegate:$(document.body),width:"inherit",callback:function(t){var i=$(t.click_target),n=this;n.hideMe();function r(e,t){$.ajax({type:"POST",url:i.attr("href"),data:{flag:e,note:t},success:function(){n.removeClass("other").hideMe();i.closest(".item").addClass("flagged");i.replaceWith(gettext("Flagged for review")).addClass("flagged")},error:function(){},dataType:"json"})}n.delegate("li a","click",function(e){e.preventDefault();var t=$(e.target);if(t.attr("href")=="#review_flag_reason_other"){n.addClass("other").delegate("form","submit",function(e){e.preventDefault();var t=n.find("#id_note").val();if(!t){alert(gettext("Your input is required"))}else{r("review_flag_reason_other",t)}}).setPos(i).find("input[type=text]").focus()}else{r(t.attr("href").slice(1))}});n.removeClass("other");n.html(e);return{pointTo:i}}});function i(e,i,n,r){return function(a){a.preventDefault();var s=$("#"+e),o=$(this).closest(".review"),l=$("a.permalink",o).attr("href")+"edit",c=$("#"+r),u;clearErrors(s);s.unbind().hide();$(".review").not(o).show();s.detach().insertAfter(o);if(o.find("h4").length){s.find("fieldset h3").remove();u="h4 > b";s.find("fieldset").prepend(o.find("h3").clone())}else{u="h3 > b"}s.find("#"+i).val(o.find(u).text());s.find("#"+n).val(o.children("p.description").html().replace(/<br>/g,"\n"));o.hide();s.show();t.resize();location.hash="#"+e;function d(){clearErrors(s);s.unbind().hide();o.show();c.unbind();t.resize()}c.click(_pd(d));s.submit(function(e){e.preventDefault();$.ajax({type:"POST",url:l,data:s.serialize(),success:function(e,t){clearErrors(s);o.find(u).text(s.find("#"+i).val());var r=s.find(".ratingwidget input:radio:checked").val();$(".stars",o).removeClass("stars-0 stars-1 stars-2 stars-3 stars-4 stars-5").addClass("stars-"+r);r=o.attr("data-rating",r);o.children("p.description").html(s.find("#"+n).val().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>"));d()},error:function(e){var t=$.parseJSON(e.responseText);populateErrors(s,t)},dataType:"json"});return false})}}$(".primary").delegate(".review-reply-edit","click",i("review-reply-edit-form","id_review_reply_title","id_review_reply_body","review-reply-edit-cancel"));$(".primary").delegate(".review-edit","click",i("review-edit-form","id_review_title","id_review_body","review-edit-cancel"));$(".delete-review").click(function(e){e.preventDefault();var t=$(e.target);$.post(t.attr("href"),function(){t.replaceWith(gettext("Marked for deletion"))});t.closest(".review").addClass("deleted")});$('select[name="rating"]').ratingwidget();$("#detail-review-link").click(_pd(function(e){$("#review-add-box form").append('<input type="hidden" name="detailed" value="1">').submit()}))});$(function(){initListingCompat();$(".theme-grid .hovercard.theme").each(function(){var e=$(this);if(e.find(".acr-override").length){e.addClass("acr")}else if(e.find(".concealed").length==e.find(".button").length){e.addClass("incompatible");var t=format(gettext("This theme is incompatible with your version of {0}"),[z.appName]);e.append(format('<span class="notavail">{0}</span>',t))}});$(document.body).bind("newStatic",function(){$(".install-note:visible").closest(".item").addClass("static")}).bind("closeStatic",function(){$(".item.static").removeClass("static")})});function initListingCompat(e){e=e||document.body;$(".listing .item.addon",e).each(function(){var e=$(this);var t=!e.hasClass("ignore-compatibility")&&(e.find(".concealed").length==e.find(".button").length||e.find("button.not-available").length);if(e.find(".acr-override").length){e.addClass("acr")}else if(t){e.addClass("incompatible")}})}(function(e){e.fn.hoverIntent=function(t,i){var n={sensitivity:7,interval:100,timeout:0};n=e.extend(n,i?{over:t,out:i}:t);var r,a,s,o;var l=function(e){r=e.pageX;a=e.pageY};var c=function(t,i){i.hoverIntent_t=clearTimeout(i.hoverIntent_t);if(Math.abs(s-r)+Math.abs(o-a)<n.sensitivity){e(i).unbind("mousemove",l);i.hoverIntent_s=1;return n.over.apply(i,[t])}else{s=r;o=a;i.hoverIntent_t=setTimeout(function(){c(t,i)},n.interval)}};var u=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return n.out.apply(t,[e])};var d=function(t){var i=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){s=i.pageX;o=i.pageY;e(r).bind("mousemove",l);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){c(i,r)},n.interval)}}else{e(r).unbind("mousemove",l);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){u(i,r)},n.timeout)}}};return this.bind("mouseenter",d).bind("mouseleave",d)}})(jQuery);function dispatchPersonaEvent(e,t,i,n){var r={PreviewPersona:"PreviewBrowserTheme",ResetPersona:"ResetBrowserThemePreview",SelectPersona:"InstallBrowserTheme"};try{if(!t.hasAttribute("data-browsertheme")){return}var a=$(t).attr("data-browsertheme");if(n){a=a.replace(/http:\/\//g,"https://")}$(t).attr("persona",a);var s=r[e];var o=[e,s];for(var l=0;l<o.length;l++){var c=o[l];var u=document.createEvent("Events");u.initEvent(c,true,false);t.dispatchEvent(u)}if(i){i()}}catch(e){}}$.hasPersonas=function(){if(!jQuery.browser.mozilla)return false;if(VersionCompare.compareVersions($.browser.version,"1.9.2")>-1){return true}var e=document.getElementsByTagName("body")[0];try{var t=document.createEvent("Events");t.initEvent("CheckPersonas",true,false);e.dispatchEvent(t)}catch(e){}return e.getAttribute("personas")=="true"};$(document).ready(initPreviewTheme);function initPreviewTheme(e){var t=$(".persona-preview, .theme-preview");if(!t.length){return}if(BrowserUtils().browser.firefox!==true){$(".artist-tools, .persona-install").addClass("incompat-browser");$(".persona-install button").addClass("disabled")}$(".persona-install .add").click(_pd(function(e){var t=$(this).closest(".persona");if($(this).closest(".persona").find(".persona-preview a").length){t=t.find(".persona-preview a")}else{t=t.find("a[data-browsertheme]")}dispatchPersonaEvent("SelectPersona",t[0]);var i=t.data("browsertheme").name;_gaq.push(["_trackEvent","AMO Addon / Theme Installs","theme",i])}));if(e===true){z.mktThemeFlag=true;bindPreviewListeners(t)}else{t.previewPersona()}}function bindPreviewListeners(e){e.each(function(){var e=$(this).find("div[data-browsertheme]");e.unbind("click").click(_pd(function(e){var t=$(this),i=e.target.nodeName=="EM"?e.target.parentNode:e.target;$(".theme-preview").find("em").addClass("hidden");if(t.attr("data-clicktoreset")=="true"){dispatchPersonaEvent("ResetPersona",i);t.attr("data-clicktoreset","false");t.find("em").addClass("hidden")}else{dispatchPersonaEvent("PreviewPersona",i);t.attr("data-clicktoreset","true");t.find("em").removeClass("hidden")}}))})}$.fn.previewPersona=function(e){if(!$.hasPersonas()){return}e=$.extend({resetOnClick:true,activeClass:"persona-hover"},e||{});var t=$(this);if(e.resetOnClick){t.click(function(e){if(z.mktThemeFlag){return}dispatchPersonaEvent("ResetPersona",e.target)})}t.hoverIntent({interval:100,over:function(t){if(z.mktThemeFlag){return}$(this).closest(".persona").addClass(e.activeClass);dispatchPersonaEvent("PreviewPersona",t.target)},out:function(t){if(z.mktThemeFlag){return}$(this).closest(".persona").removeClass(e.activeClass);dispatchPersonaEvent("ResetPersona",t.target)}})};$.fn.personasButton=function(e,t){var i=$(this).closest(".persona");if(!i.length){i=$(".theme-large").parent()}i.hoverIntent({interval:100,over:function(e){dispatchPersonaEvent("PreviewPersona",e.currentTarget)},out:function(e){dispatchPersonaEvent("ResetPersona",e.currentTarget)}});i.click(function(e){dispatchPersonaEvent("SelectPersona",e.currentTarget,t);_gaq.push(["_trackEvent","AMO Addon / Theme Installs","theme",$(this).data("name")]);return false})};function VerticalCarousel(e){this.container=$(e);this.currentPage=1;this.items=this.container.find("> li");this.numItems=this.items.length;this.singleHeight=$(this.items[0]).height();this.numVisible=3;this.numPages=Math.ceil(this.numItems/this.numVisible);this.prevButton=$('<a class="arrow prev">^</a>');this.nextButton=$('<a class="arrow next">&gt;</a>');this.container.before(this.prevButton);this.container.after(this.nextButton);this.interval=false;function t(e,t){return new Array(t+1).join(e)}var i=this.numItems%this.numVisible;if(i>0){this.container.append(t('<li style="height:'+this.singleHeight+'px" class="empty" />',i));this.items=this.container.find("> li")}this.items.filter(":first").before(this.items.slice(-this.numVisible).clone().addClass("cloned"));this.items.filter(":last").after(this.items.slice(0,this.numVisible).clone().addClass("cloned"));this.items=this.container.find("> li");this.container.scrollTop(this.singleHeight*this.numVisible)}VerticalCarousel.prototype.gotoPage=function(e){var t=e<this.currentPage?-1:1,i=Math.abs(this.currentPage-e),n=this.singleHeight*t*this.numVisible*i,r=this;if(this.container){this.container.filter(":not(:animated)").animate({scrollTop:"+="+n},500,function(){if(!r.container){return false}if(e===0){r.container.scrollTop(r.singleHeight*r.numVisible*r.numPages);e=r.numPages}else if(e>r.numPages){r.container.scrollTop(r.singleHeight*r.numVisible);e=1}r.currentPage=e})}return false};VerticalCarousel.prototype.autoAdvance=function(){clearInterval(this.interval);var e=this;this.interval=setInterval(function(){e.gotoPage(e.currentPage+1)},5e3)};VerticalCarousel.prototype.pause=function(){clearInterval(this.interval);clearTimeout(this.interval)};VerticalCarousel.prototype.init=function(){var e=this;this.prevButton.click(function(t){e.gotoPage(e.currentPage-1)});this.nextButton.click(function(t){e.gotoPage(e.currentPage+1)});function t(t){e.pause()}function i(t){e.interval=setTimeout(function(){e.autoAdvance()},1e3)}this.prevButton.mouseenter(t);this.nextButton.mouseenter(t);this.container.mouseenter(t);this.prevButton.mouseleave(i);this.nextButton.mouseleave(i);this.container.mouseleave(i);this.autoAdvance()};$(document).ready(function(){new VerticalCarousel($(".personas-slider")).init()});$.fn.objectUrl=function(e){var t=$(this)[0].files,i=false;if(z.capabilities.fileAPI&&t.length){e=e||0;var n=t[e];if(typeof window.URL!=="undefined"){i=window.URL.createObjectURL(n)}else if(typeof window.webkitURL=="function"){i=window.webkitURL.createObjectURL(n)}else if(typeof n.getAsDataURL=="function"){i=n.getAsDataURL()}}return i};(function(e){var t=0;e.fn.imageUploader=function(){var i=this,n=0,r=i[0].files,a=i.attr("data-upload-url"),s=i.closest("form").find("input[name^=csrf]").val();if(!z.capabilities.fileAPI||r.length===0){return false}i.trigger("upload_start_all");e.each(r,function(e,r){var o="",l={instance:t,name:r.name||r.fileName,size:r.size,type:r.type,aborted:false,dataURL:false},c=function(){n--;if(n<=0){i.trigger("upload_finished_all")}i.trigger("upload_finished",[l])},u=new z.FormData;t++;n++;if(i.attr("data-allowed-types").split("|").indexOf(l.type)<0){var d=[gettext("Images must be either PNG or JPG.")];if(typeof i.attr("multiple")!=="undefined"){if(i.attr("data-allowed-types").indexOf("video")>-1){d.push([gettext("Videos must be in WebM.")])}}i.trigger("upload_start",[l]);i.trigger("upload_errors",[l,d]);c();return}l.dataURL=i.objectUrl(e);i.trigger("upload_start",[l]);u.open("POST",a,true);u.append("csrfmiddlewaretoken",s);u.append("upload_image",r);u.xhr.onreadystatechange=function(){if(u.xhr.readyState==4&&u.xhr.responseText&&(u.xhr.status==200||u.xhr.status==304)){var e={};try{e=JSON.parse(u.xhr.responseText)}catch(e){var t=gettext("There was a problem contacting the server.");i.trigger("upload_errors",[l,t]);c();return false}if(e.errors.length){i.trigger("upload_errors",[l,e.errors])}else{i.trigger("upload_success",[l,e.upload_hash])}c()}};u.send()});i.val("")}})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"))}else{e(jQuery)}})(function(e){"use strict";e.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:true,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:false,keywords:"",letterCase:"lowercase",opacity:false,position:"bottom left",show:null,showSpeed:100,theme:"default"}};e.extend(e.fn,{minicolors:function(a,s){switch(a){case"destroy":e(this).each(function(){i(e(this))});return e(this);case"hide":r();return e(this);case"opacity":if(s===undefined){return e(this).attr("data-opacity")}else{e(this).each(function(){o(e(this).attr("data-opacity",s))})}return e(this);case"rgbObject":return c(e(this),a==="rgbaObject");case"rgbString":case"rgbaString":return u(e(this),a==="rgbaString");case"settings":if(s===undefined){return e(this).data("minicolors-settings")}else{e(this).each(function(){var t=e(this).data("minicolors-settings")||{};i(e(this));e(this).minicolors(e.extend(true,t,s))})}return e(this);case"show":n(e(this).eq(0));return e(this);case"value":if(s===undefined){return e(this).val()}else{e(this).each(function(){if(typeof s==="object"){if(s.opacity){e(this).attr("data-opacity",m(s.opacity,0,1))}if(s.color){e(this).val(s.color)}}else{e(this).val(s)}o(e(this))})}return e(this);default:if(a!=="create")s=a;e(this).each(function(){t(e(this),s)});return e(this)}}});function t(t,i){var n=e('<div class="minicolors" />'),r=e.minicolors.defaults,a=t.attr("data-opacity"),s;if(t.data("minicolors-initialized"))return;i=e.extend(true,{},r,i);n.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity).toggleClass("minicolors-no-data-uris",i.dataUris!==true);if(i.position!==undefined){e.each(i.position.split(" "),function(){n.addClass("minicolors-position-"+this)})}if(i.format==="rgb"){s=i.opacity?"25":"20"}else{s=i.keywords?"11":"7"}t.addClass("minicolors-input").data("minicolors-initialized",false).data("minicolors-settings",i).prop("size",s).wrap(n).after('<div class="minicolors-panel minicolors-slider-'+i.control+'">'+'<div class="minicolors-slider minicolors-sprite">'+'<div class="minicolors-picker"></div>'+"</div>"+'<div class="minicolors-opacity-slider minicolors-sprite">'+'<div class="minicolors-picker"></div>'+"</div>"+'<div class="minicolors-grid minicolors-sprite">'+'<div class="minicolors-grid-inner"></div>'+'<div class="minicolors-picker"><div></div></div>'+"</div>"+"</div>");if(!i.inline){t.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>');t.next(".minicolors-swatch").on("click",function(e){e.preventDefault();t.focus()})}t.parent().find(".minicolors-panel").on("selectstart",function(){return false}).end();if(i.inline)t.parent().addClass("minicolors-inline");o(t,false);t.data("minicolors-initialized",true)}function i(e){var t=e.parent();e.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");t.before(e).remove()}function n(e){var t=e.parent(),i=t.find(".minicolors-panel"),n=e.data("minicolors-settings");if(!e.data("minicolors-initialized")||e.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus"))return;r();t.addClass("minicolors-focus");i.stop(true,true).fadeIn(n.showSpeed,function(){if(n.show)n.show.call(e.get(0))})}function r(){e(".minicolors-focus").each(function(){var t=e(this),i=t.find(".minicolors-input"),n=t.find(".minicolors-panel"),r=i.data("minicolors-settings");n.fadeOut(r.hideSpeed,function(){if(r.hide)r.hide.call(i.get(0));t.removeClass("minicolors-focus")})})}function a(e,t,i){var n=e.parents(".minicolors").find(".minicolors-input"),r=n.data("minicolors-settings"),a=e.find("[class$=-picker]"),o=e.offset().left,l=e.offset().top,c=Math.round(t.pageX-o),u=Math.round(t.pageY-l),d=i?r.animationSpeed:0,h,f,p,m;if(t.originalEvent.changedTouches){c=t.originalEvent.changedTouches[0].pageX-o;u=t.originalEvent.changedTouches[0].pageY-l}if(c<0)c=0;if(u<0)u=0;if(c>e.width())c=e.width();if(u>e.height())u=e.height();if(e.parent().is(".minicolors-slider-wheel")&&a.parent().is(".minicolors-grid")){h=75-c;f=75-u;p=Math.sqrt(h*h+f*f);m=Math.atan2(f,h);if(m<0)m+=Math.PI*2;if(p>75){p=75;c=75-75*Math.cos(m);u=75-75*Math.sin(m)}c=Math.round(c);u=Math.round(u)}if(e.is(".minicolors-grid")){a.stop(true).animate({top:u+"px",left:c+"px"},d,r.animationEasing,function(){s(n,e)})}else{a.stop(true).animate({top:u+"px"},d,r.animationEasing,function(){s(n,e)})}}function s(e,t){function i(e,t){var i,n;if(!e.length||!t)return null;i=e.offset().left;n=e.offset().top;return{x:i-t.offset().left+e.outerWidth()/2,y:n-t.offset().top+e.outerHeight()/2}}var n,r,a,s,o,c,u,h=e.val(),f=e.attr("data-opacity"),p,g=e.parent(),v=e.data("minicolors-settings"),b=g.find(".minicolors-swatch"),y=g.find(".minicolors-grid"),_=g.find(".minicolors-slider"),x=g.find(".minicolors-opacity-slider"),k=y.find("[class$=-picker]"),C=_.find("[class$=-picker]"),D=x.find("[class$=-picker]"),I=i(k,y),P=i(C,_),M=i(D,x);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(v.control){case"wheel":s=y.width()/2-I.x;o=y.height()/2-I.y;c=Math.sqrt(s*s+o*o);u=Math.atan2(o,s);if(u<0)u+=Math.PI*2;if(c>75){c=75;I.x=69-75*Math.cos(u);I.y=69-75*Math.sin(u)}r=m(c/.75,0,100);n=m(u*180/Math.PI,0,360);a=m(100-Math.floor(P.y*(100/_.height())),0,100);h=w({h:n,s:r,b:a});_.css("backgroundColor",w({h:n,s:r,b:100}));break;case"saturation":n=m(parseInt(I.x*(360/y.width()),10),0,360);r=m(100-Math.floor(P.y*(100/_.height())),0,100);a=m(100-Math.floor(I.y*(100/y.height())),0,100);h=w({h:n,s:r,b:a});_.css("backgroundColor",w({h:n,s:100,b:a}));g.find(".minicolors-grid-inner").css("opacity",r/100);break;case"brightness":n=m(parseInt(I.x*(360/y.width()),10),0,360);r=m(100-Math.floor(I.y*(100/y.height())),0,100);a=m(100-Math.floor(P.y*(100/_.height())),0,100);h=w({h:n,s:r,b:a});_.css("backgroundColor",w({h:n,s:r,b:100}));g.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:n=m(360-parseInt(P.y*(360/_.height()),10),0,360);r=m(Math.floor(I.x*(100/y.width())),0,100);a=m(100-Math.floor(I.y*(100/y.height())),0,100);h=w({h:n,s:r,b:a});y.css("backgroundColor",w({h:n,s:100,b:100}));break}if(v.opacity){f=parseFloat(1-M.y/x.height()).toFixed(2)}else{f=1}if(v.opacity)e.attr("data-opacity",f);if(v.format==="rgb"){var T=$(h),f=e.attr("data-opacity")===""?1:m(parseFloat(e.attr("data-opacity")).toFixed(2),0,1);if(isNaN(f)||!v.opacity)f=1;if(e.minicolors("rgbObject").a<=1&&T&&v.opacity){p="rgba("+T.r+", "+T.g+", "+T.b+", "+parseFloat(f)+")"}else{p="rgb("+T.r+", "+T.g+", "+T.b+")"}}else{p=d(h,v.letterCase)}e.val(p)}b.find("span").css({backgroundColor:h,opacity:f});l(e,p,f)}function o(t,i){var n,r,a,s,o,c,u,b,_,k,$=t.parent(),C=t.data("minicolors-settings"),D=$.find(".minicolors-swatch"),I=$.find(".minicolors-grid"),P=$.find(".minicolors-slider"),M=$.find(".minicolors-opacity-slider"),T=I.find("[class$=-picker]"),S=P.find("[class$=-picker]"),j=M.find("[class$=-picker]");if(g(t.val())){n=y(t.val());o=m(parseFloat(v(t.val())).toFixed(2),0,1);if(o){t.attr("data-opacity",o)}}else{n=d(h(t.val(),true),C.letterCase)}if(!n){n=d(p(C.defaultValue,true),C.letterCase)}r=x(n);s=!C.keywords?[]:e.map(C.keywords.split(","),function(t){return e.trim(t.toLowerCase())});if(t.val()!==""&&e.inArray(t.val().toLowerCase(),s)>-1){c=d(t.val())}else{c=g(t.val())?f(t.val()):n}if(!i)t.val(c);if(C.opacity){a=t.attr("data-opacity")===""?1:m(parseFloat(t.attr("data-opacity")).toFixed(2),0,1);if(isNaN(a))a=1;t.attr("data-opacity",a);D.find("span").css("opacity",a);b=m(M.height()-M.height()*a,0,M.height());j.css("top",b+"px")}if(t.val().toLowerCase()==="transparent"){D.find("span").css("opacity",0)}D.find("span").css("backgroundColor",n);switch(C.control){case"wheel":_=m(Math.ceil(r.s*.75),0,I.height()/2);k=r.h*Math.PI/180;u=m(75-Math.cos(k)*_,0,I.width());b=m(75-Math.sin(k)*_,0,I.height());T.css({top:b+"px",left:u+"px"});b=150-r.b/(100/I.height());if(n==="")b=0;S.css("top",b+"px");P.css("backgroundColor",w({h:r.h,s:r.s,b:100}));break;case"saturation":u=m(5*r.h/12,0,150);b=m(I.height()-Math.ceil(r.b/(100/I.height())),0,I.height());T.css({top:b+"px",left:u+"px"});b=m(P.height()-r.s*(P.height()/100),0,P.height());S.css("top",b+"px");P.css("backgroundColor",w({h:r.h,s:100,b:r.b}));$.find(".minicolors-grid-inner").css("opacity",r.s/100);break;case"brightness":u=m(5*r.h/12,0,150);b=m(I.height()-Math.ceil(r.s/(100/I.height())),0,I.height());T.css({top:b+"px",left:u+"px"});b=m(P.height()-r.b*(P.height()/100),0,P.height());S.css("top",b+"px");P.css("backgroundColor",w({h:r.h,s:r.s,b:100}));$.find(".minicolors-grid-inner").css("opacity",1-r.b/100);break;default:u=m(Math.ceil(r.s/(100/I.width())),0,I.width());b=m(I.height()-Math.ceil(r.b/(100/I.height())),0,I.height());T.css({top:b+"px",left:u+"px"});b=m(P.height()-r.h/(360/P.height()),0,P.height());S.css("top",b+"px");I.css("backgroundColor",w({h:r.h,s:100,b:100}));break}if(t.data("minicolors-initialized")){l(t,c,a)}}function l(e,t,i){var n=e.data("minicolors-settings"),r=e.data("minicolors-lastChange");if(!r||r.value!==t||r.opacity!==i){e.data("minicolors-lastChange",{value:t,opacity:i});if(n.change){if(n.changeDelay){clearTimeout(e.data("minicolors-changeTimeout"));e.data("minicolors-changeTimeout",setTimeout(function(){n.change.call(e.get(0),t,i)},n.changeDelay))}else{n.change.call(e.get(0),t,i)}}e.trigger("change").trigger("input")}}function c(t){var i=h(e(t).val(),true),n=$(i),r=e(t).attr("data-opacity");if(!n)return null;if(r!==undefined)e.extend(n,{a:parseFloat(r)});return n}function u(t,i){var n=h(e(t).val(),true),r=$(n),a=e(t).attr("data-opacity");if(!r)return null;if(a===undefined)a=1;if(i){return"rgba("+r.r+", "+r.g+", "+r.b+", "+parseFloat(a)+")"}else{return"rgb("+r.r+", "+r.g+", "+r.b+")"}}function d(e,t){return t==="uppercase"?e.toUpperCase():e.toLowerCase()}function h(e,t){e=e.replace(/^#/g,"");if(!e.match(/^[A-F0-9]{3,6}/gi))return"";if(e.length!==3&&e.length!==6)return"";if(e.length===3&&t){e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}return"#"+e}function f(e,t){var i=e.replace(/[^\d,.]/g,""),n=i.split(","),r;n[0]=m(parseInt(n[0],10),0,255);n[1]=m(parseInt(n[1],10),0,255);n[2]=m(parseInt(n[2],10),0,255);if(n[3]){n[3]=m(parseFloat(n[3],10),0,1)}if(t){return{r:n[0],g:n[1],b:n[2],a:n[3]?n[3]:null}}if(typeof n[3]!=="undefined"&&n[3]<=1){return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}else{return"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}}function p(e,t){if(g(e)){return f(e)}else{return h(e,t)}}function m(e,t,i){if(e<t)e=t;if(e>i)e=i;return e}function g(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&t.length===4?true:false}function v(e){var e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i);return e&&e.length===6?e[4]:"1"}function b(e){var t={};var i=Math.round(e.h);var n=Math.round(e.s*255/100);var r=Math.round(e.b*255/100);if(n===0){t.r=t.g=t.b=r}else{var a=r;var s=(255-n)*r/255;var o=(a-s)*(i%60)/60;if(i===360)i=0;if(i<60){t.r=a;t.b=s;t.g=s+o}else if(i<120){t.g=a;t.b=s;t.r=a-o}else if(i<180){t.g=a;t.r=s;t.b=s+o}else if(i<240){t.b=a;t.r=s;t.g=a-o}else if(i<300){t.b=a;t.g=s;t.r=s+o}else if(i<360){t.r=a;t.g=s;t.b=a-o}else{t.r=0;t.g=0;t.b=0}}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function y(e){e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function _(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];e.each(i,function(e,t){if(t.length===1)i[e]="0"+t});return"#"+i.join("")}function w(e){return _(b(e))}function x(e){var t=k($(e));if(t.s===0)t.h=360;return t}function k(e){var t={h:0,s:0,b:0};var i=Math.min(e.r,e.g,e.b);var n=Math.max(e.r,e.g,e.b);var r=n-i;t.b=n;t.s=n!==0?255*r/n:0;if(t.s!==0){if(e.r===n){t.h=(e.g-e.b)/r}else if(e.g===n){t.h=2+(e.b-e.r)/r}else{t.h=4+(e.r-e.g)/r}}else{t.h=-1}t.h*=60;if(t.h<0){t.h+=360}t.s*=100/255;t.b*=100/255;return t}function $(e){e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}}e(document).on("mousedown.minicolors touchstart.minicolors",function(t){if(!e(t.target).parents().add(t.target).hasClass("minicolors")){r()}}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var i=e(this);t.preventDefault();e(document).data("minicolors-target",i);a(i,t,true)}).on("mousemove.minicolors touchmove.minicolors",function(t){var i=e(document).data("minicolors-target");if(i)a(i,t)}).on("mouseup.minicolors touchend.minicolors",function(){e(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(t){var i=e(this).parent().find(".minicolors-input");t.preventDefault();n(i)}).on("focus.minicolors",".minicolors-input",function(){var t=e(this);if(!t.data("minicolors-initialized"))return;n(t)}).on("blur.minicolors",".minicolors-input",function(){var t=e(this),i=t.data("minicolors-settings"),n,r,a,s,o;if(!t.data("minicolors-initialized"))return;n=!i.keywords?[]:e.map(i.keywords.split(","),function(t){return e.trim(t.toLowerCase())});if(t.val()!==""&&e.inArray(t.val().toLowerCase(),n)>-1){o=t.val()}else{if(g(t.val())){a=f(t.val(),true)}else{r=h(t.val(),true);a=r?$(r):null}if(a===null){o=i.defaultValue}else if(i.format==="rgb"){o=i.opacity?f("rgba("+a.r+","+a.g+","+a.b+","+t.attr("data-opacity")+")"):f("rgb("+a.r+","+a.g+","+a.b+")")}else{o=_(a)}}s=i.opacity?t.attr("data-opacity"):1;if(o.toLowerCase()==="transparent")s=0;t.closest(".minicolors").find(".minicolors-swatch > span").css("opacity",s);t.val(o);if(t.val()==="")t.val(p(i.defaultValue,true));t.val(d(t.val(),i.letterCase))}).on("keydown.minicolors",".minicolors-input",function(t){var i=e(this);if(!i.data("minicolors-initialized"))return;switch(t.keyCode){case 9:r();break;case 13:case 27:r();i.blur();break}}).on("keyup.minicolors",".minicolors-input",function(){var t=e(this);if(!t.data("minicolors-initialized"))return;o(t,true)}).on("paste.minicolors",".minicolors-input",function(){var t=e(this);if(!t.data("minicolors-initialized"))return;setTimeout(function(){o(t,true)},1)})});(function(){if(!$("#submit-persona").length){return}i();var e=$("#submit-persona form");e.delegate("input, select, textarea","change keyup paste",function(e){o(e.target.form)});o(e[0]);n();initCharCount();a();s();function t(){if(location.hash=="#ownership"){$(".owner-email").removeClass("hidden").find("input").focus()}else{$(".owner-email").addClass("hidden").find("input").blur()}}function i(){$(".transfer-ownership").click(function(e){if(location.hash=="#ownership"){location.hash="";e.preventDefault()}});window.addEventListener("hashchange",function(){t()},false);t()}function n(){var t=$("#id_license");var i={copyr:{id:1,name:gettext("All Rights Reserved")},"cc-attrib":{id:2,name:gettext("Creative Commons Attribution 3.0"),url:"http://creativecommons.org/licenses/by/3.0/"},"cc-attrib cc-noncom":{id:3,name:gettext("Creative Commons Attribution-NonCommercial 3.0"),url:"http://creativecommons.org/licenses/by-nc/3.0/"},"cc-attrib cc-noncom cc-noderiv":{id:4,name:gettext("Creative Commons Attribution-NonCommercial-NoDerivs 3.0"),url:"http://creativecommons.org/licenses/by/3.0/"},"cc-attrib cc-noncom cc-share":{id:5,name:gettext("Creative Commons Attribution-NonCommercial-Share Alike 3.0"),url:"http://creativecommons.org/licenses/by-nc-sa/3.0/"},"cc-attrib cc-noderiv":{id:6,name:gettext("Creative Commons Attribution-NoDerivs 3.0"),url:"http://creativecommons.org/licenses/by-nd/3.0/"},"cc-attrib cc-share":{id:7,name:gettext("Creative Commons Attribution-ShareAlike 3.0"),url:"http://creativecommons.org/licenses/by/3.0/"}};var n=_.object(_.map(i,function(e,t){return[e.id,t]}));function r(e){$("#cc-chooser .radios").each(function(){var e=$(this);if(!e.find("input:checked").length){e.find('input[value="0"]').prop("checked",true)}});var n;if($('input[data-cc="copyr"]:checked').length){n="copyr"}else{n=$("input[data-cc]:checked").map(function(){return $(this).data("cc")}).toArray().join(" ")}var r=i[n];if(r){var a=r.name;if(r.url){a=format('<a href="{0}">{1}</a>',r.url,a)}var s=$("#persona-license");s.show().find("#cc-license").html(a).attr("class","license icon "+n);t.val(r.id);if(e){l()}}}var a=$(".noncc"),s=$("#persona-license-list");function o(e){if(e){a.addClass("disabled");$('input[name="cc-noncom"][value=1], input[name="cc-noderiv"][value=2]').prop("checked",true)}else{a.removeClass("disabled")}}e.delegate('input[name="cc-attrib"]',"change",function(){o(+t.val()==i.copyr.id)}).delegate("#persona-license-list input[type=radio][name=license]","change",function(){$(".noncc.disabled").removeClass("disabled");$('input[name^="cc-"]').prop("checked",false);_.each(n[+s.find("input[name=license]:checked").val()].split(" "),function(e){$('input[type=radio][data-cc="'+e+'"]').prop("checked",true);o(e=="copyr")});r(false)});if(!t.val()){t.val(i.copyr.id);$('input[data-cc="copyr"]').prop("checked",true);o(+t.val()==i.copyr.id)}else{_.each(n[+t.val()].split(" "),function(e){$('input[type=radio][data-cc="'+e+'"]').prop("checked",true)})}o(+t.val()==i.copyr.id);r();$('input[name^="cc-"]').change(r);function l(){s.find('input[value="'+t.val()+'"]').prop("checked",true)}$("#persona-license .select-license").click(_pd(function(){$("#persona-license-list").toggle();l()}));l()}var r={};function a(){var e=$("#persona-design"),t=function(e){$(this).closest(".row").find(".preview").removeClass("loading");$("#submit-persona button").prop("disabled",false);s()},i=function(e,t){var i=$(this).closest(".row"),n=i.find(".errorlist");if(n.length==2){n.eq(0).remove()}i.find(".errorlist").html("");i.find(".preview").addClass("loading").removeClass("error-loading");$("#submit-persona button").prop("disabled",true)},n=function(e,t,i){var n=$(this).closest(".row");n.find('input[type="hidden"]').val(i);n.find("input[type=file], .note").hide();n.find(".preview").attr("src",t.dataURL).addClass("loaded");r[i]=t.dataURL;s();n.find(".preview, .reset").show()},a=function(e,t,i){var n=$(this).closest(".row"),r=n.find(".errorlist");n.find(".preview").addClass("error-loading");$.each(i,function(e,t){r.append("<li>"+t+"</li>")})};e.delegate(".reset","click",_pd(function(){var e=$(this),t=e.closest(".row");t.find('input[type="hidden"]').val("");t.find("input[type=file], .note").show();t.find(".preview").removeAttr("src").removeClass("loaded");s();e.hide()}));e.delegate('input[type="file"]',"upload_finished",t).delegate('input[type="file"]',"upload_start",i).delegate('input[type="file"]',"upload_success",n).delegate('input[type="file"]',"upload_errors",a).delegate('input[type="file"]',"change",function(e){$(this).imageUploader()});function s(){var t=$("#persona-header .preview").attr("src"),i=$("#persona-preview .persona-viewer");if(t){i.css("background-image","url("+t+")")}var n={id:"0"};$.each(["name","accentcolor","textcolor"],function(t,i){n[i]=e.find("#id_"+i).val()});n.header=n.headerURL=e.find("#persona-header .preview").attr("src");n.footer=n.footerURL=e.find("#persona-footer .preview").attr("src")
;i.attr("data-browsertheme",JSON.stringify(n));var r=e.find("#id_accentcolor").attr("data-rgb"),a=e.find("#id_textcolor").val();i.find(".title, .author").css({"background-color":format("rgba({0}, .7)",r),color:a})}var o=$("#submit-persona input.color-picker");o.change(function(){var e=$(this),t=e.val();if(t.indexOf("#")===0){var i=u(t);e.attr("data-rgb",format("{0},{1},{2}",i.r,i.g,i.b))}s()}).trigger("change");o.minicolors({dataUris:true,change:function(){o.trigger("change");s()}});$("#id_name").bind("change keyup paste blur",_.throttle(function(){$("#persona-preview-name").text($(this).val()||gettext("Your Theme's Name"));slugify()},250)).trigger("change");$("#submit-persona").submit(function(){c(r)});r=l();_.each(r,function(e,t){$('input[value="'+t+'"]').siblings("input[type=file]").trigger("upload_success",[{dataURL:e},t])})}function s(){$(".reupload").click(_pd(function(){$(".theme-design").slideToggle();$(".reupload, .theme-preview").toggle()}))}function o(e){if(e){$(e).find("button[type=submit]").prop("disabled",!e.checkValidity())}}function l(){return JSON.parse($('input[name="unsaved_data"]').val()||"{}")}function c(e){$('input[name="unsaved_data"]').val(JSON.stringify(e))}function u(e){e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}}})();z.unicode_letters="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԥԱ-Ֆՙա-ևא-תװ-ײء-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨऄ-हऽॐक़-ॡॱॲॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡഅ-ഌഎ-ഐഒ-നപ-ഹഽൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜໝༀཀ-ཇཉ-ཬྈ-ྋက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₔℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆷㇰ-ㇿ㐀-䶵一-鿋ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙟꙢ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋꞌꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-鶴侮-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ";$(document).trigger("unicode_loaded");var collections={};(function(){var e=$("h2.collection[data-collectionid]");if(e.length){e.find("img").click(function(){window.location.hash="id="+e.attr("data-collectionid")})}RECENTLY_VIEWED_LIMIT=5;jQuery.extend({keys:function(e){var t=[];$.each(e,function(e){t.push(e)});return t},values:function(e){var t=[];$.each(e,function(e,i){t.push(i)});return t},items:function(e){var t=[];$.each(e,function(e,i){t.push([e,i])});return t},fmap:function(e,t){var i=[];$.each(e,function(e,n){i.push(t(n,e))});return i},dict:function(e){var t={};$.each(e,function(e,i){t[i[0]]=i[1]});return t}});var t=function(e){var t=0;$.each(e,function(e,i){t+=i});return t};var i=function(e){if($.cookie("collections-leave-me-alone"))return;var t=$('<div class="modal-subscription">'+e+"</div>");t.appendTo(document.body).jqm().jqmAddClose("a.close-button").jqmShow();t.find("#bothersome").change(function(){$.cookie("collections-leave-me-alone",true,{expires:365,path:collections.cookie_path});t.jqmHide()})};collections.hijack_favorite_button=function(){var e=collections;$("form.favorite").submit(function(t){t.preventDefault();var n=$(this).attr("action")+"/ajax";var r=$(this).find("button");var a=r.html();var s=r.hasClass("fav");var o=function(t){var i=e[t+"_text"];if(r.find("img").length){var n=e[t+"_img"];r.html('<img src="'+n+'" alt="" />'+i)}else{r.html(i)}};r.css("min-width",r.outerWidth());r.addClass("loading-fav").prop("disabled",true);o(s?"removing":"adding");r.css("min-width",r.outerWidth());$.ajax({type:"POST",data:$(this).serialize(),url:n,success:function(e){if(s){r.removeClass("fav");o("add")}else{i(e);r.addClass("fav");o("remove")}bandwagonRefreshEvent()},error:function(){r.html(a)},complete:function(){r.prop("disabled",false);r.removeClass("loading-fav")}})})};$(document).ready(collections.recently_viewed);$(document).ready(function(){var e=false;var t=function(t){t.preventDefault();if(e)return;e=true;var i=$(this);$.post($(this).attr("action"),$(this).serialize(),function(t,n,r){e=false;if(r.status==200){var a=i.closest(".barometer");var s=$("input.voted",a);var o=$('input[type="submit"]',i);if(s.length){s.get(0).value--;s.removeClass("voted")}if(s.get(0)!==o.get(0)){o.get(0).value++;o.addClass("voted")}}})};if(z.anonymous){$(".barometer form").submit(function(e){e.preventDefault();var t=this;var i=$(".collection-rate-dropdown",$(t).closest(".barometer"));if($(t).hasClass("downvote")){i.addClass("left")}else{i.removeClass("left")}i.detach().appendTo(t).show();setTimeout(function(){function e(t){_root=i.get(0);if(t.type=="click"&&_root==t.target||_.indexOf($(t.target).parents(),_root)!=-1){return}i.hide();$(document.body).unbind("click newPopup",e)}$(document.body).bind("click newPopup",e)},0)})}else{$(".barometer form").submit(t)}});$(document).ready(function(){var e=collections;e.adding_img="/img/icons/white-loading-16x16.gif";e.adding_text=gettext("Adding to Favorites&hellip;");e.removing_img="/img/icons/white-loading-16x16.gif";e.removing_text=gettext("Removing Favorite&hellip;");e.add_img="/img/icons/buttons/plus-orange-16x16.gif";e.add_text=gettext("Add to Favorites");e.remove_img="/img/icons/buttons/minus-orange-16x16.gif";e.remove_text=gettext("Remove from Favorites");e.cookie_path="/";collections.hijack_favorite_button()});addon_ac=$("#addon-ac");if(addon_ac.length){addon_ac.autocomplete({minLength:3,width:300,source:function(e,t){$.getJSON($("#addon-ac").attr("data-src"),{q:e.term},t)},focus:function(e,t){$("#addon-ac").val(t.item.name);return false},select:function(e,t){$("#addon-ac").val(t.item.name).attr("data-id",t.item.id).attr("data-icon",t.item.icons["32"]);return false}}).data("ui-autocomplete")._renderItem=function(e,t){if(!$("#addons-list input[value="+t.id+"]").length){return $("<li>").data("item.autocomplete",t).append('<a><img src="'+t.icons["32"]+'" alt="">'+_.escape(t.name)+"</a>").appendTo(e)}else{return $("<li>")}}}$("#addon-ac").keydown(function(e){if(e.which==13){e.preventDefault();$("#addon-select").click()}});$("#addon-select").click(function(e){e.preventDefault();var t=$("#addon-ac").attr("data-id");var i=_.escape($("#addon-ac").val());var n=$("#addon-ac").attr("data-icon");if($("input[name=addon][value="+t+"]").length){return false}if(t&&i&&n){var r=template("<tr>"+'<td class="item">'+'<input name="addon" value="{id}" type="hidden">'+'<img src="{icon}" alt=""><h3>{name}</h3>'+'<p class="comments">'+'<textarea name="addon_comment"></textarea>'+"</p></td>"+"<td>"+gettext("Pending")+"</td>"+'<td><a title="'+gettext("Add a comment")+'" class="comment">'+gettext("Comment")+"</a></td>"+'<td class="remove"><a title="'+gettext("Remove this add-on from the collection")+'" class="remove">'+gettext("Remove")+"</a></td>"+"</tr>");var a=r({id:t,name:i,icon:n});$("#addon-select").closest("tbody").append(a)}$("#addon-ac").val("")});var n=$("#addon-ac").closest("table");n.delegate(".remove","click",function(){$(this).closest("tr").remove()}).delegate(".comment","click",function(){var e=$(this).closest("tr");e.find(".comments").show();$(".comments textarea",e).focus()})})();if($("body.collections-contributors")){var user_row=template("<tr>"+"<td>"+'<input name="contributor" value="{email}" type="hidden">'+"{name}"+"</td><td>{email}</td>"+'<td class="contributor">Contributor</td>'+'<td class="remove"><a title="'+gettext("Remove this user as a contributor")+'" class="remove">'+gettext("Remove")+"</a></td>"+"</tr>");$("#contributor-ac-button").click(function(e){e.preventDefault();var t=$("#contributor-ac").val();var i=$("#contributor-ac").attr("data-src");var n=$("#contributor-ac").attr("data-owner");var r=$("#contributor-ac-error");if(!t){r.html(gettext("An email address is required.")).addClass("error");return}$("#contributor-ac").addClass("ui-autocomplete-loading");$.get(i,{q:t},function(e){$("#contributor-ac").removeClass("ui-autocomplete-loading");if(e.status){if($("input[name=contributor][value="+e.id+"]").length==0&&n!=e.id){var i=user_row({id:e.id,name:e.name,email:t});$("#contributor-ac-button").closest("tbody").append(i);r.html("").removeClass("error")}else if(e.id==n){r.html(gettext("You cannot add yourself as a contributor.")).addClass("error")}else{r.html(gettext("You have already added that user.")).addClass("error")}}else{r.html(e.message).addClass("error")}$("#contributor-ac").val("")})});var table=$("#contributors-list");table.delegate(".remove","click",function(){$(this).closest("tr").remove()});$("#change-owner").popup(".make-owner",{callback:function(e){var t=this,i=$(e.click_target);t.delegate("#change-owner-cancel","click",function(e){e.preventDefault();t.hideMe()});t.attr("data-newowner",i.parents(".contributor").children("input[name='contributor']").val());return{pointTo:i}}});$("#change-owner-submit").click(function(e){e.preventDefault();var t=$("#change-owner").attr("data-newowner");$("#users-edit form").append('<input type="hidden" name="new_owner" value="'+t+'">').submit()})}$(document).ready(function(){$("#remove_icon").click(function(){$.ajax({url:$(this).attr("href"),headers:{"X-CSRFToken":$.cookie("csrftoken")},type:"POST",success:function(e){$("#icon_upload .icon_preview img").attr("src",e.icon)}});$(this).hide();return false})});$(document).ready(function(){var e=$("#id_name").val();$(document).bind("unicode_loaded",function(){$("#id_slug").attr("data-customized",!!$("#id_slug").val()&&$("#id_slug").val()!=makeslug(e)?1:0);slugify()});$("#details-edit form, .collection-create form").delegate("#id_name","keyup",slugify).delegate("#id_name","blur",slugify).delegate("#edit_slug","click",show_slug_edit).delegate("#id_slug","change",function(){$("#id_slug").attr("data-customized",1);if(!$("#id_slug").val()){$("#id_slug").attr("data-customized",0);slugify()}});var t=$("#add-to-collection").html();$("#add-to-collection").popup(".widgets .collection-add",{width:200,offset:{x:8},callback:function(e){var n=this,r=$(e.click_target),a=r.attr("data-listurl"),s=r.attr("data-removeurl"),o=r.attr("data-addurl"),l=r.attr("data-newurl"),c=r.attr("data-addonid");if(z.anonymous){return{pointTo:r}}function u(e){if(e)e.preventDefault();r.addClass("ajax-loading");$.ajax({url:a,data:{addon_id:c},success:d,error:function(){d(t)},dataType:"html"})}function d(e){n.html(e);n.show();r.removeClass("ajax-loading");$("a.outlink",n).click(i);if(!$(".errorlist li",n).length)n.setWidth(200);n.setPos(r);n.render();n.delegate("#ajax_collections_list li","click",h).delegate("#ajax_new_collection","click",p).delegate("#id_name","keyup",slugify).delegate("#id_name","blur",slugify).delegate("#edit_slug","click",show_slug_edit).delegate("#id_slug","change",function(){if(!$("#id_slug").val()){$("#id_slug").attr("data-customized",0);slugify()}else{$("#id_slug").attr("data-customized",1)}})}function h(e){e.preventDefault();var t=$(this);var r={addon_id:c,id:t.attr("data-id")};var a=this.className=="selected"?s:o;if(t.hasClass("ajax-loading"))return;t.addClass("ajax-loading");$.post(a,r,function(e){n.html(e);$("a.outlink",n).click(i)},"html")}var f=function(e){e.preventDefault();var t=$(this);if(r.hasClass("ajax-loading"))return;r.addClass("ajax-loading");form_data=$("#add-to-collection form").serialize();$.post(l+"?addon_id="+c,form_data,d,"html")};var p=function(e){e.preventDefault();var t=$(this);$.get(l,{addon_id:c},function(e){n.html(e);n.setWidth(410);n.setPos(r);$("#id_name").focus();$("#collections-new-cancel").on("click",u);$("#add-to-collection form").on("submit",f)})};n.hideMe();n.unbind("click.popup",i);n.bind("click.popup",i);u();return false}});function i(e){e.stopPropagation()}});$(document).ready(function(){$(".widget.favorite").click(function(e){e.preventDefault();var t=$(this);var i={addon_id:t.attr("data-addonid")};var n=t.hasClass("faved");var r=n?t.attr("data-removeurl"):t.attr("data-addurl");var a=t.hasClass("condensed");if(t.hasClass("ajax-loading"))return;t.addClass("ajax-loading");$.ajax({url:r,data:i,type:"post",success:function(e){t.removeClass("ajax-loading");if(n){t.removeClass("faved");if(a)t.attr("title",gettext("Add to favorites"));else t.text(t.attr("data-unfavedtext"))}else{t.addClass("faved");if(a)t.attr("title",gettext("Remove from favorites"));else t.text(t.attr("data-favedtext"))}t.trigger("tooltip_change")},error:function(e){t.removeClass("ajax-loading")}})});$(".collection_widgets .watch").click(function(e){e.preventDefault();var t=$(this);if(t.hasClass("ajax-loading"))return;t.addClass("ajax-loading");var i=gettext("Follow this Collection");$.ajax({url:$(this).attr("href"),type:"POST",success:function(e){t.removeClass("ajax-loading");if(e.watching){t.addClass("watching");i=gettext("Stop following")}else{t.removeClass("watching")}if(t.hasClass("condensed")){t.attr("title",i);t.trigger("tooltip_change")}else{t.text(i)}},error:function(){t.removeClass("ajax-loading")}})});$("#sharing-popup").popup(".share.widget",{width:280,offset:{x:8},callback:function(e){var t={};var i=$(e.click_target);var n=i.attr("data-base-url");var r=this;r.find("a.uniquify").each(function(e,t){var i=$(t);i.attr("href",n+i.attr("data-service-name"))});r.hideMe();t.pointTo=e.click_target;return t}});if($("#details-edit").length&&$("div.notification-box").length){$(document).scrollTop($("div.primary").position().top)}});$(function(){if(!$(document.body).hasClass("collections")){return}$(".watch").click(_pd(function(){var e=$(this),t=e.closest(".item");if(e.hasClass("ajax-loading"))return;e.addClass("ajax-loading");var i=gettext("Follow this Collection");$.ajax({url:$(this).attr("href"),type:"POST",success:function(n){t.removeClass("watching");e.removeClass("ajax-loading");if(n.watching){t.addClass("watching");i=gettext("Stop Following");$("<span>",{text:gettext("Following"),class:"is-watching"}).insertBefore(e)}else{t.find(".is-watching").remove()}e.text(i)},error:function(){e.removeClass("ajax-loading")}})}))});$("#admin-login").click(function(){window.location=$(this).attr("data-url")});var RecaptchaOptions={theme:"custom"};$("#recaptcha_different").click(function(e){e.preventDefault();Recaptcha.reload()});$("#recaptcha_audio").click(function(e){e.preventDefault();var t=this.getAttribute("data-nextType")||"audio";Recaptcha.switch_type(t);this.setAttribute("data-nextType",t==="audio"?"image":"audio")});$("#recaptcha_help").click(function(e){e.preventDefault();Recaptcha.showhelp()});$(function(){$(".user-avatar img").click(_pd(function(e){window.location.hash="id="+$(".user-avatar").data("user-id");e.stopPropagation()}));$("#report-user-modal").modal("#report-user-abuse",{delegate:"#page"});if($("#user_edit").exists()){$(".more-all, .more-none").click(_pd(function(){var e=$(this);e.closest("li").find("input:not([disabled])").prop("checked",e.hasClass("more-all"))}))}$("#acct-password").hide();$("#change-acct-password").click(_pd(function(){$("#acct-password").fadeIn();$("#id_oldpassword").focus();$(this).closest("li").hide()}));$("#acct-password .errorlist li").exists(function(){$("#acct-password").show();$("#change-acct-password").closest("li").hide()});var e=$(".profile-photo .avatar"),t=$("<a>",{text:gettext("Use original"),class:"use-original delete",href:"#"}).hide();e.attr("data-original",e.attr("src"));function i(){$(".use-original").hide();$("#id_photo").val("");e.attr("src",e.attr("data-original"))}t.click(_pd(i));e.closest("li").append(t);$("#id_photo").change(function(){var n=$(this).closest("li"),r=$(this)[0].files[0],a=r.name||r.fileName;n.find(".errorlist").remove();if(!a.match(/\.(jpg|png|jpeg)$/i)){$ul=$("<ul>",{class:"errorlist"});$ul.append($("<li>",{text:gettext("Images must be either PNG or JPG.")}));n.append($ul);i();return}var s=$(this).objectUrl();if(s){t.css("display","block");e.attr("src",s)}})});$("#admin-login").click(function(){window.location=$(this).attr("data-url")});z.getVars=function(e,t){if(typeof e==="undefined"){e=location.search}if(e&&e[0]=="?"){e=e.substr(1)}if(!e)return{};return _.chain(e.split("&")).map(function(e){return _.map(e.split("="),escape_)}).filter(function(e){return!!e[0]&&(!t||!_.isUndefined(e[1]))}).object().value()};JSON.parseNonNull=function(e){return JSON.parse(e,function(e,t){if(typeof t==="object"&&t===null){return""}return t})};(function(){var e=$("#id_appver");var t=$("#id_platform");function i(i){var n=$(i||document.body);$("#search",n).bind("autofill",function(i){var n=$(this);if(!e.length){return}var r=z.getVars();if(!!r.appver){e.val(r.appver)}else if(z.appMatchesUserAgent){e.val(z.browserVersion)}if(!!r.platform){t.val(r.platform)}else if(z.appMatchesUserAgent){t.val(z.platform)}}).trigger("autofill")}i();$(function(){$("#search-facets").delegate("li.facet","click",function(e){var t=$(this);if(t.hasClass("active")){if($(e.target).is("a")){return}t.removeClass("active")}else{t.closest("ul").find(".active").removeClass("active");t.addClass("active")}}).delegate("a","highlight",function(e){var t=$(this);t.closest(".facet-group").find(".selected").removeClass("selected");t.closest("li").addClass("selected")}).delegate(".cnt","recount",function(e,t){var i=$(this);if(t.length&&i.html()!=t.html()){i.replaceWith(t)}}).delegate("a[data-params]","rebuild",function(e){var t=$(this),i=n(t.attr("href"),t.attr("data-params"));t.attr("href",i)});if($("body").hasClass("pjax")&&$.support.pjax&&z.capabilities.JSON){$("#pjax-results").initSearchPjax($("#search-facets"))}});function n(e,t,i){var n=JSON.parseNonNull(t),r=$.extend(z.getVars(i,true),n);return e.split("?")[0]+"?"+$.param(r)}$.fn.initSearchPjax=function(e){var t=$(this),i=t.selector,n;function r(e){var t=location.pathname+location.search;if(!!e&&e!="#"&&e!=t){$.pjax({url:e,container:i,timeout:5e3})}}function a(){n=$(this);r(n.attr("href"))}function s(){var e=t.closest(".results"),i=gettext("Updating results&hellip;"),n="updating";e.addClass("loading");if(t.outerHeight()>300){n+=" tall"}$("<div>",{class:n,html:i}).insertBefore(t);t.trigger("search.loading")}function o(){var i=t.closest(".results");$.when(t.find(".install:not(.triggered)").installButton()).done(function(){t.find(".install").addClass("triggered");initListingCompat()});i.removeClass("loading").find(".updating").remove();e.find(".cnt").trigger("recount",[i.find(".cnt")]);e.find("a[data-params]").trigger("rebuild");if(n){n.trigger("highlight")}$("#search").trigger("autofill");$("html, body").animate({scrollTop:0},200);t.trigger("search.finished")}function l(e){if(fieldFocused(e)){return}if(e.which==$.ui.keyCode.LEFT||e.which==$.ui.keyCode.RIGHT){e.preventDefault();var i;if(e.which==$.ui.keyCode.LEFT){i=".paginator .prev:not(.disabled)"}else{i=".paginator .next:not(.disabled)"}r(t.find(i).attr("href"))}}$(document).on("click",".pjax-trigger a",_pd(a));t.bind("start.pjax",s).bind("end.pjax",o);$(document).keyup(_.throttle(l,300))}})();$.fn.highlightTerm=function(e){e=e.replace(/[^\w\s]/gi,"");var t=new RegExp(e,"gi");this.each(function(){var e=$(this),i=e.html(),n=i.replace(t,"<b>$&</b>");if(i!=n){e.html(n)}})};$.fn.searchSuggestions=function(e,t,i){var n=this,r=n.closest("form");if(!e.length){return}var a=e.attr("data-cat");if(i=="AMO"){var s;if(a=="themes"){s=gettext("Search themes for <b>{0}</b>")}else if(a=="apps"){s=gettext("Search apps for <b>{0}</b>")}else{s=gettext("Search add-ons for <b>{0}</b>")}var o=template('<div class="wrap">'+'<p><a class="sel" href="#"><span>{msg}</span></a></p><ul></ul>'+"</div>");e.html(o({msg:s}))}else if(i=="MKT"){e.html('<div class="wrap"><ul></ul></div>')}var l=[z.keys.SHIFT,z.keys.CONTROL,z.keys.ALT,z.keys.PAUSE,z.keys.CAPS_LOCK,z.keys.ESCAPE,z.keys.ENTER,z.keys.PAGE_UP,z.keys.PAGE_DOWN,z.keys.LEFT,z.keys.UP,z.keys.RIGHT,z.keys.DOWN,z.keys.HOME,z.keys.END,z.keys.COMMAND,z.keys.WINDOWS_RIGHT,z.keys.COMMAND_RIGHT,z.keys.WINDOWS_LEFT_OPERA,z.keys.WINDOWS_RIGHT_OPERA,z.keys.APPLE];var c=[z.keys.ESCAPE,z.keys.UP,z.keys.DOWN];function u(){e.find(".sel").removeClass("sel");e.removeClass("sel");e.find("a:first").addClass("sel")}function d(){e.find(".sel").removeClass("sel");e.removeClass("sel");e.find("a:last").addClass("sel")}function h(){e.removeClass("visible sel");if(i=="MKT"){$("#site-header").removeClass("suggestions");if(z.capabilities.mobile&&$("body.home").length===0){z.body.removeClass("show-search")}}}function f(t){if(!e.hasClass("visible")||$.inArray(t.which,c)<0||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey){e.trigger("keyIgnored");return}t.preventDefault();if(t.which==z.keys.ESCAPE){h()}else if(t.which==z.keys.UP||t.which==z.keys.DOWN){var i=e.find(".sel"),n=e.find("a"),r=n.index(i.get(0));if(i.length&&r>=0){if(t.which==z.keys.UP){r=Math.max(0,r-1)}else{r=Math.min(r+1,n.length-1)}}else{r=0}i.removeClass("sel");n.eq(r).addClass("sel");e.addClass("sel").trigger("selectedRowUpdate",[r])}}function p(s){if(s.type==="paste"){g=true}var o=escape_(n.val());if(o.length<3){e.filter(".visible").removeClass("visible");return}var c={$results:e,$form:r,searchTerm:o};if(i=="AMO"||i=="MKT"){c["category"]=a}if((s.type==="keyup"&&typeof s.which==="undefined"||$.inArray(s.which,l)>=0)&&!g){e.trigger("inputIgnored")}else{t(c)}g=false}var m=0,g=false;if(z.capabilities.touch){n.focus(function(){if(m!==0){clearInterval(m)}m=setInterval(function(){f(n);p(n);return},150)})}else{n.bind("keydown",f).bind("keyup paste",_.throttle(p,250))}function v(e){clearInterval(m);_.delay(h,250);n.trigger("dismissed")}n.blur(v);r.submit(function(e){n.blur();v(e)});e.find(".sel").click(function(e){e.preventDefault();r.submit()});e.delegate("li, p","mouseenter mouseleave",function(){e.find(".sel").removeClass("sel");e.addClass("sel");$(this).find("a").addClass("sel")}).delegate("a","click",function(){v();n.val("")});e.bind("highlight",function(t,i){e.find("ul a span").highlightTerm(i);e.addClass("visible");if(!e.find(".sel").length){u()}});e.bind("dismiss",v);$(document).keyup(function(e){if(fieldFocused(e)){return}if(e.which==83){n.focus()}});return this};(function(){$("#search #search-q").searchSuggestions($("#site-search-suggestions"),e,"AMO");function e(e){if(!e||!e.category){return}e["$results"].find("p b").html(format('"{0}"',e.searchTerm));var t=template('<li><a href="{url}"><span {cls} {icon}>{name}</span>{subtitle}</a></li>');$.ajaxCache({url:e["$results"].attr("data-src"),data:e["$form"].serialize()+"&cat="+e.category,newItems:function(i,n){var r;if(n!==undefined){var a="";$.each(n,function(e,i){var n={url:escape_(i.url)||"#",icon:"",cls:"",subtitle:""};if(i.icons&&i.icons["32"]){n.icon=format('style="background-image:url({0})"',escape_(i.icons["32"]))}if(i.cls){n.cls=format('class="{0}"',escape_(i.cls));if(i.cls=="cat"){n.subtitle=format(' <em class="subtitle">{0}</em>',gettext("Category"))}}if(i.name){n.name=escape_(i.name);a+=t(n)}});e["$results"].find("ul").html(a)}e["$results"].trigger("highlight",[e.searchTerm]).trigger("resultsUpdated",[n])}})}})();$(".login #id_username:visible").focus();